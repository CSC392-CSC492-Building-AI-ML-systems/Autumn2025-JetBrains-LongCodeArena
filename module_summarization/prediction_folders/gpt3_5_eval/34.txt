```rst
w_stateprobs
============

.. program:: w_stateprobs

calculate state-to-state kinetics by tracing trajectories
---------------------------------------------------------

.. code-block:: bash

   w_stateprobs trace [OPTIONS]

Description
-----------

Calculate average populations and associated errors in state populations from
weighted ensemble data. Bin assignments, including macrostate definitions,
are required. (See "w_assign --help" for more information).

Output format
-------------

The output file (-o/--output, usually "stateprobs.h5") contains the following
dataset:

  /avg_state_pops [state]
    (Structured -- see below) Population of each state across entire
    range specified.

If --evolution-mode is specified, then the following additional dataset is
available:

  /state_pop_evolution [window][state]
    (Structured -- see below). State populations based on windows of
    iterations of varying width.  If --evolution-mode=cumulative, then
    these windows all begin at the iteration specified with
    --start-iter and grow in length by --step-iter for each successive
    element. If --evolution-mode=blocked, then these windows are all of
    width --step-iter (excluding the last, which may be shorter), the first
    of which begins at iteration --start-iter.

The structure of these datasets is as follows:

  iter_start
    (Integer) Iteration at which the averaging window begins (inclusive).

  iter_stop
    (Integer) Iteration at which the averaging window ends (exclusive).

  expected
    (Floating-point) Expected (mean) value of the rate as evaluated within
    this window, in units of inverse tau.

  ci_lbound
    (Floating-point) Lower bound of the confidence interval on the rate
    within this window, in units of inverse tau.

  ci_ubound
    (Floating-point) Upper bound of the confidence interval on the rate
    within this window, in units of inverse tau.

  corr_len
    (Integer) Correlation length of the rate within this window, in units
    of tau.

Each of these datasets is also stamped with a number of attributes:

  mcbs_alpha
    (Floating-point) Alpha value of confidence intervals. (For example,
    *alpha=0.05* corresponds to a 95% confidence interval.)

  mcbs_nsets
    (Integer) Number of bootstrap data sets used in generating confidence
    intervals.

  mcbs_acalpha
    (Floating-point) Alpha value for determining correlation lengths.

Command-line options
--------------------

Options:

  -h, --help
    Show this help message and exit.

  -o OUTPUT, --output OUTPUT
    Output file name. Default is "stateprobs.h5".

  --evolution-mode {cumulative,blocked}
    Mode for generating state population evolution data.

  --start-iter START_ITER
    Starting iteration for state population evolution data.

  --step-iter STEP_ITER
    Iteration step size for state population evolution data.

  --alpha ALPHA
    Alpha value for confidence intervals.

  --nsets NSETS
    Number of bootstrap data sets for confidence intervals.

  --acalpha ACALPHA
    Alpha value for determining correlation lengths.

Examples
--------

Calculate state-to-state kinetics:

.. code-block:: bash

   w_stateprobs trace -o stateprobs.h5

Deprecation Notice
------------------

``w_stateprobs`` is being deprecated. Please use ``w_direct`` instead.

```