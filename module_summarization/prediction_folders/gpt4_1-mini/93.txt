Structured Arrays Utilities
===========================

This module provides a collection of utilities to manipulate structured arrays in NumPy. Many of these functions were originally implemented by John Hunter for matplotlib and have been rewritten and extended for convenience.

Functions
---------

recursive_fill_fields(input, output)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Fill fields from one structured array (`input`) into another (`output`), supporting nested structures.

Parameters
  - input : ndarray
    Input array.
  - output : ndarray
    Output array, which should be at least the same size as `input`.

Returns
  - output : ndarray
    The output array with fields filled from the input.

Example
  >>> import numpy as np
  >>> from numpy.lib import recfunctions as rfn
  >>> a = np.array([(1, 10.), (2, 20.)], dtype=[('A', np.int64), ('B', np.float64)])
  >>> b = np.zeros((3,), dtype=a.dtype)
  >>> rfn.recursive_fill_fields(a, b)
  array([(1, 10.), (2, 20.), (0,  0.)], dtype=[('A', '<i8'), ('B', '<f8')])

get_names(adtype)
~~~~~~~~~~~~~~~~~
Return the field names of the input dtype as a tuple. Supports nested fields by returning nested tuples.

Parameters
  - adtype : dtype
    Input data type with fields.

Returns
  - tuple
    Tuple of field names, nested as necessary.

Example
  >>> from numpy.lib import recfunctions as rfn
  >>> rfn.get_names(np.dtype([('A', int), ('B', float)]))
  ('A', 'B')
  >>> adtype = np.dtype([('a', int), ('b', [('ba', int), ('bb', int)])])
  >>> rfn.get_names(adtype)
  ('a', ('b', ('ba', 'bb')))

get_names_flat(adtype)
~~~~~~~~~~~~~~~~~~~~~~
Return the field names of the input dtype as a flat tuple, flattening any nested structures.

Parameters
  - adtype : dtype
    Input data type with fields.

Returns
  - tuple
    Flat tuple of all field names.

Example
  >>> from numpy.lib import recfunctions as rfn
  >>> adtype = np.dtype([('a', int), ('b', [('ba', int), ('bb', int)])])
  >>> rfn.get_names_flat(adtype)
  ('a', 'b', 'ba', 'bb')

flatten_descr(ndtype)
~~~~~~~~~~~~~~~~~~~~~
Flatten a structured data-type description into a tuple of (fieldname, dtype) pairs.

Parameters
  - ndtype : dtype
    Structured data type.

Returns
  - tuple
    Flattened description of the dtype.

Example
  >>> from numpy.lib import recfunctions as rfn
  >>> ndtype = np.dtype([('a', '<i4'), ('b', [('ba', '<f8'), ('bb', '<i4')])])
  >>> rfn.flatten_descr(ndtype)
  (('a', dtype('int32')), ('ba', dtype('float64')), ('bb', dtype('int32')))

Additional Utilities
--------------------

The module also includes other functions such as:

- append_fields
- apply_along_fields
- assign_fields_by_name
- drop_fields
- find_duplicates
- get_fieldstructure
- join_by
- merge_arrays
- rec_append_fields
- rec_drop_fields
- rec_join
- rename_fields
- repack_fields
- require_fields
- stack_arrays
- structured_to_unstructured
- unstructured_to_structured

These functions provide extensive support for manipulating and combining structured arrays, including appending fields, dropping fields, joining arrays by keys, merging arrays, and converting between structured and unstructured representations.

Notes
-----

- The module relies heavily on NumPy's structured array and masked array capabilities.
- Nested structured arrays are supported in many functions, allowing for complex data manipulations.
- Some functions use internal NumPy utilities and decorators such as `array_function_dispatch` for compatibility and performance.

This module is essential for users working with complex structured data in NumPy, providing convenient and powerful tools to handle structured arrays efficiently.