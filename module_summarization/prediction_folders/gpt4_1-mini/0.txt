Working with Assignments and Allocations
========================================

In ftrack, **assignments** and **allocations** are key concepts used to manage the relationship between tasks, users, and resources. This documentation provides an overview of how to work with assignments and allocations using the ftrack API.

Assignments
-----------

An **assignment** represents the association of a user or a group to a task or a specific entity within ftrack. Assignments are used to indicate responsibility or involvement in a particular piece of work.

### Creating an Assignment

To create an assignment, you typically associate a user or group with a task entity. For example:

```python
task = session.query('Task where name is "My Task"').one()
user = session.query('User where username is "jdoe"').one()

assignment = session.create('Assignment', {
    'task': task,
    'resource': user
})
session.commit()
```

### Accessing Assignments

You can access assignments from a task or a user:

```python
# Get all assignments for a task
assignments = task['assignments']

# Get all tasks assigned to a user
user_assignments = session.query('Assignment where resource.id is "{}"'.format(user['id'])).all()
```

### Modifying Assignments

Assignments can be updated by modifying their attributes and committing the session:

```python
assignment['note'] = 'Updated assignment note'
session.commit()
```

### Removing Assignments

To remove an assignment, delete it from the session and commit:

```python
session.delete(assignment)
session.commit()
```

Allocations
-----------

An **allocation** represents the allocation of a resource (such as a user or a group) to a project or a broader scope, often with a specified time period or capacity. Allocations help manage resource availability and planning.

### Creating an Allocation

Allocations are created by associating a resource with a project or entity, optionally specifying start and end dates:

```python
project = session.query('Project where name is "My Project"').one()
user = session.query('User where username is "jdoe"').one()

allocation = session.create('Allocation', {
    'project': project,
    'resource': user,
    'start_date': '2024-01-01',
    'end_date': '2024-12-31',
    'capacity': 1.0  # Full-time allocation
})
session.commit()
```

### Accessing Allocations

Allocations can be accessed from a project or a resource:

```python
# Get all allocations for a project
allocations = project['allocations']

# Get all allocations for a user
user_allocations = session.query('Allocation where resource.id is "{}"'.format(user['id'])).all()
```

### Modifying Allocations

Update allocation details as needed:

```python
allocation['capacity'] = 0.5  # Half-time allocation
session.commit()
```

### Removing Allocations

Delete an allocation when it is no longer needed:

```python
session.delete(allocation)
session.commit()
```

Best Practices
--------------

- Always commit the session after creating, modifying, or deleting assignments and allocations to persist changes.
- Use queries to retrieve assignments and allocations efficiently.
- Manage allocations carefully to reflect accurate resource availability and avoid overbooking.
- Utilize assignments to clearly define responsibilities on tasks and projects.

By effectively managing assignments and allocations, you can ensure clear responsibility tracking and resource planning within your ftrack projects.