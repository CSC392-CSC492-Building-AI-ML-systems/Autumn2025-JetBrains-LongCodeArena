w_bins Command
==============

Overview
--------
The `w_bins` command is a versatile tool for displaying information and statistics about binning in a WEST simulation, as well as modifying the binning for the current iteration of a WEST simulation.

This command provides two main subcommands:

- `info`: Display information about the current binning.
- `rebin`: Rebuild the current iteration with new binning.

Usage
-----

```
w_bins <subcommand> [options]
```

Subcommands
-----------

### info

Display information about binning for a specified iteration (default is the current iteration).

**Options:**

- `-n`, `--n-iter` *N_ITER*  
  Consider initial points of segment *N_ITER* (default: current iteration).

- `--detail`  
  Display detailed per-bin information in addition to summary information.

- Binning options (see below) can be specified to filter or modify the binning information displayed.

This subcommand prints bin counts, weights, and optionally detailed per-bin statistics.

### rebin

Rebuild the current iteration with new binning.

**Options:**

- `--confirm`  
  Commit the revised iteration to the HDF5 file. Without this option, the effects of the new binning are only calculated and printed.

- `--detail`  
  Display detailed per-bin information in addition to summary information.

- `-n`, `--n-iter` *N_ITER*  
  Consider initial points of segment *N_ITER* (default: current iteration).

- Binning options (except `--bins-from-file`) and target count options can be specified to define the new binning and target counts.

**Note:**  
Rebinning is not supported for the first iteration. Attempting to rebin iteration 1 will result in an error message advising to reinitialize with `w_init` instead.

Functionality Details
---------------------

- The `info` subcommand reads the binning information for the specified iteration and prints summary statistics including bin counts and weights. If the `--detail` flag is used, it also prints detailed per-bin information.

- The `rebin` subcommand recalculates bin assignments for the current iteration's initial points using the specified new binning scheme. It can optionally commit these changes to the simulation data if `--confirm` is specified. This process involves reassigning segments to bins, updating weights, and saving the new binning information and initial states.

- Both subcommands support specifying the iteration number with `-n` or `--n-iter`. If not specified, the current iteration is used.

- The tool integrates with WESTPA's data management and binning components to ensure consistency and correctness of binning information.

Examples
--------

Display binning information for the current iteration with summary statistics:

```
w_bins info
```

Display detailed binning information for iteration 5:

```
w_bins info -n 5 --detail
```

Calculate new binning for the current iteration and display detailed statistics without committing changes:

```
w_bins rebin --detail
```

Rebuild the current iteration with new binning and commit the changes:

```
w_bins rebin --confirm
```

Rebuild iteration 10 with new binning and target counts, then commit:

```
w_bins rebin -n 10 --confirm --target-counts ...
```

(Replace `--target-counts ...` with appropriate target count options.)

Additional Information
----------------------

- The `w_bins` command relies on WESTPA's binning infrastructure and data management system.

- It is intended for advanced users who need to inspect or modify binning schemes during WEST simulations.

- Care should be taken when using the `rebin` subcommand with `--confirm` as it modifies simulation data.

- For more detailed binning configuration options, refer to the documentation of the binning components used by WESTPA.

-------------------------------------------------------------------------------