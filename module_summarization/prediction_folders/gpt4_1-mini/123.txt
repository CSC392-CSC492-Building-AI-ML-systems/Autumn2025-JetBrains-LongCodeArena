DeleteViewMixin and WithinRoleDeleteView
=========================================

Implements the preview + confirm + delete workflow for Django models.

Overview
--------

This module provides a mixin and a view class to facilitate a common delete workflow pattern in Django applications: previewing the object to be deleted, confirming the deletion, and then performing the delete action with appropriate success messaging and redirection.

DeleteViewMixin
---------------

`DeleteViewMixin` is a reusable mixin designed to be combined with Django's generic `DeleteView` or other class-based views. It provides the core functionality for the delete workflow, including:

- **Page Title and Labels**  
  - `get_pagetitle()`  
    Returns the page title, defaulting to "Confirm delete".  
  - `get_action_label()`  
    Returns the action label, defaulting to "Delete". Used as a prefix for the page title and the default label for the delete button.  
  - `get_delete_button_label()`  
    Returns the label for the delete button, defaulting to the action label.  
  - `get_cancel_button_label()`  
    Returns the label for the cancel button, defaulting to "Cancel".

- **Object Preview and Confirmation Message**  
  - `get_object_preview()`  
    Returns a string representation of the object to be deleted, used to preview the object in the confirmation prompt.  
  - `get_confirm_message()`  
    Returns a confirmation message asking the user if they are sure they want to delete the object, including the object preview.

- **Success Handling**  
  - `get_success_url()`  
    Returns the URL to redirect to after successful deletion. Defaults to the index view of the current app.  
  - `get_success_message(object_preview)`  
    Returns a success message to be displayed after deletion, including the object preview.  
  - `add_success_messages(object_preview)`  
    Adds success messages to the Django messages framework after deletion. Can be overridden to customize messaging behavior.

- **Context Data**  
  - `add_delete_view_mixin_context_data(context)`  
    Adds relevant context variables for the delete view template, including model verbose name, success URL, object preview, page title, confirmation message, and button labels.

- **Delete Action**  
  - Overrides the `delete()` method to add success messages after the object is deleted.

Usage notes:

- Import this mixin via `from django_cradmin import viewhelpers` and refer to it as `viewhelpers.formview.DeleteViewMixin`.
- Designed to be used with Django's `DeleteView` or similar views.

WithinRoleDeleteView
--------------------

`WithinRoleDeleteView` is a concrete view class that combines `DeleteViewMixin` with additional mixins to support role-based querysets and common Cradmin view functionality:

- Inherits from:
  - `QuerysetForRoleMixin` — to filter the queryset based on the current role.
  - `DeleteViewMixin` — to provide the delete workflow.
  - Django's generic `DeleteView`.
  - `CommonCradminViewMixin` — for common Cradmin view features.
  - `javascriptregistry.viewmixin.WithinRoleViewMixin` — to integrate JavaScript components within the role context.

- Template:  
  Uses the template `django_cradmin/viewhelpers/formview/within_role_delete_view.django.html`, which provides a sane base template for delete views within a Cradmin role.

- Context Data:  
  Extends the context with JavaScript component IDs, common view mixin data, and delete view mixin context data.

Usage notes:

- Import this view via `from django_cradmin import viewhelpers` and refer to it as `viewhelpers.formview.WithinRoleDeleteView`.
- Suitable for applications using Cradmin roles to manage permissions and querysets.

Summary
-------

Together, `DeleteViewMixin` and `WithinRoleDeleteView` implement a robust and user-friendly preview + confirm + delete workflow, including:

- Displaying a preview of the object to be deleted.
- Asking the user to confirm the deletion with a clear message.
- Providing customizable labels and page titles.
- Handling success messages and redirection after deletion.
- Integrating with Cradmin's role-based access control and JavaScript registry.

This setup helps developers quickly add consistent and accessible delete functionality to their Django applications.