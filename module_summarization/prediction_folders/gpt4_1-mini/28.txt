w_multi_west Command
====================

Overview
--------
`w_multi_west` is a command-line tool designed to combine multiple WESTPA simulations while properly accounting for reweighting. This tool facilitates the aggregation of simulation data from multiple runs, enabling comprehensive analysis and comparison.

Features
--------
- Combines multiple WESTPA simulation datasets.
- Supports reweighting of combined data to ensure accurate statistical representation.
- Allows inclusion of additional auxiliary datasets.
- Optionally combines all auxiliary datasets.
- Supports combining of ibstates datasets.
- Provides progress indication during processing.

Usage
-----
```
w_multi_west [OPTIONS]
```

Command-line Options
--------------------

Input/Output Options
~~~~~~~~~~~~~~~~~~~

- `-o`, `--output-file`  
  Specify the name of the output file to store combined results.  
  *Default:* `multi.h5`

- `-W`, `--west`, `--WEST_H5FILE`  
  Specify the name of the main `.h5` file inside each simulation directory.  
  *Default:* `west.h5`

- `-a`, `--aux`  
  Names of additional auxiliary datasets to be combined. Can be specified multiple times.

- `-aa`, `--auxall`  
  Combine all auxiliary datasets.  
  *Default:* False

- `-nr`, `--no-reweight`  
  Disable reweighting of combined data.  
  *Default:* False

- `-ib`, `--ibstates`  
  Attempt to combine `ibstates` dataset.  
  *Default:* False

Description
-----------
The tool reads multiple WESTPA simulation files, extracts relevant data including weights, iterations, and auxiliary datasets, and combines them into a single output file. It handles the complexities of reweighting to ensure that the combined dataset accurately reflects the underlying statistical properties of the individual simulations.

Internally, `w_multi_west` manages progress reporting and supports flexible input configurations, including specifying which auxiliary datasets to include or whether to disable reweighting.

Example
-------
To combine simulations located in directories with their respective `west.h5` files, and output the combined data to `combined.h5`:

```
w_multi_west -o combined.h5 -W west.h5 -a aux_dataset1 -a aux_dataset2
```

To combine all auxiliary datasets and disable reweighting:

```
w_multi_west -o combined.h5 -W west.h5 -aa -nr
```

Notes
-----
- The tool assumes that the `istates` datasets are consistent across the simulations being combined.
- The output file is created with metadata indicating the creating program.
- The tool is part of the WESTPA toolkit and relies on WESTPA's internal data structures and file formats.

Logging and Debugging
---------------------
`w_multi_west` uses Python's logging module to provide debug information, including details about binning data retrieval and processing steps. This can be helpful for troubleshooting and verifying the combination process.

Contact
-------
For more information or support, please refer to the WESTPA documentation or contact the developers.