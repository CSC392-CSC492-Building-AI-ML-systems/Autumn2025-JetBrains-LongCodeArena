Ploterr Command
===============

The `ploterr` command provides tools for plotting expectation and confidence interval (CI) data from HDF5 datasets. It supports flexible plotting options and can generate plots either using Matplotlib or directly in the terminal.

Subcommands
-----------

### generic

The `generic` subcommand plots arbitrary expectation and confidence interval data from an HDF5 file. The user must specify the path to the HDF5 file and the dataset within it, optionally including a slice to select a specific vector of data.

Usage example:

```
ploterr generic FILENAME/PATH[SLICE] -o OUTPUT_FILE
```

- `FILENAME` is the HDF5 file to read.
- `PATH` is the HDF5 path to the dataset.
- `SLICE` (optional) is a NumPy-style slice (including brackets) selecting a vector of data.
- `OUTPUT_FILE` is the filename where the plot will be saved (default: `errbars.pdf`).

If the dataset is not one-dimensional, a slice must be provided to select a 1D vector. For example, to plot the state 0 to state 1 rate evolution calculated by `w_kinavg`, use:

```
kinavg.h5/rate_evolution[:,0,1]
```

Plot Options
------------

The following options control the appearance and scaling of the plot:

- `--xscale {linear,log,symlog}`  
  Set the scaling for the x-axis. Default is `linear`.

- `--yscale {linear,log,symlog}`  
  Set the scaling for the y-axis. Default is `linear`.

- `--xrange XRANGE`  
  Restrict the x-axis range to `XRANGE`, formatted as `xmin,xmax`. By default, the range is determined by the input data.

- `--yrange YRANGE`  
  Restrict the y-axis range to `YRANGE`, formatted as `ymin,ymax`. By default, the range is determined by the input data.

- `--xlabel XLABEL`  
  Set the label for the x-axis. Default is `Iteration`.

- `--ylabel YLABEL`  
  Set the label for the y-axis. Default varies depending on the data.

- `--title TITLE`  
  Set the plot title. Default varies depending on the data.

- `--terminal`, `-t`  
  Plot output in the terminal instead of using Matplotlib. This option is automatically selected if no graphical display is available.

Progress Indicator
------------------

The command includes a progress indicator to provide feedback during data loading and plotting operations.

Data Requirements
-----------------

The dataset to be plotted must be one-dimensional and contain the following fields:

- `iter_start`
- `iter_stop`
- `expected`
- `ci_lbound`
- `ci_ubound`

These fields represent the iteration indices, expected values, and confidence interval bounds, respectively.

Plot Output
-----------

Plots are saved to the specified output file in a format determined by the file extension (e.g., `.pdf`, `.png`). If no output filename is provided, no plot is generated.

Plot Appearance
---------------

The plot displays:

- The expected values as a black line.
- The confidence interval lower and upper bounds as gray lines.
- Axis scaling and ranges as specified by the user.
- Axis labels and title as specified or defaulted.

If plotting in a graphical environment, Matplotlib is used to generate the plot. Otherwise, a text-based plotting interface is used.

Examples
--------

Plot a dataset from `data.h5` located at `/results/values` with default options:

```
ploterr generic data.h5/results/values
```

Plot the same dataset with logarithmic y-axis and custom x-axis range:

```
ploterr generic data.h5/results/values --yscale log --xrange 0,100
```

Save the plot to a PNG file:

```
ploterr generic data.h5/results/values -o plot.png
```

Plot in the terminal (no graphical display):

```
ploterr generic data.h5/results/values -t
```

---

This command is part of the WESTPA toolkit and is designed to facilitate visualization of error bars and confidence intervals in simulation data.