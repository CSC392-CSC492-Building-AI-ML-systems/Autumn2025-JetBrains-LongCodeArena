Configuration
=============

This module provides methods and a container class for managing global ASDF configuration options. It allows users to get and set various configuration parameters that affect the behavior of the ASDF library, including resource mappings, extensions, default versions, and I/O settings.

AsdfConfig Class
---------------

The `AsdfConfig` class is the central container for ASDF configuration options. Users typically do not instantiate this class directly; instead, they use the provided module-level functions to access and modify the global configuration.

### Resource Mappings

- **resource_mappings**  
  Returns the list of registered resource mapping instances. By default, this list includes all mappings registered via entry points.

- **add_resource_mapping(mapping)**  
  Registers a new resource mapping. The new mapping takes precedence over previously registered mappings.  
  *Parameters:*  
  `mapping` : `collections.abc.Mapping`  
  A mapping from resource URI strings to bytes content.

- **remove_resource_mapping(mapping=None, *, package=None)**  
  Removes a registered resource mapping. At least one of `mapping` or `package` must be specified.  
  *Parameters:*  
  `mapping` : `collections.abc.Mapping`, optional  
  The specific mapping to remove.  
  `package` : `str`, optional  
  Remove all mappings provided by the specified package.

- **reset_resources()**  
  Resets the registered resource mappings to the default list provided by entry points.

- **resource_manager**  
  Returns the `ResourceManager` instance that includes resources from all registered resource mappings and any added at runtime.

### Extensions

- **extensions**  
  Returns the list of registered extensions.

- **add_extension(extension)**  
  Registers a new extension, which takes precedence over previously registered extensions.  
  *Parameters:*  
  `extension` : `asdf.extension.AsdfExtension` or `asdf.extension.Extension`

- **remove_extension(extension=None, *, package=None)**  
  Removes a registered extension. At least one of `extension` or `package` must be specified.  
  *Parameters:*  
  `extension` : `asdf.extension.AsdfExtension` or `asdf.extension.Extension` or `str`, optional  
  The extension instance or URI pattern to remove.  
  `package` : `str`, optional  
  Remove all extensions provided by the specified package.

- **reset_extensions()**  
  Resets the extensions to the default list registered via entry points.

### Default Version

- **default_version**  
  Gets or sets the default ASDF Standard version used for new files.  
  *Type:* `str`

### I/O Block Size

- **io_block_size**  
  Gets or sets the block size used when reading and writing files.  
  *Type:* `int`  
  A value of `-1` indicates using the filesystem's preferred block size.

Thread Safety
-------------

The `AsdfConfig` class uses a reentrant lock (`threading.RLock`) to ensure thread-safe access and modification of its internal state.

Usage
-----

Users should access and modify the global ASDF configuration through the provided module-level functions such as `get_config()` and `config_context()`, which internally manage an instance of `AsdfConfig`.

Summary
-------

This configuration system provides flexible and thread-safe management of ASDF global options, including resource mappings, extensions, default ASDF version, and I/O parameters, enabling customization and extension of ASDF behavior in a controlled manner.