Generate Documentation for Simulation Code
===========================================

This module provides utility functions to analyze and visualize experimental plans, particularly those involving motor movements and event generation. The functions operate on plans that yield `Msg` objects, which represent commands to devices.

Functions
---------

plot_raster_path(plan, x_motor, y_motor, ax=None, probe_size=None, lw=2)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Plot the raster path for a given experimental plan.

Parameters
^^^^^^^^^^
- **plan** (iterable): An iterable that yields `Msg` objects. The plan must not be a coroutine.
- **x_motor, y_motor** (str): Names of the motors controlling the x and y axes.
- **ax** (matplotlib.axes.Axes, optional): The matplotlib axes to plot on. If `None`, a new figure and axes are created.
- **probe_size** (float, optional): If provided, used as the radius of the probe in the same units as motor positions.
- **lw** (float, optional): Line width for the path lines.

Returns
^^^^^^^
A dictionary with keys:
- `'path'`: The matplotlib line object representing the path.
- `'events'`: The matplotlib collection or scatter plot of event points.

Description
^^^^^^^^^^^
This function extracts the trajectory of the motors from the plan by tracking 'set' commands for the specified motors and 'save' commands indicating event points. It then plots the path and event points on the given or new axes. If `probe_size` is specified, event points are drawn as circles with the given radius.

summarize_plan(plan)
~~~~~~~~~~~~~~~~~~~~

Print a summary of the experimental plan.

Parameters
^^^^^^^^^^
- **plan** (iterable): An iterable yielding `Msg` objects.

Description
^^^^^^^^^^^
Prints a minimal summary of the plan, showing only motor moves and event creation points. This is useful for quickly understanding the structure of a plan without executing it.

Note
^^^^
`summarize_plan` is also available under the alias `print_summary` for backward compatibility.

check_limits(plan)
~~~~~~~~~~~~~~~~~~

Check that the plan does not move devices outside their allowed limits.

Parameters
^^^^^^^^^^
- **plan** (iterable): An iterable yielding `Msg` objects.

Description
^^^^^^^^^^^
Iterates through the plan and checks if any 'set' command attempts to move a device beyond its limits by calling the device's `check_value` method. If a device does not have a `check_value` method, a warning is issued, and the device is ignored for subsequent checks.

Warnings
^^^^^^^^
If a device lacks the `check_value` method, a warning is emitted indicating that limit checking cannot be performed for that device.

Usage Notes
-----------

- All functions expect the plan to yield `Msg` objects, which encapsulate commands to devices.
- The plotting function requires `matplotlib` to be installed.
- The limit checking function relies on devices implementing a `check_value` method to validate positions.

This module is useful for pre-execution analysis and visualization of experimental plans in scientific instrumentation and control workflows.