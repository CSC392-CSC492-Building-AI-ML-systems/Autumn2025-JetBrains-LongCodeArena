Connecting Steps Together
=========================

In a typical workflow, multiple steps are connected to form a directed graph where the output of one step serves as the input to another. This section explains how to connect steps together using the provided API.

Step Handles
------------

Each step defines a set of inputs and outputs, which can be accessed via handles. A handle is a tuple identifying a particular input or output of a step, and it is used to establish connections between steps.

To obtain handles for inputs and outputs, use the following methods on a `Step` instance:

- `get_input_handle(f)`: Returns a handle for the input named `f`.
- `get_output_handle(f)`: Returns a handle for the output named `f`.

For convenience, shorthand methods are also available:

- `i(name)`: Equivalent to `get_input_handle(name)`.
- `o(name)`: Equivalent to `get_output_handle(name)`.

You can also retrieve all input or output handles at once:

- `all_input_handles()`: Returns a list of all input handles.
- `all_output_handles()`: Returns a list of all output handles.

Example:

```python
step1 = Step('path/to/step1')
step2 = Step('path/to/step2')

output_handle = step1.o('result_file')
input_handle = step2.i('input_file')
```

Connecting Steps
----------------

Connections between steps are represented by `Edge` objects, which link a source handle to a destination handle.

An `Edge` is created as follows:

```python
edge = Edge(src_handle, dst_handle)
```

Where `src_handle` and `dst_handle` are handles obtained from the respective steps.

The `Edge` class provides methods to access the source and destination handles:

- `get_src()`: Returns the source handle.
- `get_dst()`: Returns the destination handle.

By connecting the output handle of one step to the input handle of another, you define the data flow and dependencies between steps in the workflow.

Example:

```python
edge = Edge(step1.o('result_file'), step2.i('input_file'))
```

This connection indicates that the output `result_file` from `step1` is used as the input `input_file` for `step2`.

Extending Inputs and Outputs
----------------------------

Steps can be dynamically extended with additional inputs and outputs using the following methods:

- `extend_inputs(new_list)`: Adds new input names to the step.
- `extend_outputs(new_list)`: Adds new output names to the step.

This flexibility allows for modifying step interfaces as needed when constructing complex workflows.

Summary
-------

- Use `Step` methods to get input and output handles.
- Create `Edge` objects to connect outputs to inputs between steps.
- Extend step inputs and outputs dynamically if necessary.

By leveraging these APIs, you can build and manage complex workflows by connecting individual steps in a clear and structured manner.