Partial Dependence and Individual Conditional Expectation Plots
================================================================

Overview
--------

Partial Dependence (PD) and Individual Conditional Expectation (ICE) plots are powerful tools for interpreting machine learning models. They help visualize the relationship between the target response and a set of input features, marginalizing over the values of all other features.

Partial Dependence Plots
------------------------

Partial Dependence plots show the average effect of one or two features on the predicted outcome of a model. By marginalizing over the distribution of the other features, PD plots provide insight into how the target response changes as a function of the selected features.

Key characteristics of Partial Dependence plots:

- They display the marginal effect of features on the prediction.
- Useful for understanding global model behavior.
- Can be computed for one or two features at a time.
- Provide a smoothed average effect, which may mask heterogeneity in the data.

Individual Conditional Expectation Plots
----------------------------------------

Individual Conditional Expectation plots complement Partial Dependence plots by showing the dependence of the prediction on a feature for individual instances rather than averaging over the dataset.

Key characteristics of ICE plots:

- Display one curve per instance, showing how the prediction changes as the feature varies.
- Reveal heterogeneity in the feature effect across instances.
- Useful for detecting interactions and non-linearities that PD plots may obscure.
- Can be aggregated to approximate the Partial Dependence plot.

Usage
-----

Both PD and ICE plots require a fitted estimator and a dataset to evaluate the model predictions. The features of interest can be specified by name or index. Feature names are validated and checked for duplicates to ensure correct mapping.

The plots are typically generated by:

1. Selecting the feature(s) for which the dependence is to be analyzed.
2. Varying the feature(s) over a grid of values.
3. Computing the model predictions for each value while holding other features fixed or marginalized.
4. Aggregating predictions to obtain the partial dependence or plotting individual predictions for ICE.

Interpretation
--------------

- **Partial Dependence plots** provide a global summary of the modelâ€™s behavior with respect to the selected features.
- **ICE plots** provide a local view, showing how individual predictions change, which can highlight interactions and heterogeneity.
- Comparing PD and ICE plots can help identify whether the average effect is representative of all instances or if there are subgroups with different behaviors.

Limitations
-----------

- Partial Dependence assumes feature independence, which may not hold in practice, potentially leading to misleading interpretations.
- ICE plots can be noisy and harder to interpret when the number of instances is large.
- Both methods can be computationally expensive for large datasets or complex models.

Conclusion
----------

Partial Dependence and Individual Conditional Expectation plots are essential tools for model interpretability, providing complementary views of feature effects. They help practitioners understand and trust their models by visualizing how features influence predictions both on average and at the individual level.