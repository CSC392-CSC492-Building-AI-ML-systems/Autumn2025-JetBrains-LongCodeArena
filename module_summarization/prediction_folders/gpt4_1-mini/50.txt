Generate Example for gam Module
===============================

This example demonstrates how to generate and work with spline bases and smoothers for Generalized Additive Models (GAM) using the functions and classes provided in the `gam` module.

Overview
--------

The `gam` module provides tools to create spline bases, particularly B-splines, which are commonly used as smoothers in GAMs. It includes functions to compute knots, evaluate B-spline basis functions, and generate spline bases with derivatives.

Key Functions
-------------

- **_equally_spaced_knots(x, df)**  
  Generates equally spaced knots over the range of the data `x` for a given degrees of freedom `df`.

- **_R_compat_quantile(x, probs)**  
  Computes quantiles of the data `x` compatible with R's quantile function, for given probabilities `probs`.

- **_eval_bspline_basis(x, knots, degree, deriv='all', include_intercept=True)**  
  Evaluates the B-spline basis functions at points `x` given the `knots` and spline `degree`.  
  Returns the basis matrix and optionally its first and second derivatives.

- **compute_all_knots(x, df, degree)**  
  Computes all knots needed for B-spline basis construction, including boundary knots with multiplicity.

- **make_bsplines_basis(x, df, degree)**  
  Creates the B-spline basis and its derivatives for data `x` with specified degrees of freedom `df` and spline degree.

Example Usage
-------------

```python
import numpy as np
import matplotlib.pyplot as plt
from gam import make_bsplines_basis

# Generate sample data
x = np.linspace(0, 10, 100)

# Define degrees of freedom and spline degree
df = 10
degree = 3

# Create B-spline basis and derivatives
basis, der_basis, der2_basis = make_bsplines_basis(x, df, degree)

# Plot the B-spline basis functions
plt.figure(figsize=(10, 6))
for i in range(basis.shape[1]):
    plt.plot(x, basis[:, i], label=f'Basis {i+1}')
plt.title('B-spline Basis Functions')
plt.xlabel('x')
plt.ylabel('Basis value')
plt.legend()
plt.show()
```

This example generates a set of B-spline basis functions for the input data `x` and plots them. These basis functions can then be used as smooth terms in a GAM.

Notes
-----

- The spline degree is typically 3 (cubic splines), but can be adjusted as needed.
- The number of knots and their placement significantly affect the smoothness and flexibility of the spline.
- The module also supports cyclic cubic splines and other smoothers, which can be explored for specialized modeling needs.
- The code requires `scipy` for spline evaluation and `patsy` for design matrix construction.

Authors
-------

- Luca Puggini  
- Josef Perktold

Created on June 5, 2015