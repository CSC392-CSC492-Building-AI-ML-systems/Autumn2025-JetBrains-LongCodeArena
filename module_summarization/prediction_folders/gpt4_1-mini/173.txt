SESANS Data Fitting
===================

This document provides an overview of fitting Spin-Echo Small Angle Neutron Scattering (SESANS) data using available models and parameters.

Introduction
------------

SESANS is a powerful technique for probing the structure of materials at the nanoscale by measuring the spin-echo polarization as a function of spin-echo length. Fitting SESANS data involves selecting appropriate models that describe the sample's structure and extracting parameters that characterize it.

Model Parameters
----------------

Each SESANS model is defined by a set of parameters that describe physical properties such as particle size, shape, orientation, and scattering length density (SLD). These parameters are essential for fitting the experimental data accurately.

The parameters used in SESANS models can be categorized by their type, including:

- **Volume parameters**: Describe the size or volume-related aspects of the scatterers.
- **Orientation parameters**: Define the orientation distribution of anisotropic particles.
- **SLD parameters**: Represent the scattering length density contrast between phases.
- **Other parameters**: Additional model-specific parameters.

Listing Parameters
------------------

To facilitate fitting, it is useful to list all available parameters and the models that use them. This can be done programmatically, allowing users to identify which parameters are relevant for their data and which models incorporate them.

Usage example for listing parameters:

```bash
python -m sasmodels.list_pars [-v] [kind]
```

- The `-v` or `--verbose` flag lists the models that use each parameter.
- The optional `kind` argument filters parameters by type (`volume`, `orientation`, `sld`, `none`, or `any`).

For example, to list all volume-related parameters and the models that use them:

```bash
python -m sasmodels.list_pars -v volume
```

Fitting Procedure
-----------------

1. **Select a Model**: Choose a SESANS model that best represents the expected structure of your sample.

2. **Identify Parameters**: Use the parameter listing to understand which parameters are involved in the model.

3. **Prepare Data**: Ensure your SESANS data is properly formatted and pre-processed.

4. **Perform Fit**: Use fitting software or scripts that implement the SESANS models to fit the data by adjusting the model parameters.

5. **Analyze Results**: Evaluate the fitted parameters for physical consistency and goodness of fit.

Mathematical Functions
----------------------

Some SESANS models require advanced mathematical functions such as elliptic integrals and Jacobi elliptic functions. These are used to describe complex geometries and correlations in the sample.

The implementation includes:

- Calculation of Jacobi elliptic functions `sn`, `cn`, and `dn`.
- Use of incomplete elliptic integrals of the first kind.
- Handling of complex arguments for these functions.

These functions are essential for accurate modeling of SESANS data involving anisotropic or complex particle shapes.

Conclusion
----------

Fitting SESANS data requires a good understanding of the models and their parameters. The ability to list and explore parameters across models aids in selecting the appropriate model and interpreting the results. Advanced mathematical functions underpin many SESANS models, enabling detailed structural characterization of materials.

For further details on specific models and fitting routines, consult the relevant model documentation and fitting software manuals.