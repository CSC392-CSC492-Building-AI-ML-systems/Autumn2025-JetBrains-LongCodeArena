Using Metadata
==============

The `metadata` module provides functionality to manage and interact with metadata associated with entities in the ftrack API. Metadata allows you to store additional information on entities in a structured and flexible way.

Key Concepts
------------

- **Metadata Storage**: Metadata is stored as key-value pairs on entities. This allows you to attach custom data to entities without modifying their core attributes.
- **Isolation**: Metadata is isolated per entity, ensuring that data is relevant and specific to the entity it is attached to.
- **Flexibility**: You can store any JSON-serializable data as metadata, enabling a wide range of use cases.

Using Metadata
--------------

To use metadata in your ftrack session, you typically interact with the `metadata` attribute available on entities. This attribute behaves like a dictionary, allowing you to get, set, and delete metadata entries.

Example usage:

```python
# Assume 'session' is an active ftrack_api.Session instance
# and 'entity' is an ftrack entity, e.g., a task or asset.

# Access metadata dictionary
metadata = entity.metadata

# Set metadata key-value pair
metadata['review_status'] = 'approved'

# Retrieve metadata value
status = metadata.get('review_status')

# Delete metadata key
del metadata['review_status']
```

Metadata is automatically synchronized with the server when the entity is saved, ensuring that your changes are persisted.

Best Practices
--------------

- Use clear and descriptive keys for metadata entries to avoid conflicts and improve readability.
- Store only JSON-serializable data types (e.g., strings, numbers, lists, dictionaries).
- Avoid storing large binary data directly in metadata; instead, use references or external storage.
- Use metadata to extend entity information without altering the core schema, maintaining compatibility with other tools and integrations.

Advanced Usage
--------------

- Metadata can be used to implement custom workflows by storing state information or flags.
- Combine metadata with event subscriptions to trigger actions based on metadata changes.
- Use metadata to store user preferences or UI state related to specific entities.

Summary
-------

Metadata in ftrack API provides a powerful and flexible way to extend entities with custom data. By leveraging metadata, you can tailor the ftrack environment to better fit your project requirements and workflows without compromising the integrity of the core data model.