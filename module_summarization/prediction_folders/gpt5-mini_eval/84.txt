piccolo_apps module
===================

Overview
--------
Utilities and types for registering and discovering Piccolo applications, their
tables, migrations and CLI commands. This module provides helpers for:

- Finding Table subclasses in one or more modules.
- Representing migration modules and Piccolo app modules.
- Describing app configuration (AppConfig) including migration dependencies,
  registered table classes and CLI commands.
- A simple AppRegistry to record apps configured for the project.

MigrationModule
---------------
A lightweight ModuleType intended to represent a migration module.

Attributes
- ID: str
- VERSION: str
- DESCRIPTION: str

Methods
- async forwards() -> None
  - Placeholder signature for migration forward operations.

PiccoloAppModule
----------------
A ModuleType wrapper for a Piccolo application module.

Attributes
- APP_CONFIG: AppConfig
  - The AppConfig instance defined by the module (typically in piccolo_app.py).

table_finder
------------
Discover and import Table subclasses from one or more modules.

Signature
    table_finder(
        modules: Sequence[str],
        include_tags: Sequence[str] = None,
        exclude_tags: Sequence[str] = None,
        exclude_imported: bool = False,
    ) -> List[Type[Table]]

Description
- Imports each module named in `modules`, inspects exported names and collects
  subclasses of piccolo.table.Table (excluding the base Table itself).
- Filtering:
  - include_tags: a sequence of tags. If it contains "__all__", all discovered
    Table subclasses are included (unless excluded). Default: ["__all__"].
  - exclude_tags: if a Table's _meta.tags intersects with exclude_tags, that
    Table is skipped (exclusion takes precedence).
  - exclude_imported: if True, only Table subclasses whose __module__ exactly
    matches the inspected module path are included (ignores tables imported
    into the module from elsewhere).

Returns
- A list of Table subclasses found according to the provided filters.

Example
.. code-block:: python

    from piccolo.apps.piccolo_apps import table_finder
    tables = table_finder(["blog.tables"], include_tags=["public"])

Command
-------
Dataclass representing a CLI command associated with an app.

Fields
- callable: Callable
  - The function or coroutine implementing the command.
- aliases: List[str]
  - Optional aliases for the command (defaults to empty list).

AppConfig
---------
Dataclass that describes a Piccolo application configuration. Typically an
AppConfig instance is created in an app's piccolo_app.py and exposed to the
project via the module's APP_CONFIG attribute.

Fields
- app_name: str
  - Name of the app (e.g. "article").
- migrations_folder_path: str
  - Filesystem path to the folder containing migration modules for the app.
- table_classes: List[Type[Table]]
  - Registered Table subclasses for the app (used by auto-migrations).
- migration_dependencies: List[str]
  - Module paths of other Piccolo app modules whose migrations must run
    before this app's migrations.
- commands: List[Union[Callable, Command]]
  - Functions or Command objects registered with the Piccolo CLI.

Behavior and Methods
- __post_init__()
  - Normalizes `commands` into Command instances and converts Path-like
    `migrations_folder_path` into a string. Initialises an internal cache for
    resolved migration dependency AppConfig instances.
- register_table(table_class: Type[Table]) -> Type[Table]
  - Append a Table subclass to `table_classes` and return the class (decorator
    friendly).
- migration_dependency_app_configs -> List[AppConfig]
  - Lazy-resolves and returns AppConfig instances for each entry in
    `migration_dependencies` by importing the module and reading its
    APP_CONFIG. The result is cached for subsequent accesses.
- get_table_with_name(table_class_name: str) -> Type[Table]
  - Return the registered Table subclass with the given class name. Raises
    ValueError if not found.

Example
.. code-block:: python

    from piccolo.apps.piccolo_apps import AppConfig
    from pathlib import Path

    APP_CONFIG = AppConfig(
        app_name="blog",
        migrations_folder_path=Path("./blog/migrations"),
        table_classes=[],
        migration_dependencies=["piccolo.apps.user.piccolo_conf"],
    )

AppRegistry
-----------
Records and exposes the Piccolo applications configured for the project.
Typically an instance is created and populated in piccolo_conf.py.

Constructor
- __init__(apps: List[str] = None)
  - `apps` is a list of module paths to Piccolo apps (e.g. ["blog.piccolo_app"]).
  - The registry stores the list of app paths and (when available) their
    AppConfig objects.

Notes
-----
- table_finder is intended as a convenience to avoid manual registration of
  Table subclasses in an AppConfig; it imports tables dynamically and returns
  the classes for registration.
- AppConfig.migration_dependency_app_configs imports dependent modules at
  runtime; ensure those modules are importable from the project root.

See also
- piccolo.table.Table for details on Table subclasses and their _meta.tags.
- piccolo.apps.[your_app].piccolo_app for examples of AppConfig usage.