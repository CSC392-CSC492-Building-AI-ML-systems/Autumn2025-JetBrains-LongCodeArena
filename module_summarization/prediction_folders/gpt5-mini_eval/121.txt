Create Cradmin menu system
=========================

Overview
--------
The Cradmin menu system provides a set of reusable renderable components for building the header/navigation menu used by Cradmin-based apps. The system is based on small renderable classes (menu links, separators, toggles, expandable menu items) that produce HTML using templates and follow BEM naming conventions for styling.

Default expandable menu
-----------------------
To allow apps to provide a custom expandable menu renderable, Cradmin reads the
``DJANGO_CRADMIN_DEFAULT_EXPANDABLE_MENU_CLASS`` setting. The helper function
``get_default_expandable_menu_renderable(request=<Request>, **kwargs)`` will import
and instantiate the class configured in that setting (or return ``None`` if the
setting is not defined).

Building blocks
---------------
All renderables in the menu system inherit Cradmin's renderable base classes and expose template names and BEM helpers.

Common behaviour (link-like renderables)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
BaseMenuLinkRenderable
  - template_name: ``django_cradmin/crmenu/menuitem/link.django.html``
  - Constructor: ``__init__(label, url, is_active=False, bem_variant_list=None, parent_bem_block=None, **kwargs)``
  - Purpose: base for items that render an anchor-like link in a menu.
  - Attributes:
    - ``label``: displayed text
    - ``url``: link URL
    - ``is_active``: mark item as active (adds the active BEM modifier)
    - ``parent_bem_block``: override parent BEM block for element/class generation
  - BEM helpers:
    - ``get_fallback_parent_bem_block()``: default block name (``adminui-page-header``)
    - ``get_parent_bem_block()``: returns explicit or fallback block
    - ``get_bem_element()``: element name for the link (``<block>__navlink`` by default)
    - ``get_active_bem_variant_list()``: list of variants applied when active (``['active']``)
    - ``get_bem_variant_list()``: combines provided variants and active variants

Provided link types
~~~~~~~~~~~~~~~~~~~
NavLinkItemRenderable
  - Simple main-menu link. Inherits BaseMenuLinkRenderable.

NavLinkButtonItemRenderable
  - Link styled as a button.
  - Overrides ``get_bem_variant_list()`` to include the ``button`` variant.

Expandable menu items
~~~~~~~~~~~~~~~~~~~~~
ExpandableMenuItem
  - template_name: ``django_cradmin/crmenu/menuitem/expandable-menu-item.django.html``
  - Intended for items inside an expandable dropdown/list.
  - Changes fallback BEM block to ``expandable-menu`` and element names:
    - ``get_bem_element()`` -> ``<block>__link``
    - ``get_list_element_bem_element()`` -> ``<block>__listitem``

ExpandableMenuSeparator
  - template_name: ``django_cradmin/crmenu/menuitem/expandable-menu-separator.django.html``
  - Simple separator renderable used inside expandable menus.
  - BEM element: ``<block>__separator`` (fallback block ``expandable-menu``)

Menu toggle
~~~~~~~~~~~
MenuToggleItemItemRenderable
  - template_name: ``django_cradmin/crmenu/menuitem/menutoggle.django.html``
  - Renders the "Menu" toggle used to open the expandable menu on smaller screens.
  - Methods of interest:
    - ``get_label()``: returns a translatable default label (pgettext_lazy label "Menu")
    - BEM helpers similar to BaseMenuLinkRenderable with fallback block ``adminui-page-header``
    - CSS class helpers: ``get_label_css_class()``, ``get_icon_css_class()``

Abstract menu container
-----------------------
AbstractMenuRenderable
  - Base class for menus. Inherits renderable utilities and manages a list of child renderables.
  - Constructor: ``__init__(request, cradmin_instance=None)``
  - Attributes:
    - ``request``: current request object
    - ``cradmin_instance``: optional Cradmin instance reference
    - ``renderable_list``: list holding child renderables (menu items)
    - Class configuration attributes:
      - ``link_renderable_class``: default class used to create link renderables
      - ``separator_renderable_class``: default class used to create separators
      - ``button_renderable_class``: default class used to create button links
  - Key methods:
    - ``iter_renderables()``: iterate over ``renderable_list`` for template rendering
    - ``get_link_renderable_class()``: return configured ``link_renderable_class`` or raise ``ValueError`` if not set
    - ``get_separator_renderable_class()``: analogous accessor for separators (raises if not configured)
  - Extending:
    - Subclass and set the appropriate ``*_renderable_class`` attributes or override the accessor methods.
    - Populate ``self.renderable_list`` with instances of the provided renderable classes (e.g. instances of ``NavLinkItemRenderable``, ``ExpandableMenuItem``, ``ExpandableMenuSeparator``, ``MenuToggleItemItemRenderable`` or your own subclasses).
    - Alternatively provide a custom template (via renderable template lookup) to fully control the menu HTML.

Templates and BEM
-----------------
Each renderable specifies a template name (see the ``template_name`` attributes). Rendered markup follows BEM conventions. Renderables provide helper methods that return the parent BEM block and element names; these should be used by templates to ensure consistent CSS class naming and modifier application (for example ``__navlink``, ``__link``, ``__separator``, and modifier variants like ``--active`` / variant lists).

Example (conceptual)
--------------------
- Subclass ``AbstractMenuRenderable`` or instantiate it (with request).
- Set or rely on the provided link/separator classes.
- Append items to ``renderable_list``:

  - Add a primary link:
    - ``NavLinkItemRenderable(label='Home', url=..., is_active=True)``
  - Add a button-style link:
    - ``NavLinkButtonItemRenderable(label='Create', url=..., is_active=False)``
  - Add an expandable menu and items inside it (use ``ExpandableMenuItem`` and ``ExpandableMenuSeparator``).
  - Add the toggle item for smaller screens:
    - ``MenuToggleItemItemRenderable()``

Notes
-----
- The concrete HTML output depends on the templates located under
  ``django_cradmin/crmenu/menuitem/*.django.html``. Inspect or override these templates to fully control markup.
- Use the setting ``DJANGO_CRADMIN_DEFAULT_EXPANDABLE_MENU_CLASS`` to point to a custom expandable menu renderable class when you want to swap the default expandable menu used by Cradmin.

API Reference (classes)
-----------------------
- get_default_expandable_menu_renderable(**kwargs)
- BaseMenuLinkRenderable
- NavLinkItemRenderable
- NavLinkButtonItemRenderable
- ExpandableMenuItem
- ExpandableMenuSeparator
- MenuToggleItemItemRenderable
- AbstractMenuRenderable

(See code for argument details and small helper methods like ``get_bem_element()``, ``get_parent_bem_block()``, ``get_bem_variant_list()``, and others.)