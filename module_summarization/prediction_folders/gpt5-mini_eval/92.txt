Generate documentation for this module
====================================

Module summary
--------------
Utilities used by the build/configuration system. Provides small helpers
for temporary-directory management, path manipulation, and build-parallelism
detection, plus a small container type for representing an installable
library.

Module contents
---------------
Public names (excerpt)
: __all__
: InstallableLib
: get_num_build_jobs
: quote_args
: allpath
: rel_path
: get_path_from_frame
: njoin
: clean_up_temporary_directory
: _tdata, _tmpdirs

Module behavior
---------------
- Temporary directories: this module keeps per-thread temporary-directory
  state in the thread-local _tdata and a global list _tmpdirs of created
  temporary directories. clean_up_temporary_directory() removes all
  directories recorded in _tmpdirs; it is registered with atexit so cleanup
  runs automatically on interpreter exit.

Classes
-------
InstallableLib(name, build_info, target_dir)
    Container for information about an installable library.

    Parameters
    ----------
    name : str
        Name of the installed library.
    build_info : dict
        Dictionary holding build information (compile/link flags, sources,
        etc.).
    target_dir : str
        Absolute path specifying where to install the library.

    Attributes
    ----------
    name
        Same as the constructor `name`.
    build_info
        Same as the constructor `build_info`.
    target_dir
        Same as the constructor `target_dir`.

Functions
---------
get_num_build_jobs()
    Determine how many parallel build jobs should be used.

    Behavior
    • Considers the environment variable NPY_NUM_BUILD_JOBS (falls back to
      the number of CPUs, capped at 8).
    • If a NumPy distribution object is available (numpy.distutils.core.get_distribution()),
      it also checks the 'parallel' attribute on the 'build', 'build_ext',
      and 'build_clib' command objects and returns the maximum value found.
    • Returns the environment/CPU-derived value if no distribution or no
      parallel attributes are present.

    Returns
    -------
    int
        Number of parallel jobs to use.

quote_args(args)
    Quote items in a list of command-line arguments.

    Notes
    -----
    This function is deprecated (raises a DeprecationWarning). It attempts
    to add double quotes around argument strings that contain spaces and
    that do not already start with a quote character.

    Parameters
    ----------
    args : iterable of str
        Argument strings.

    Returns
    -------
    list of str
        Quoted argument list.

allpath(name)
    Convert a forward-slash (/) separated pathname into an OS-native path.

    Parameters
    ----------
    name : str
        Path with components separated by '/'.

    Returns
    -------
    str
        Path joined using os.path.join with platform-specific separators.

rel_path(path, parent_path)
    Return path relative to parent_path.

    Behavior
    • Uses os.path.abspath and os.path.realpath to avoid symlink issues.
    • If the given path is exactly parent_path, returns the empty string.
    • If path is not under parent_path, returns the original path unchanged.

    Parameters
    ----------
    path : str
        Path to be relativized.
    parent_path : str
        Parent path used as the base for the relative result.

    Returns
    -------
    str
        Path relative to parent_path, the empty string if equal, or the
        original path if it cannot be expressed relative to parent_path.

get_path_from_frame(frame, parent_path=None)
    Return the directory path of the module from a frame object.

    Behavior
    • Attempts to obtain the module filename from the frame by evaluating
      '__file__' in the frame namespace. If not present, it falls back to
      evaluating '__name__' and importing the module from sys.modules.
    • If the module file cannot be found, uses the current directory.
    • If parent_path is provided, returns the result relative to parent_path
      (using rel_path).

    Parameters
    ----------
    frame : frame object
        Frame from which to extract the module path (as obtained from the
        Python call stack).
    parent_path : str, optional
        When given, returned path is made relative to this parent.

    Returns
    -------
    str
        Directory path for the module (relative to parent_path if requested);
        returns '.' if no path can be determined.

njoin(*path)
    Join multiple path components, accepting nested sequences or multiple
    string arguments.

    Behavior
    • Accepts either multiple string arguments, a single sequence of names,
      or a mixture; recursively flattens nested sequences.
    • Converts any '/'-separated components into OS-native components.
    • Resolves '.' and '..' components in the resulting path.

    Parameters
    ----------
    *path : str or sequence
        One or more path components or sequences of components.

    Returns
    -------
    str
        Joined, normalized path (empty string if called with no arguments).

Module-level cleanup
--------------------
clean_up_temporary_directory()
    Remove all temporary directories recorded in the module-level list
    _tmpdirs. Registered with atexit to perform automatic cleanup on
    process exit. Errors while removing directories are ignored.

Notes and compatibility
-----------------------
- quote_args is deprecated and emits a DeprecationWarning when used.
- get_num_build_jobs queries numpy.distutils for command-line overrides if
  a distribution object is present; when run outside a packaging context,
  it falls back to environment variables and CPU count.
- The functions rely on os.path.realpath/abspath to reduce surprises caused
  by symbolic links and differing working directories.

Examples
--------
- Determine build parallelism:
  >>> jobs = get_num_build_jobs()

- Convert a Unix-style path to platform form:
  >>> allpath("dir/subdir/file.txt")

- Compute path of caller module inside another module by inspecting a frame:
  >>> import inspect
  >>> frame = inspect.currentframe()
  >>> get_path_from_frame(frame, parent_path="/home/user/project")