Miscellaneous models — Student-t error models
============================================

Module overview
---------------
This module implements two small example models that replace the usual
Gaussian errors with Student-t distributed errors:

- TLinearModel — a linear regression model with Student-t errors (example of
  using GenericLikelihoodModel).
- TArma — a univariate ARMA model that uses Student-t errors (subclass of
  statsmodels.tsa.arma_mle.Arma).

The Student-t distribution has heavier tails than the normal; using it can
produce estimators that are more robust to outliers. The implementation here
uses the standard (non-standardized) t distribution: the scale parameter is
not equal to the standard deviation. For df > 2 the error variance implied by
the model is df/(df-2) * scale**2.

References
----------
Kenneth L. Lange, Roderick J. A. Little, Jeremy M. G. Taylor (1989).
Robust Statistical Modeling Using the t Distribution. Journal of the American
Statistical Association, Vol. 84, No. 408, pp. 881–896.

Author and license
------------------
Author: josef-pktd (module header)
License: BSD

Notes and caveats
-----------------
- Gradients, Hessians and inference are based on numerical derivatives provided
  by the GenericLikelihoodModel framework (no analytic derivatives supplied).
- The t-distribution used is the standard t; thus the scale parameter must be
  interpreted accordingly and is constrained to be non-negative in the code
  (absolute value is used).
- The models support fixing the degrees-of-freedom parameter (fix_df). When
  fix_df is set, df is not estimated and parameter expansion/masking is used.
- Some helper/fit methods (e.g. fit_mle in TArma) are partially implemented in
  the source; consider this module example code rather than a full production
  implementation.

Classes
-------

TLinearModel
^^^^^^^^^^^^
Maximum Likelihood linear regression with Student-t distributed errors.

Key behavior
- Inherits from statsmodels.base.model.GenericLikelihoodModel.
- Parameters vector layout:
  - first k coefficients correspond to regression betas,
  - last one or two parameters contain ancillary parameters: degrees of
    freedom (df) and scale. If fix_df is provided, df can be fixed and only
    scale is estimated.
- Methods of interest:
  - initialize(): sets up parameter counts and start parameters; handles
    fix_df.
  - _set_start_params(start_params=None, use_kurtosis=False): default start
    uses OLS coefficients; default df start = 5 (or estimated from residual
    kurtosis when use_kurtosis is True); scale start uses sqrt(OLS scale).
  - loglike(params): full log-likelihood (sum over observations).
  - nloglikeobs(params): negative log-likelihood per observation; this is the
    function used by GenericLikelihoodModel for numerical derivatives.
  - predict(params, exog=None): returns exog * beta (ignores df/scale).

Important details
- The t log pdf implementation follows scipy.special gammaln and uses the
  standard t parametrization; the code applies a -log(scale) correction for
  the scale parameter.
- When fixing parameters, expandparams and fixed_paramsmask are used to map
  free parameters to the full parameter vector.

TArma
^^^^^
Univariate ARMA model with Student-t distributed innovations.

Key behavior
- Subclasses statsmodels.tsa.arma_mle.Arma and reuses most ARMA functionality.
- Expects the params vector to include the usual ARMA parameters followed by
  df and scale (two last elements).
- Methods of interest:
  - nloglikeobs(params): negative log-likelihood per observation computed
    from innovation residuals (obtained via geterrors(params[:-2])) using the
    t-distribution; includes the Jacobian correction from scale.
  - loglike(params): sums the per-observation negative log-likelihoods.
  - fit_mle(...): present in source but not fully shown/finished in the
    example code; treat as illustrative.

Important details
- The implied error variance for the standard t with scale parameter s is
  df/(df-2) * s**2 (for df > 2).
- The model currently uses the standard t (not a variance-standardized t).
- Numerical differentiation is used for inference; no analytic gradients/Hessians
  are provided in the example.

Minimal usage sketch
--------------------
(The following sketches reflect the intended usage pattern for the classes.)

- TLinearModel:
  - Instantiate with endog and exog arrays (optionally pass fix_df to fix
    degrees of freedom).
  - Use model.fit(...) (GenericLikelihoodModel.fit) with an appropriate
    optimizer and start_params if desired.
  - Access results and prediction via the fitted parameters.

- TArma:
  - Instantiate supplying the ARMA order and data as per statsmodels.tsa.Arma
    conventions, then fit via the provided fit routine (note: fit_mle in the
    example may be incomplete).

TODO and development notes
--------------------------
- Add robust OLS-based starting values and improved automatic scaling for
  different df.
- Review and complete parameter fixing/expansion logic and any remaining
  debugging code left in the example.
- Consider replacing the standard t with a standardized t (so scale
  corresponds to standard deviation) or otherwise document scale usage
  clearly in user-facing APIs.