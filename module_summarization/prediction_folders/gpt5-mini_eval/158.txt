Migrating to nextcord
=====================

Overview
--------
nextcord is a maintained fork of discord.py intended to be a mostly drop-in replacement. The primary change when migrating is the package name: imports that used `discord` and its subpackages should be updated to `nextcord`. A few Discord API/Discord client behaviors require additional changes (notably intents and message content access). This guide summarizes the most common changes and pitfalls.

Installation
------------
- Install or upgrade nextcord:
  pip install -U nextcord

Basic change: imports
---------------------
Replace top-level imports from discord to nextcord. Example:

Old (discord.py)
    import discord
    from discord.ext import commands

New (nextcord)
    import nextcord
    from nextcord.ext import commands

All submodules follow the same rename (e.g. `discord.utils` -> `nextcord.utils`, `discord.activity` -> `nextcord.activity`, etc.).

Client / Bot initialization and intents
---------------------------------------
Discord now requires explicit intents for certain events. Construct and pass intents to your Bot/Client:

Old (may be missing intents)
    bot = commands.Bot(command_prefix="!")

New (nextcord)
    intents = nextcord.Intents.default()
    intents.members = True          # privileged: requires enabling in Developer Portal
    intents.message_content = True  # if you need message content (privileged after certain dates)
    bot = commands.Bot(command_prefix="!", intents=intents)

- Enable privileged intents (members, presence, message content when applicable) in the Discord Developer Portal for your application if you set them to True.
- Without the correct intents, events like on_member_join, presence updates, and reading message content may not fire or will be empty.

Message content intent
----------------------
If your bot reads message content (e.g. to parse non-command messages), you must enable the message content intent:
- Set `intents.message_content = True` in code.
- Enable Message Content Intent on the bot's page in the Developer Portal.

Events and event signatures
---------------------------
Event names and signatures remain largely the same. Ensure you have the required intents; lack of events is usually an intents issue, not a rename.

Interactions (slash commands) and application commands
-----------------------------------------------------
nextcord supports interactions and application (slash) commands. If you used third-party wrappers previously, consider migrating to nextcord's built-in application command support. Registration and ephemeral responses behave according to Discord's API; consult nextcord’s documentation for details.

Data models, helpers and utility functions
-----------------------------------------
Most models (Client, Bot, Member, User, Guild, Channel, etc.) and utilities are preserved with the new package name. Common helpers such as snowflake -> creation time utilities and activity helpers exist under `nextcord.utils` and related modules.

Example: widget-related partial objects
- nextcord provides partial/utility classes for certain endpoints, such as widget representations. These include:
  - WidgetChannel: has id, name, position, mention property (`f'<#{id}>'`) and created_at that uses snowflake time.
  - WidgetMember: partial member with attributes like id, name, discriminator, bot, status (enum), nick, avatar, activity (BaseActivity or Spotify), deafened, muted, suppress, connected_channel, and display_name property (`nick or name`).
  - Widget: represents guild widget data (id, name, channels, members).
- These classes behave like their discord.py equivalents; import paths change to nextcord.*.

Enums and constants
-------------------
Enumerations (e.g. Status, Activity types, Permission flags) and constants remain available under nextcord. Use `try_enum` or the enum classes in the same way as before (just updated import paths).

Activities and presence
-----------------------
Activity objects and helpers (e.g., Spotify handling, create_activity utilities) are available under nextcord.activity and related modules. Presence-related behavior still requires enabling the required intents.

Errors and exceptions
---------------------
Exception classes (e.g., HTTPException, Forbidden, NotFound, etc.) are available under `nextcord` and `nextcord.ext.commands`. Update imports accordingly.

Renamed/removed/changed behavior
--------------------------------
- The most common change is only the package rename. nextcord aims to retain API compatibility. If you used undocumented internals or relied on implementation details, verify behavior and type names after migration.
- Some Discord behavior (and consequently some client behavior) can change over time as Discord updates its API. Keep an eye on nextcord’s changelog for breaking changes introduced by either Discord or nextcord maintainers.

Checklist for migration
-----------------------
- Replace `discord` imports with `nextcord`.
- pip install -U nextcord and remove discord.py if desired.
- Update bot/client initialization to pass `intents`.
- Enable privileged intents in Developer Portal if needed (members, presence, message content).
- Test event handlers (member join, presence updates, message processing).
- Test application commands / slash commands if used.
- Run your bot in a test server first to verify behavior.

Troubleshooting
---------------
- Events not firing: verify intents both in code and in the Developer Portal.
- Missing member data: ensure `intents.members = True` and that you requested members via the proper gateway intents.
- Message content empty: enable `message_content` intent and set it in the Developer Portal when required.
- Import errors: check that every `discord` import has been updated to `nextcord`.

Further reading
---------------
Refer to the official nextcord documentation and changelog for migration updates, API specifics, and features unique to nextcord.