classfiles — GILDAS CLASS file reader
====================================

Module summary
---------------
Read GILDAS CLASS files into pyspeckit.spectrum.ObsBlock-like structures.
Implements low-level parsing helpers, file-type/version mappings, and
record/field definitions required to interpret CLASS-format binary files.

Specification
-------------
The CLASS file format is documented at:
http://iram.fr/IRAMFR/GILDAS/doc/html/class-html/node58.html

Public objects
--------------
Note: this file exposes a number of module-level constants and simple
helper functions used while reading CLASS files.

Aliases
  - irange
    - Alias for the built-in range (kept because the keyword "range" is
      needed elsewhere in the original code).

Progress bar
  - ProgressBar
    - Preferentially imported from astropy.utils.console. If unavailable,
      a no-op fallback object is provided that safely accepts update calls.

Functions
---------
- print_timing(func)
  - Decorator that wraps a function and logs its execution time using
    astropy.log.info. Useful to measure potentially expensive read
    operations. Preserves the wrapped function's docstring.

- ensure_bytes(string)
  - Ensure a given Python string is returned as bytes (UTF-8 encoded on
    Python 3, str on Python 2). Useful when building or matching binary
    keys inside CLASS records.

Top-level mappings and constants
-------------------------------
- filetype_dict
  - Maps 4-byte CLASS file-type codes (e.g. '1A  ', '2A  ', '9A  ', and
    same keys in bytes) to a human-readable identifier such as
    'Multiple_IEEE', 'v2', or 'Single_IEEE'. Used to detect the file
    structure/layout.

- fileversion_dict
  - Maps a subset of file-type keys to a short version string like 'v1'
    or 'v2'. Byte-string equivalents are included.

- record_lengths
  - Record length lookup keyed by a short file-type code (e.g. '1A',
    '2A') to the record length in bytes. Example: {'1A': 512,
    '2A': 4096}.

- header_id_numbers
  - Maps integer header identifiers (negative IDs used by CLASS)
    to descriptive names such as 'USER CODE', 'COMMENT', 'GENERAL',
    'POSITION', 'SPECTRO', 'BASELINE', 'HISTORY', 'GAUSSFIT',
    'CALIBRATION', etc. Used to identify and process different header
    blocks found in CLASS files.

- header_id_lengths
  - Partial mapping from header id to an expected number of fields or a
    length hint (when available). Some headers have variable length and
    are indicated as None.

- filedescv2_nw1
  - Integer constant (14) pulled from CLASS Fortran definitions; used in
    parsing v2 file descriptors.

- keys_lengths
  - A nested dictionary describing the binary layout for named header
    sections. Each entry is a list of tuples: (field_name, count,
    dtype). Commonly encountered sections include:
      - 'unknown' — default general block layout: NUM, VER, TELES, DOBS,
        DRED, TYPEC, KIND, QUAL, SCAN, SUBSCAN.
      - 'COMMENT' — fields LTEXT and CTEXT (comment length and text).
      - 'GENERAL' — UT, ST, AZ, EL, TAU, TSYS, TIME (various numeric
        types and counts) as present in the GENERAL header block.

Other details and implementation notes
--------------------------------------
- The module imports astropy.io.fits (pyfits alias), numpy, astropy
  logging, astropy.units, pyspeckit, and uses six for Python 2/3
  compatibility in a few simple utilities.
- A minimal ProgressBar shim is provided when astropy.utils.console is
  not available; it exposes a no-op update method to avoid conditional
  checks in callers.
- The code contains a number of literal and structural comments copied
  from CLASS Fortran sources that document the expected semantic meaning
  and units of specific fields (e.g. UT/ST in radians, TSYS in K,
  TIME in seconds).
- The module is intended as a parsing backend and provides the mapping
  and small utilities needed to interpret CLASS binary headers and
  records. Higher-level assembly into ObsBlock objects is handled by the
  calling code (for example pyspeckit consumers).