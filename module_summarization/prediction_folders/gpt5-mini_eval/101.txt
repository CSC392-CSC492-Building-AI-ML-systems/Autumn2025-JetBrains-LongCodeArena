web3.miner module
==================

Utilities for interacting with an Ethereum client's miner RPC API (for example
geth). The Miner class provides convenience wrappers around the JSON-RPC
methods exposed by the client for controlling and querying the miner.

Class
-----

Miner
~~~~~

Class: Miner(web3)

A thin wrapper around the client's miner-related JSON-RPC endpoints. An
instance is initialized with a Web3 object which is used to perform the
underlying RPC requests.

Parameters
: web3 (Web3)
  The active Web3 instance used to send RPC requests.

Properties
----------

hashrate
~~~~~~~~

@property hashrate -> int

Returns the current mining hashrate as a decimal integer. The value is
obtained from the RPC method "eth_hashrate" and formatted to a Python decimal
(integer) via the configured formatter.

Returns
: int -- the node's current hashrate (hashes per second, as a decimal integer).

Methods
-------

makeDAG(number)
~~~~~~~~~~~~~~~~

Create a DAG for the specified epoch/number.

Parameters
: number (int) -- the epoch or block number for which to generate the DAG.

Returns
: The raw RPC response returned by the "miner_makeDag" method.

setExtra(extra)
~~~~~~~~~~~~~~~~

Set the extra-data field for mined blocks.

Parameters
: extra (str) -- the extra data (typically a hex-encoded string) to set for
  newly mined blocks.

Returns
: The raw RPC response returned by the "miner_setExtra" method.

setEtherBase(etherbase)
~~~~~~~~~~~~~~~~~~~~~~~

Set the etherbase (coinbase) account for mined blocks.

Parameters
: etherbase (str) -- the address to set as the miner's etherbase/coinbase.

Returns
: The raw RPC response returned by the "miner_setEtherbase" method.

setGasPrice(gas_price)
~~~~~~~~~~~~~~~~~~~~~~~

Set the gas price used by the miner.

Parameters
: gas_price (int or str) -- the gas price to set (integer or hex-encoded
  value as accepted by the RPC).

Returns
: The raw RPC response returned by the "miner_setGasPrice" method.

start(num_threads)
~~~~~~~~~~~~~~~~~~

Start the miner using the specified number of CPU threads.

Parameters
: num_threads (int) -- number of miner threads to start.

Returns
: The raw RPC response returned by the "miner_start" method.

stop()
~~~~~~

Stop the miner.

Returns
: The raw RPC response returned by the "miner_stop" method.

startAutoDAG()
~~~~~~~~~~~~~~

Enable automatic DAG generation (auto-DAG) if supported by the client.

Returns
: The raw RPC response returned by the "miner_startAutoDag" method.

stopAutoDAG()
~~~~~~~~~~~~~

Disable automatic DAG generation (auto-DAG) if supported by the client.

Returns
: The raw RPC response returned by the "miner_stopAutoDag" method.

Examples
--------

Using a Web3 instance:

.. code-block:: python

    from web3 import Web3
    from web3.miner import Miner

    w3 = Web3(...)

    miner = Miner(w3)

    # Query hashrate (as decimal int)
    hr = miner.hashrate

    # Start miner with 2 threads
    miner.start(2)

    # Stop miner
    miner.stop()

    # Set etherbase
    miner.setEtherBase("0xYourAddressHere")

Note
----

All methods delegate to the underlying Web3 request manager and return the
raw RPC responses from the Ethereum client. The concrete return type and
semantics depend on the client implementation and version.