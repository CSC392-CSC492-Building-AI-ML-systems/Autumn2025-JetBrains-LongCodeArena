Channel Options
===============

Description
-----------
Encoding channels map data fields (or constant values) to visual properties of marks. Each channel is specified as either a field-based definition (mapping a data field and associated options) or a value definition (a single constant applied to the entire mark). Channel definitions control how data are interpreted (type, aggregation, binning, time units) and how the visual encoding is rendered (scale, axis, legend, formatting).

Common channel properties
------------------------
The following properties are commonly available for most channels:

- field (string)
  - Name of the data field to encode. Mutually exclusive with value.
- value
  - A constant value to apply to the channel (e.g., a fixed color or size). Mutually exclusive with field.
- type (string)
  - The measurement type of the field: one of "quantitative", "ordinal", "nominal", or "temporal".
- title (string)
  - Human-readable title used for axes or legends.
- aggregate (string)
  - Aggregation operation (e.g., "mean", "sum", "count", "min", "max"). Use when the channel should encode an aggregated value.
- bin (boolean or object)
  - If true, bin numeric data into discrete bins; may be an object to specify bin boundaries and maxbins.
- timeUnit (string)
  - Temporal time unit (e.g., "year", "month", "yearmonth", "hours") to transform temporal fields.
- scale (object)
  - Scale parameters (type, domain, range, nice, clamp, zero, etc.) used to map data values to visual values.
- axis (object)
  - Axis-specific options for position channels (x, y) such as orient, title, format, grid, labels, ticks.
- legend (object)
  - Legend options for channels that produce legends (color, shape, size) such as format, title, orient, values.
- sort (string, array, or object)
  - Sort order for ordinal/categorical fields or orderings for stacked/line charts.
- stack (string or null)
  - Stacking option for aggregated quantitative channels: "zero", "center", "normalize", or null to disable stacking.
- impute (object)
  - Options to impute missing values for aggregated or plotted sequences (less commonly used; server-side or transformer-driven).
- condition (object or array)
  - Conditional encodings that specify different channel values or definitions depending on predicates (selection, test). Can be used with either value- or field-based branches.

Position channels
-----------------
Channels used for spatial encoding:

- x, x2
- y, y2
- longitude, longitude2
- latitude, latitude2

Notes:
- x and y typically accept axis and scale options.
- x2/y2 and *_2 channels are used to encode secondary coordinates (e.g., ranges, bars).
- For geographic projections, use longitude/latitude channels with appropriate projection and geodata.

Mark property / visual channels
-------------------------------
Channels that control mark appearance:

- color, fill, stroke
  - Accept field or value. When field-based they produce legends.
- size
  - For point/mark sizing. Numeric scale usually used, optionally a legend.
- shape
  - For point mark shapes; accepts nominal/ordinal fields or constant shape strings.
- opacity, fillOpacity, strokeOpacity, strokeWidth
  - Control transparency and stroke thickness. Accept numeric fields or constant values.
- strokeDash
  - Encodes dash pattern for lines; accepts arrays/encodings that map to dash patterns.

Text and URL channels
---------------------
- text
  - For text mark content. Accepts field or value. Formatting/timeUnit apply to temporal/number fields as applicable.
- url, href
  - URLs or links for marks (e.g., image marks or clickable links). Accepts field or value.

Tooltips and interactive channels
---------------------------------
- tooltip
  - Can be a single field, a list of fields, or a complex object specifying title and format. Non-default types and formatting options are supported.
- key
  - Unique identifier for marks used during updates and transitions.
- detail
  - Additional grouping fields that do not produce a visual channel but influence grouping/aggregation.
- order
  - Controls layering order for connected marks (e.g., line order) or stacking order when combined with stack.

Faceting and layout channels
----------------------------
Channels for small multiples and layout:

- row, column, facet
  - Used to create faceted plots. Accept typical field definition properties (field, type, title).
- spacing and header
  - Layout-related objects configured at the facet or concat level (not per-channel but often used with these channels).

Legend and axis interaction
---------------------------
- Axis and legend objects attached to channels support further properties:
  - axis: orient, titlePadding, labelAngle, labelOverlap, tickCount, format, grid
  - legend: orient, title, format, symbolSize, symbolType, columns
- Setting axis=None or legend=None usually disables the axis or legend for that channel.

Conditional and value encodings
-------------------------------
- Field-based encoding (FieldDef): specify a data field plus options listed above.
- Value encoding (ValueDef): specify a constant (value) for the channel.
- Conditionals: channel definitions may include a condition that selects between a test-based or selection-based branch and a fallback branch.

Examples (conceptual)
---------------------
- Map a numeric field to y with binning and axis formatting:
  - y: {field: "weight", type: "quantitative", bin: true, axis: {format: ".1f"}}
- Color by category with a custom legend title:
  - color: {field: "species", type: "nominal", legend: {title: "Species"}}
- Constant opacity and size:
  - opacity: {value: 0.6}
  - size: {value: 100}

Best practices
--------------
- Explicitly set type for ambiguous fields (e.g., ordinal vs nominal).
- Use aggregate only when you want summary statistics; otherwise leave unset.
- Prefer value encodings for static styling and field-based encodings for data-driven visuals.
- Use binning and timeUnit to convert continuous domains into meaningful discrete categories for visual summarization.

See also
--------
- Channel-specific axis/legend/scale configuration for advanced control.
- Conditional encodings and selections for interactive behaviors.