Generate Documentation for Custom Plan Utilities
===============================================

This module provides a set of utility functions to visualize, summarize, and validate plans composed of `Msg` objects in a data acquisition or control system. These functions are designed to assist users in understanding and verifying their plans before execution.

Functions
---------

plot_raster_path(plan, x_motor, y_motor, ax=None, probe_size=None, lw=2)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Creates a visual representation of a raster scan path based on a plan.

Parameters:
- plan (iterable): An iterable yielding `Msg` objects, which must not be a coroutine.
- x_motor (str): The name of the motor controlling the x-axis.
- y_motor (str): The name of the motor controlling the y-axis.
- ax (matplotlib.axes.Axes, optional): The axes to plot on. If None, a new figure and axes are created.
- probe_size (float, optional): Radius of the probe in the same units as motor positions. If None, points are plotted as circles.
- lw (float, optional): Line width for the path.

Returns:
- dict: Contains references to the plotted path and event points for further customization.

Description:
This function parses the plan to extract movement commands (`set`) and save commands (`save`). It plots the raster path connecting saved points and optionally overlays probe circles at each point. Useful for visualizing scanning trajectories.

---

summarize_plan(plan)
~~~~~~~~~~~~~~~~~~~~
Prints a concise summary of the plan, highlighting movement commands and event creation points.

Parameters:
- plan (iterable): An iterable yielding `Msg` objects.

Description:
This function wraps the plan with `print_summary_wrapper` to generate a minimal textual overview, aiding in quick inspection of plan structure.

Aliases:
- `print_summary`: An alias for `summarize_plan` for backward compatibility.

---

check_limits(plan)
~~~~~~~~~~~~~~~~~~
Validates that device movements within the plan stay within their specified limits.

Parameters:
- plan (iterable): An iterable yielding `Msg` objects.

Description:
Iterates through the plan, checking each `set` command to ensure device values are within limits by invoking `check_value()` if available. If a device lacks this method, a warning is issued. This helps prevent plan execution errors due to out-of-range device settings.

Usage Notes
-----------
- These utilities are intended for use during plan development and validation.
- Ensure that `Msg` objects in your plan conform to expected attributes (`command`, `obj`, `args`).
- The plotting function requires `matplotlib` for visualization.
- The `check_limits` function relies on device objects implementing a `check_value()` method.

Dependencies
------------
- `warnings.warn` for issuing warnings.
- `bluesky.preprocessors.print_summary_wrapper` for plan summarization.
- `matplotlib.pyplot`, `matplotlib.collections`, and `matplotlib.patches` for plotting.

This module facilitates plan visualization, summarization, and validation, streamlining the process of preparing plans for execution in experimental or control systems.