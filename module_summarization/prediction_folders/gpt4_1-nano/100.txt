managers.rst

Generate Documentation for Managers Module
==========================================

Overview
--------
This module provides classes and functions to manage Ethereum JSON-RPC requests, handle transaction signing, and facilitate communication with Ethereum nodes. It includes mechanisms for synchronous and asynchronous request handling, transaction construction, signing, and sending.

Classes
-------

RequestManager
--------------
The RequestManager class manages JSON-RPC requests to an Ethereum node provider.

- __init__(provider): Initializes with a provider object responsible for making requests.
- setProvider(provider): Sets or updates the provider.
- request_blocking(method, params): Performs a synchronous request to the provider.
- request_async(method, params): Initiates an asynchronous request, returning a request ID.
- receive_blocking(request_id, timeout=None): Waits for and retrieves the response of an asynchronous request.
- receive_async(request_id, *args, **kwargs): Not implemented; placeholder for callback-based asynchronous handling.

ManagerWrapper
--------------
A wrapper class that delegates method calls to an underlying manager instance, allowing for extension or modification of behavior.

- __init__(wrapped_manager): Initializes with a manager instance.
- provider (property): Accessor for the provider.
- pending_requests (property): Accessor for the pending requests.
- setProvider(provider): Sets the provider on the wrapped manager.
- request_blocking(*args, **kwargs): Delegates to the wrapped manager.
- request_async(*args, **kwargs): Delegates to the wrapped manager.
- receive_blocking(*args, **kwargs): Delegates to the wrapped manager.
- receive_async(*args, **kwargs): Delegates to the wrapped manager.

BaseSendRawTransactionMixin
---------------------------
A mixin class providing functionality for constructing, signing, and sending raw Ethereum transactions.

- __init__(*args, **kwargs): Initializes internal data structures for tracking transactions and nonces.
- _get_nonces_and_cleanup(addr, chain_nonce): Retrieves and cleans up known transaction nonces.
- get_chain_nonce(addr): Fetches the current transaction count (nonce) from the chain.
- get_nonce(addr): Determines the next nonce to use for a transaction, considering known transactions.
- get_transaction_signature(serialized_txn): Abstract method to be implemented by subclasses for signing transactions.
- sign_and_serialize_transaction(transaction): Signs and serializes a transaction.
- construct_full_transaction(base_transaction): Builds a complete transaction dictionary with default values.
- request_blocking(method, params): Overrides the request method to handle transaction sending methods, constructing and signing transactions as needed.

Constants
---------
- TXN_SENDING_METHODS: A set of method names related to transaction sending, used to identify transaction-related requests.

Usage
-----
This module is intended to be used as part of a larger system that interacts with Ethereum nodes, enabling robust request management and transaction handling, including signing and broadcasting raw transactions.

Note
----
Subclasses should implement the get_transaction_signature method to provide transaction signing capabilities specific to the signing mechanism used.

End of Documentation
======================
