Generate Documentation for this Code
======================================

This module provides a set of plans for data acquisition and scanning in experimental setups, primarily designed for use with the Bluesky data collection framework. The plans facilitate various types of scans, including point-by-point counting, list-based scans, and relative position scans, with customizable hooks and metadata.

Available Plans
---------------

count
~~~~~
Performs a specified number of readings from one or more detectors, with optional delays and custom per-shot actions.

Parameters:
- detectors (list): List of detector objects to read.
- num (int, optional): Number of readings to take; defaults to 1. If None, continues until canceled.
- delay (iterable or scalar, optional): Time delay in seconds between successive readings; defaults to 0.
- per_shot (callable, optional): Function to customize actions for each shot; should accept detectors and yield messages.
- md (dict, optional): Metadata dictionary to annotate the plan.

Notes:
- If delay is an iterable, it must have at least num - 1 entries.
- Uses decorators for staging detectors and attaching metadata.

Example Usage:
.. code-block:: python
    RE(count([det1, det2], num=10, delay=0.5))

list_scan
~~~~~~~~~
Performs a multi-dimensional scan over specified motors and points, executing an inner product of steps.

Parameters:
- detectors (list): List of detector objects.
- *args: Pairs of motor objects and lists of points.
- per_step (callable, optional): Hook for customizing actions at each step; signature: f(detectors, motor, step).
- md (dict, optional): Metadata dictionary.

Notes:
- All point lists must be of the same length.
- Constructs a Cartesian product of motor positions for scanning.
- Integrates with plan_patterns for pattern generation.
- Sets default hints for plotting and data interpretation.

Example Usage:
.. code-block:: python
    RE(list_scan([det], motor1, [0,1,2], motor2, [10,20,30]))

rel_list_scan
~~~~~~~~~~~~~
Performs a list scan over one or more motors with positions relative to their current positions.

Parameters:
- detectors (list): List of detector objects.
- *args: Pairs of motor objects and lists of relative steps.
- per_step (callable, optional): Hook for customizing actions at each step.
- md (dict, optional): Metadata dictionary.

Notes:
- The implementation is a placeholder; intended to perform relative position scans.
- Similar interface to list_scan but with relative steps.

Future Plans
------------
- Implementation of the rel_list_scan plan to enable relative position scanning.
- Additional plans for grid scans, combined scans, and more complex patterns.
- Enhanced metadata handling and hints for better data visualization.
- Integration with other pattern modules for advanced scan patterns.

Usage Context
-------------
These plans are designed to be used within a Bluesky RunEngine context, enabling automated, reproducible data collection workflows with flexible scan patterns and detailed metadata annotations.

Dependencies
------------
- Python standard libraries: sys, inspect, itertools, functools, collections, time
- External libraries: numpy, cytools (or toolz as fallback)
- Internal modules: plan_patterns, utils, plan_stubs, preprocessors (bpp), plan_stubs (bps), Msg

Note: The code relies on decorators and pattern modules to manage staging, execution, and pattern generation for scans.

This documentation provides an overview of the available plans, their parameters, and usage examples to facilitate integration into experimental workflows.