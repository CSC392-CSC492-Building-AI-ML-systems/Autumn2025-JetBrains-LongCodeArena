filenode.rst

FileNode Module Documentation
=============================

Overview
--------
The `FileNode` module provides an interface for handling file-like operations within PyTables database files. It enables creating, opening, reading, and writing to file nodes embedded in HDF5 files managed by PyTables. This module is designed to facilitate binary I/O operations, supporting seamless integration with Python's `io` module interfaces.

Version Compatibility
---------------------
- Supported Node Type Versions: 1, 2
- The module was completely rewritten in version 3.0 to be fully compliant with the `io` module interfaces.

Constants
---------
- `NodeType`: A string constant `'file'` indicating the node system attribute for file nodes.
- `NodeTypeVersions`: A list `[1, 2]` representing supported node type version numbers.

Classes
-------
`RawPyTablesIO`
~~~~~~~~~~~~~~~
A base class for raw binary I/O operations on HDF5 files using PyTables.

Description
-----------
`RawPyTablesIO` provides a file-like interface for reading from and writing to file nodes within a PyTables database. It inherits from `io.RawIOBase` and implements methods to support standard I/O operations such as `readinto()`, `seek()`, `tell()`, `truncate()`, and others.

Initialization
--------------
- `__init__(self, node, mode=None)`: Initializes the object with a specified node and mode.
  - `node`: The PyTables node object representing the file node.
  - `mode`: The mode in which to open the node (`'r'`, `'w'`, `'a'`, `'+'`, etc.). Defaults to the node's mode if not provided.

Properties
----------
- `mode`: Returns the mode in which the file was opened.

Methods
-------
- `tell()`: Returns the current stream position.
- `seek(pos, whence=0)`: Changes the stream position to `pos`, relative to `whence`.
- `seekable()`: Returns `True`, indicating support for random access.
- `fileno()`: Returns the underlying file descriptor if available.
- `close()`: Closes the IO object, flushing buffers and releasing resources.
- `flush()`: Flushes write buffers to the underlying file.
- `truncate(pos=None)`: Truncates the file to a specified size, only allowing growth.
- `readinto(b)`: Reads bytes into a pre-allocated, writable bytes-like object `b`.
- `readline(limit=-1)`: Reads a line from the stream, up to `limit` bytes.
- `writable()`: Returns `True` if the file is open for writing.
- `readable()`: Returns `True` if the file is open for reading.

Usage
-----
This module allows creating new file nodes with `new_node()` and opening existing nodes with `open_node()`. It supports binary I/O operations compatible with Python's `io` interface, enabling integration with other Python I/O utilities.

Notes
-----
- Currently, only binary I/O is supported.
- Write operations are limited to appending data; data cannot be overwritten or deleted.
- Truncation is only supported for increasing the size of the file node.

See Also
--------
- `tables` (PyTables library): For managing HDF5 files and nodes.
- `io` (Python standard library): For standard I/O interface specifications.
- `filenode_usersguide`: Reference guide for detailed usage instructions.

This documentation provides an overview of the `FileNode` module and its core class `RawPyTablesIO`, facilitating efficient binary data handling within PyTables database files.