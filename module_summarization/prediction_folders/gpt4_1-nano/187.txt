Isotonic Regression
=====================

Overview
--------
Isotonic regression is a non-parametric calibration method that fits a monotonically increasing or decreasing function to data. It is particularly useful when the relationship between the features and target variable is known to be monotonic but the form of the relationship is unknown. The implementation supports bounds on the predicted values and handles out-of-bounds data during prediction.

Key Features
------------
- Monotonicity constraint (increasing or decreasing)
- Bounds on predictions (`y_min` and `y_max`)
- Handling of out-of-bounds input during prediction (`nan`, `clip`, or `raise`)
- Compatibility with sample weights
- Automatic determination of monotonicity direction based on data

Functions
---------
### check_increasing
Determines whether the target `y` is monotonically increasing or decreasing with respect to `x` using Spearman's correlation coefficient. It performs a statistical test to assess the monotonic relationship and warns if the confidence interval spans zero, indicating uncertainty in the monotonicity direction.

### isotonic_regression
Solves the isotonic regression problem for a given set of data points `y`. It supports optional sample weights and bounds on the predicted values. The function can fit increasing or decreasing functions, with the default being increasing. It returns the fitted isotonic regression values.

### IsotonicRegression Class
A reusable estimator implementing isotonic regression with the following features:
- Parameters:
  - `y_min`: Lower bound on predictions (default: None, meaning no bound)
  - `y_max`: Upper bound on predictions (default: None)
  - `increasing`: Boolean or 'auto' (default: True). If 'auto', the direction is determined based on the data.
  - `out_of_bounds`: How to handle predictions outside the training domain (`'nan'`, `'clip'`, `'raise'`)
- Attributes:
  - `X_min_`, `X_max_`: Bounds of the training data
  - `X_thresholds_`, `y_thresholds_`: Unique sorted input values and corresponding predictions used for interpolation
- Usage:
  - Fit the model with training data
  - Predict new data points, with out-of-bounds handling as specified

References
----------
- "Active set algorithms for isotonic regression; A unifying framework" by Michael J. Best and Nilotpal Chakravarti, Section 3.
- Wikipedia article on Fisher transformation for confidence interval estimation of Spearman's rho.

This implementation is part of the scikit-learn library and adheres to its API conventions, providing a robust and flexible tool for monotonic regression tasks.