geometry.subpix.rst
===================

Geometric Image Transformations
===============================

This module provides tools and classes for performing geometric transformations on images, including subpixel sampling, warping, and coordinate transformations. These operations are essential for tasks such as image registration, perspective correction, and 3D reconstruction.

Overview
--------

Geometric transformations involve mapping pixel coordinates from one image to another, often requiring interpolation to handle subpixel accuracy. Kornia's subpixel module offers differentiable functions to facilitate these operations within deep learning pipelines.

Key Components
--------------

Subpixel Sampling
~~~~~~~~~~~~~~~~~

Subpixel sampling allows extracting pixel values at non-integer coordinates, enabling smooth transformations and image warping. Kornia provides functions such as `kornia.geometry.subpix.sample_patch` which perform bilinear or bicubic interpolation to obtain pixel values at specified subpixel locations.

Image Warping
~~~~~~~~~~~~~

Warping functions transform images according to a specified geometric model, such as affine, perspective, or thin-plate spline transformations. These functions typically require a grid of pixel coordinates that are mapped to new locations, with interpolation applied to generate the output image.

Coordinate Transformations
~~~~~~~~~~~~~~~~~~~~~~~~~~

Coordinate transformations convert points between different reference frames, such as from pixel coordinates to camera coordinates or world coordinates. Kornia's `transform_points` and `inverse_transformation` functions facilitate these conversions, often utilizing camera intrinsic and extrinsic parameters.

Camera Model Integration
------------------------

The `PinholeCamera` class encapsulates camera parameters necessary for geometric transformations, including intrinsics and extrinsics matrices. It provides properties to access focal lengths (`fx`, `fy`), principal points (`cx`, `cy`), and translation vectors (`tx`, `ty`, `tz`). These parameters are used to compute projection and unprojection operations, enabling accurate mapping between 3D world points and 2D image pixels.

Transformations Workflow
------------------------

1. **Projection**: Convert 3D points to 2D pixel coordinates using camera intrinsics.
2. **Transformation**: Apply geometric transformations (e.g., rotation, translation) to points or images.
3. **Sampling**: Use subpixel sampling to interpolate pixel values at transformed coordinates.
4. **Inverse Transformation**: Map points or images back to original coordinate frames as needed.

Applications
------------

- Image registration and alignment
- Perspective correction and rectification
- 3D reconstruction and depth estimation
- Augmented reality and virtual view synthesis
- Data augmentation for machine learning models

This module's functions and classes are designed to be fully differentiable, supporting gradient-based optimization in deep learning workflows involving geometric image transformations.