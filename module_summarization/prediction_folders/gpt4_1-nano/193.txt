Metadata Routing API
====================

Overview
--------
The Metadata Routing API provides a flexible mechanism to direct method calls and parameter configurations to different underlying estimators or processing pathways based on metadata or runtime conditions. It enables dynamic selection and customization of estimator behavior, facilitating complex workflows and modular design in machine learning pipelines.

Key Components
--------------
- **MetadataRouter**: The core class responsible for managing routing logic. It directs method calls to appropriate sub-estimators or functions based on specified routing rules and metadata.
- **MethodMapping**: Defines mappings between method names and routing strategies, allowing for customized method dispatching.
- **process_routing**: Utility function that processes routing configurations, validating and applying routing rules to estimators and data.

Features
--------
- Dynamic method dispatching based on metadata attributes.
- Supports complex routing logic, including conditional pathways.
- Enhances modularity by decoupling estimator logic from routing decisions.
- Integrates seamlessly with scikit-learn estimators and pipelines.

Usage
-----
1. Instantiate a `MetadataRouter` with desired routing rules and mappings.
2. Use the router as a drop-in replacement for estimators in your pipeline.
3. Call methods on the router; it will delegate to the appropriate underlying estimator based on the routing logic.
4. Configure routing rules via `MethodMapping` and `process_routing` to customize behavior.

Example
-------
```python
from sklearn.utils.metadata_routing import MetadataRouter, MethodMapping, process_routing

# Define routing rules
routing_rules = {
    'fit': MethodMapping(condition='metadata_type', mapping={'type_a': 'estimator_a', 'type_b': 'estimator_b'}),
    'predict': MethodMapping(condition='model_type', mapping={'type_a': 'model_a', 'type_b': 'model_b'})
}

# Process routing configuration
routing_config = process_routing(routing_rules)

# Create a MetadataRouter with the routing configuration
router = MetadataRouter(estimator=base_estimator, routing=routing_config)

# Use the router in your workflow
router.fit(X, y, metadata=metadata_info)
predictions = router.predict(X, metadata=metadata_info)
```

Benefits
--------
- Simplifies complex workflows by centralizing routing logic.
- Enables conditional estimator selection based on data or metadata.
- Promotes code reuse and modular design.
- Facilitates experimentation with different model configurations without changing core code.

Compatibility
-------------
The Metadata Routing API is designed to integrate with scikit-learn's estimator interface, supporting fit, predict, and other common methods. It is suitable for use in multioutput, classification, regression, and custom estimator workflows where dynamic routing enhances flexibility and maintainability.

References
----------
- `MetadataRouter` class documentation
- `MethodMapping` configuration options
- `process_routing` utility function

For more details, consult the scikit-learn documentation on Metadata Routing and advanced estimator composition.