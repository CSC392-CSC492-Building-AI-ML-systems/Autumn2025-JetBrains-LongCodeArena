Callbacks
=========

BestEffortCallback
------------------

The `BestEffortCallback` class provides a flexible and comprehensive callback for live data visualization and monitoring during data acquisition. It is designed to handle multiple streams of data, generate real-time plots, tables, and peak statistics, and offer configurable options to tailor the display to specific needs.

Overview
--------

`BestEffortCallback` is a subclass of `QtAwareCallback` that manages live plotting, tabular data display, and peak analysis. It is intended to be used during experimental scans to provide immediate feedback and insights into the ongoing data collection.

Initialization
--------------

```python
__init__(self, *, fig_factory=None, table_enabled=True, **kwargs)
```

- `fig_factory`: Optional factory function to create figures for plotting.
- `table_enabled`: Boolean to enable or disable the live data table.
- `kwargs`: Additional keyword arguments passed to the superclass.

Main Features
-------------

- **Configurable Display Elements**:
  - Enable or disable the display of headers, tables, baseline hints, and plots via methods:
    - `enable_heading()`, `disable_heading()`
    - `enable_table()`, `disable_table()`
    - `enable_baseline()`, `disable_baseline()`
    - `enable_plots()`, `disable_plots()`

- **Data Handling and Processing**:
  - Processes incoming documents (`start`, `descriptor`, etc.) to update internal state.
  - Maintains mappings of descriptors, live plots, grids, scatters, and peak statistics.
  - Handles stream names and hints to determine how data should be visualized.

- **Start Method**:
  - Initializes the callback at the beginning of a run.
  - Sets up dimensions based on hints or motor information.
  - Prints run headers with timestamp and IDs.

- **Descriptor Method**:
  - Processes data descriptors to identify data columns.
  - Manages stream-specific behaviors and old document compatibility.
  - Decides whether to plot data based on configuration and data characteristics.
  - Sets up plotting objects for each data stream and field.

Usage
-----

The callback is invoked during data collection, responding to different document types (`start`, `descriptor`, etc.) to update visualizations in real-time. It can be customized to enable or disable specific features, and it maintains internal state to manage multiple data streams and plotting configurations.

Notes
-----

- The callback supports overplotting and can handle streams that should not be plotted (`noplot_streams`).
- It can omit plotting for single-point scans if configured.
- Peak analysis results are stored in the `peaks` attribute.
- The callback is designed to be robust against various data formats and experimental setups, with heuristics to handle missing or inconsistent hints.

This class is part of a live data visualization framework, providing an adaptive and extensible way to monitor experiments in real-time.