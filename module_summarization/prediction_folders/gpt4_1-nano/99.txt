Filters Module Documentation
============================

Overview
--------
This module provides classes and functions to create, manage, and process various types of blockchain filters, including event, log, transaction, block, and Whisper (Shh) filters. It enables asynchronous monitoring of blockchain events and logs, with support for custom formatting and filtering criteria.

Functions
---------
construct_event_filter_params(event_abi, contract_address=None, argument_filters=None, topics=None, fromBlock=None, toBlock=None, address=None)
    Constructs filter parameters for blockchain event filters based on provided ABI, addresses, topics, and block range.
    - event_abi: The ABI of the event to filter.
    - contract_address: Optional contract address to filter.
    - argument_filters: Optional argument filters for the event.
    - topics: Optional specific topics to filter.
    - fromBlock: Optional starting block number.
    - toBlock: Optional ending block number.
    - address: Optional address or list of addresses to filter.
    Returns a tuple (data_filters_set, filter_params) for use in filter creation.

Classes
-------
Filter (Base Class)
    Represents a generic blockchain filter with asynchronous polling capabilities.
    - Attributes:
        web3: Web3 instance for blockchain interaction.
        filter_id: Identifier for the filter.
        callbacks: List of callback functions to invoke on new entries.
        running: Boolean indicating if the filter is active.
        stopped: Boolean indicating if the filter has been stopped.
        poll_interval: Optional interval between polls.
    - Methods:
        __init__(web3, filter_id): Initializes the filter.
        __str__(): String representation.
        _run(): Internal method to poll for changes; to be overridden.
        format_entry(entry): Hook to format entries before callbacks.
        is_valid_entry(entry): Hook for additional filtering.
        watch(*callbacks): Register callbacks and start watching.
        stop_watching(timeout=0): Stop watching and uninstall filter.

BlockFilter (Subclass)
    Inherits from Filter.
    Used for monitoring new blocks.

TransactionFilter (Subclass)
    Inherits from Filter.
    Used for monitoring new transactions.

LogFilter (Subclass)
    Extends Filter to monitor log entries.
    - Attributes:
        data_filter_set: Set of data filters.
        data_filter_set_regex: Compiled regex for data filtering.
        log_entry_formatter: Optional formatter for log entries.
    - Methods:
        get(only_changes=True): Retrieve log entries, formatted.
        format_entry(entry): Format log entries.
        set_data_filters(data_filter_set): Set data filters and compile regex.
        is_valid_entry(entry): Validate entries against data filters.

PastLogFilter (Subclass)
    Extends LogFilter to fetch and process past logs upon initialization.
    - Methods:
        _run(): Fetches existing logs and applies callbacks.

ShhFilter (Subclass)
    Used for monitoring Whisper (Shh) messages.
    - Methods:
        _run(): Polls for new Shh messages.
        stop_watching(timeout=0): Stops the filter and uninstalls it.

Utility Functions
-----------------
construct_data_filter_regex(data_filter_set)
    Creates a regex pattern to match data filters, supporting hexadecimal data filtering.

Usage
-----
Create and manage filters by instantiating the appropriate class, registering callback functions with `watch()`, and stopping with `stop_watching()`. Use `construct_event_filter_params()` to generate filter parameters for event filters.

Note
----
- Filters run asynchronously using gevent Greenlets.
- Callbacks are invoked with formatted entries when new data is detected.
- Filters can be customized by subclassing and overriding methods like `format_entry()` and `is_valid_entry()`.
