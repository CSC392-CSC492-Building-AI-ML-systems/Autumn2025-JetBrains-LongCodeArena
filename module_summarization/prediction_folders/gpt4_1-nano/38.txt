Examples and Usage
==================

Defining Fields
---------------

Fields are the building blocks of models in Tortoise ORM. To define a field, instantiate a subclass of `Field` with the desired parameters.

```python
from tortoise import fields
from tortoise.models import Model

class User(Model):
    id = fields.IntField(pk=True)
    name = fields.CharField(max_length=50, null=False)
    email = fields.CharField(max_length=100, unique=True)
    age = fields.IntField(default=18)
```

Field Parameters
----------------

- `source_field`: Specify a custom database column name if different from the attribute name.
- `generated`: Indicate if the field is auto-generated by the database.
- `pk`: Mark the field as the primary key. Only one primary key per model is allowed.
- `null`: Allow null values in the database.
- `default`: Set a default value or a callable for dynamic defaults.
- `unique`: Enforce uniqueness of the field values.
- `index`: Create an index for faster lookups.
- `description`: Add a descriptive comment for the field, visible in schema descriptions.

Usage in Models
---------------

Fields are used as class attributes within a `Model` subclass. Tortoise ORM uses these definitions to generate database schemas and handle data conversions.

```python
class Product(Model):
    id = fields.IntField(pk=True)
    name = fields.CharField(max_length=100)
    price = fields.DecimalField(max_digits=10, decimal_places=2)
    in_stock = fields.BooleanField(default=True)
```

Type Conversion
---------------

- `to_db_value(value, instance)`: Converts Python values to database-compatible values before saving.
- `to_python_value(value)`: Converts database values to Python objects when loading data.

Example:

```python
price_field = fields.DecimalField(max_digits=10, decimal_places=2)

# Converting Python to DB
db_value = price_field.to_db_value(19.99, my_instance)

# Converting DB to Python
python_value = price_field.to_python_value(db_value)
```

Custom Field Types
------------------

You can create custom fields by subclassing `Field` and overriding methods or setting class attributes such as `SQL_TYPE` and `GENERATED_SQL`. Use inner classes like `_db_sqlite` to specify database-specific behavior.

```python
class CustomCharField(fields.CharField):
    class _db_sqlite:
        SQL_TYPE = "VARCHAR(255)"
        def function_cast(self, term):
            return functions.Cast(term, SqlTypes.TEXT)
```

This flexibility allows tailoring field behavior to specific database dialects.

Notes
-----

- Fields marked as `indexable=False` cannot be indexed.
- Fields with `pk=True` automatically set `index=True`.
- Ensure that fields marked as `null=True` are compatible with your database constraints.
- Use `description` to document fields for schema introspection and comments.

This documentation provides an overview of defining and using fields within Tortoise ORM models, facilitating effective database schema design and data handling.