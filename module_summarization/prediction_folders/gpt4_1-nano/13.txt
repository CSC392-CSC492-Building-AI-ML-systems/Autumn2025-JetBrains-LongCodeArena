Understanding Sessions
======================

Introduction
------------
A session in ftrack API represents an isolated context for interacting with an ftrack server. It manages the connection details, authentication, caching, event handling, and other configurations necessary for communication with the server. Each session is independent, allowing multiple concurrent interactions with different servers or configurations.

Creating a Session
------------------
To create a session, instantiate the `Session` class with the required parameters:

- `server_url`: The URL of the ftrack server, including port number. Can be set via the `FTRACK_SERVER` environment variable.
- `api_key`: The API key for authentication. Can be provided directly or via the `FTRACK_API_KEY` environment variable.
- `api_user`: The username for authentication. Can be provided directly, via the `FTRACK_API_USER` environment variable, or defaults to the current system user.

Optional parameters include:
- `auto_populate`: If `True`, entity attributes are automatically fetched from the server when accessed.
- `plugin_paths`: List of paths to search for plugins.
- `cache`: Cache instance implementing `ftrack_api.cache.Cache` interface or a callable returning such an instance.
- `cache_key_maker`: Instance of `ftrack_api.cache.KeyMaker` to generate cache keys.
- `auto_connect_event_hub`: If `True`, automatically connect to the event server for publishing and subscribing to non-local events.
- `schema_cache_path`: Path to store schema cache; can be set via `FTRACK_API_SCHEMA_CACHE_PATH` environment variable or disabled by setting to `False`.
- `plugin_arguments`: Dictionary of arguments passed to plugin registration functions.

Authentication
--------------
The `SessionAuthentication` class attaches authentication headers to requests using the provided API key and user. It modifies outgoing requests to include the necessary headers for server authentication.

Cache Management
----------------
The session manages a layered cache system, with a default top-level `MemoryCache`. Users can specify custom cache implementations or key makers to control how objects are cached and retrieved, improving performance and reducing server load.

Event Handling
--------------
If enabled, the session automatically connects to the event hub in a background thread, allowing for publishing and subscribing to events across the network. Subscribing to events does not require an active connection, but publishing and certain event operations do.

Usage
-----
Once instantiated, a session can be used to perform various operations such as querying entities, creating new objects, updating data, and handling events. The session maintains state and configuration throughout its lifetime, providing a consistent interface for interacting with the ftrack server.

Lifecycle
--------
The session can be closed explicitly, releasing resources and terminating connections. Proper management of session lifecycle ensures clean disconnection and resource cleanup.

Summary
-------
The `ftrack_api.Session` class encapsulates all necessary components for interacting with an ftrack server, including connection details, authentication, caching, and event handling. Proper configuration of a session enables efficient and flexible integration with the ftrack platform for various automation and management tasks.