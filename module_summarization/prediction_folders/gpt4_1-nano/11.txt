Working with Entities
=====================

Introduction
------------
Entities in ftrack are core objects representing various components such as tasks, assets, shots, and more. Working with entities involves creating, retrieving, updating, and managing these objects within a session.

Creating Entities
-----------------
Entities can be created by instantiating the appropriate entity class and setting its attributes. For example:

```python
from ftrack_api import Entity

task = Entity('Task', name='Design Character', project=project)
session.add(task)
session.commit()
```

Retrieving Entities
-------------------
Entities can be retrieved using queries or by direct access through the session. The session provides methods to query entities based on filters:

```python
tasks = session.query('Task where name is "Design Character"').all()
```

Filtering and Querying
----------------------
ftrack supports a flexible query language to filter entities. Queries can be constructed to fetch entities matching specific criteria:

```python
tasks = session.query('Task where status="In Progress"').all()
```

Updating Entities
-----------------
Once retrieved, entities can be modified by changing their attributes and committing the session:

```python
task = tasks[0]
task['status'] = 'Completed'
session.commit()
```

Managing Relationships
----------------------
Entities often have relationships with other entities. These can be navigated and manipulated through attributes:

```python
# Accessing related entities
assets = task['assets']
# Adding a new relationship
task['assets'].append(new_asset)
session.commit()
```

Deleting Entities
-----------------
Entities can be deleted from the session and the change persisted:

```python
session.delete(task)
session.commit()
```

Session Management
------------------
All entity operations are performed within a session. Proper management of the session lifecycle ensures data integrity and consistency.

Example Workflow
----------------
```python
# Start a session
session = ftrack_api.Session(server_url='http://your-ftrack-server')

# Create a new task
new_task = session.create('Task', {'name': 'Model Character'})
session.commit()

# Query existing tasks
tasks = session.query('Task').all()

# Update a task
task = tasks[0]
task['status'] = 'In Progress'
session.commit()

# Delete a task
session.delete(task)
session.commit()
```

Best Practices
--------------
- Always commit the session after making changes to persist them.
- Use queries to efficiently retrieve entities based on specific criteria.
- Manage entity relationships carefully to maintain data consistency.
- Handle exceptions and session lifecycle appropriately to avoid data corruption.

This documentation provides an overview of working with entities in ftrack, enabling effective management of project data within your workflows.