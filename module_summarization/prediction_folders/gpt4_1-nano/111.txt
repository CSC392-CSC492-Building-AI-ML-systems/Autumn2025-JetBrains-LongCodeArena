Generate Documentation for Custom Plans and Utilities
======================================================

This document provides detailed descriptions of the custom plan functions and utilities implemented in the codebase. These plans facilitate data acquisition and motor scanning operations within the Bluesky framework.

1. count
--------

Performs a specified number of readings from one or more detectors, with optional delays and custom per-shot actions.

Parameters
----------
- detectors : list
    List of 'readable' detector objects.
- num : int, optional
    Number of readings to take; defaults to 1. If None, data collection continues until canceled.
- delay : iterable or float, optional
    Time delay in seconds between successive readings. Defaults to 0.
- per_shot : callable, optional
    Hook for customizing actions at each shot. Should accept an iterable of detectors and yield Msg objects.
- md : dict, optional
    Metadata dictionary to annotate the plan.

Notes
-----
- If `delay` is an iterable, it must have at least `num - 1` entries.
- Uses decorators for staging detectors and attaching metadata.

Returns
-------
Generator yielding Msg objects representing the data collection steps.

2. list_scan
------------

Performs a multi-dimensional scan over specified motors and points, executing an inner product of motor positions.

Parameters
----------
- detectors : list
    List of 'readable' detector objects.
- *args : list
    Pairs of motor objects and their corresponding list of points.
    Example:
        motor1, [point1, point2, ...],
        motor2, [point1, point2, ...],
        ...
- per_step : callable, optional
    Hook for customizing actions at each step. Signature:
        f(detectors, motor, step) -> plan (generator)
- md : dict, optional
    Metadata dictionary.

Notes
-----
- All position lists must be of the same length.
- Constructs a Cartesian product of motor positions for scanning.
- Uses plan patterns to generate the full list of motor combinations.

Returns
-------
Generator yielding Msg objects for each combination in the scan.

3. rel_list_scan
----------------

Performs a scan over one or more motors with positions specified relative to their current positions.

Parameters
----------
- detectors : list
    List of 'readable' detector objects.
- *args : list
    Pairs of motor objects and their relative position lists.
    Example:
        motor1, [delta1, delta2, ...],
        motor2, [delta1, delta2, ...],
        ...
- per_step : callable, optional
    Hook for customizing actions at each step.
- md : dict, optional
    Metadata dictionary.

Notes
-----
- Positions are relative to the current motor positions.
- Implementation is pending; intended to facilitate relative movements in scans.

Returns
-------
Generator yielding Msg objects for each relative position step.

Utilities and Imports
---------------------
- Standard libraries: sys, inspect, itertools, functools, collections, time.
- Numerical operations: numpy.
- Conditional import: cytools or toolz for partitioning.
- Internal modules: plan_patterns, utils, preprocessors (bpp), plan_stubs (bps), and Msg class.
- Decorators: stage_decorator and run_decorator from preprocessors for managing plan execution stages.

This documentation summarizes the core plan functions designed to streamline data acquisition and motor scanning within experimental workflows.