Contracts Module
================

Overview
--------
This module provides classes and functions to interact with Ethereum smart contracts over a Web3 connector. It allows for deploying new contracts, creating contract proxy objects for existing deployed contracts, encoding function calls, and subscribing to contract events.

Classes
-------
Contract
~~~~~~~~
The `Contract` class serves as a base class for creating contract proxy classes. It facilitates interaction with smart contracts by providing methods for deployment, encoding function calls, and event handling.

Initialization
--------------
Create a new contract proxy object by specifying the contract's ABI, address, and optionally its code, runtime code, and source code.

```python
contract_instance = Contract(
    abi=contract_abi,
    address=contract_address,
    code=contract_code,
    code_runtime=contract_runtime_code,
    source=contract_source_code
)
```

Properties
----------
- `web3`: The Web3 instance used for blockchain interaction. Must be set before creating contract instances.
- `abi`: The contract's Application Binary Interface. Raises an error if not set.
- `code`: The contract's bytecode. Raises an error if not set.
- `code_runtime`: The runtime bytecode of the contract. Raises an error if not set.
- `source`: The source code of the contract. Raises an error if not set.
- `address`: The deployed contract's address.

Methods
-------
### Deployment
- `deploy(transaction=None, args=None, kwargs=None)`
  
  Deploys the contract to the blockchain.
  
  **Parameters:**
  - `transaction`: Dictionary of transaction parameters.
  - `args`: Positional arguments for the contract constructor.
  - `kwargs`: Keyword arguments for the contract constructor.
  
  **Returns:**
  - Transaction hash as a hexadecimal string.

### Encoding Function Calls
- `encodeABI(fn_name, args=None, kwargs=None, data=None)`
  
  Encodes the function call with arguments into ABI-encoded data suitable for transaction data field.
  
  **Parameters:**
  - `fn_name`: Name of the contract function.
  - `args`: Positional arguments for the function.
  - `kwargs`: Keyword arguments for the function.
  - `data`: Optional data; defaults to function selector.
  
  **Returns:**
  - ABI-encoded data as a hexadecimal string.

### Event Subscription
- `on(event_name, filter_params=None, *callbacks)`
  
  Registers callbacks to be triggered upon the occurrence of specified events emitted by the contract.
  
  **Parameters:**
  - `event_name`: Name of the event to listen for.
  - `filter_params`: Dictionary of filter parameters, including argument filters.
  - `*callbacks`: Callback functions to invoke when the event occurs.

Usage
-----
Create a contract class using `construct_contract_factory` with the contract's ABI definitions. Instantiate the class with the contract's address to interact with an existing deployed contract or deploy a new one using the `deploy` method.

Example:
```python
# Deploy a contract
txn_hash = MyContract.deploy(
    transaction={'from': web3.eth.accounts[0]},
    args=('MyToken', 'MTK', 18)
)

# Create a contract instance
contract_instance = MyContract(address='0x1234...')
# Encode a function call
data = contract_instance.encodeABI('transfer', args=('0xabc...', 1000))
# Subscribe to an event
contract_instance.on('Transfer', {'filter': {'from': '0xabc...'}}, callback_function)
```

Note
----
- The `web3` attribute must be initialized before creating contract instances.
- The class supports overriding ABI, code, runtime code, and source at the instance level.
- Event handling is facilitated through filters and callback registration.

This documentation provides an overview of the core functionalities for interacting with Ethereum smart contracts using this module.