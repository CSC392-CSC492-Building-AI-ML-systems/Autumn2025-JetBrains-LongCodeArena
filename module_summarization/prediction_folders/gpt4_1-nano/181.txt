Datasets Loading Utilities
==========================

The datasets module provides functions and classes to facilitate downloading, caching, and loading datasets from various sources, including OpenML.org. These utilities are designed to handle network errors, cache datasets locally for efficiency, and support different data formats such as ARFF and JSON.

Key Functions and Classes
-------------------------

### fetch_openml

`fetch_openml` is a primary utility for retrieving datasets from OpenML.org. It handles downloading datasets, caching them locally, and loading them into memory as structured data objects. This function supports retries on network errors, automatic decompression of gzip-encoded files, and cache invalidation to ensure data consistency.

### _open_openml_url

This internal function manages the retrieval of resources from OpenML.org. It constructs requests with appropriate headers, handles gzip compression, and manages local caching. When caching is enabled, it ensures atomic file operations to prevent race conditions during concurrent access.

### _retry_with_clean_cache

A decorator that wraps dataset download functions to automatically retry upon failure and clean corrupted cache files. If a download fails due to network issues or data corruption, the cached file is removed, and the download is attempted again.

### _retry_on_network_error

A decorator that retries network requests multiple times with a specified delay in case of network errors such as URLError or TimeoutError. It helps improve robustness against transient network issues.

### _get_json_content_from_openml_api

This utility fetches JSON data from the OpenML API, handling retries and error conditions. It simplifies retrieving dataset metadata, features, and qualities from OpenML.

### _get_local_path

Constructs the local filesystem path for cached datasets based on the dataset's OpenML path and the designated data directory.

### Error Handling

- **OpenMLError**: Custom exception indicating specific OpenML errors, such as HTTP 412 errors, which denote generic server-side issues.

Usage Notes
-----------

- Datasets are cached locally to optimize repeated access and reduce network load.
- Supports automatic decompression of gzip-encoded datasets.
- Implements robust retry mechanisms to handle intermittent network failures.
- Ensures safe concurrent access to cached files through atomic file operations.
- Provides seamless integration with datasets in ARFF, JSON, and other formats supported by the utility functions.

These utilities streamline the process of dataset acquisition and preparation, enabling efficient and reliable data loading workflows.