Generate Documentation for AzureStorageLibraryProvider Module
==============================================================

Overview
--------
The `AzureStorageLibraryProvider` class provides an implementation of a library provider that interacts with Microsoft Azure Storage containers. It allows listing and reading items stored in an Azure Blob Storage container, supporting caching and asynchronous operations.

Class: AzureStorageLibraryProvider
------------------------------------

Description
-----------
`AzureStorageLibraryProvider` is a subclass of `LibraryProviderABC` that enables access to Azure Blob Storage containers. It supports configuration via a URL scheme starting with `azure+`, and manages local caching of blobs for efficient access.

Initialization
--------------
```python
def __init__(self, library, path, layer)
```
- **library**: The parent library object.
- **path**: The URL path starting with `azure+` indicating the Azure Storage container.
- **layer**: The layer of the library.

This constructor sets up the connection parameters, cache directory, and schedules the initial loading of the storage model.

Attributes
----------
- `URL`: Parsed URL of the Azure Storage container.
- `Model`: Internal representation of the directory structure, loaded asynchronously.
- `Path`: Original URL path.
- `CacheDir`: Directory used for caching blobs locally, configurable via `Config`.

Methods
-------

### `_start()`
```python
async def _start(self)
```
- Initiates the loading of the storage model asynchronously and sets the provider as ready upon success.

### `_load_model()`
```python
async def _load_model(self)
```
- Fetches the list of blobs from the Azure container.
- Parses the XML response to build an internal directory structure (`AzureDirectory` and `AzureItem` objects).
- Logs connection status.

### `list(path: str) -> list`
```python
async def list(self, path: str) -> list
```
- Lists items (files and directories) at the specified path.
- Raises `RuntimeError` if the model is not yet loaded.
- Validates the path format.
- Returns a list of `LibraryItem` objects representing the contents.

### `read(path: str) -> typing.IO`
```python
async def read(self, path: str) -> typing.IO
```
- Reads the content of a blob at the specified path.
- Utilizes caching based on ETag headers.
- Handles HTTP requests with conditional headers for cache validation.
- Returns a file-like object containing the blob data.

Usage
-----
This class is intended to be used as part of a larger library management system, where it provides asynchronous access to Azure Blob Storage containers. It supports listing directory contents and reading individual blobs efficiently with caching.

Notes
-----
- The `_load_model()` method should be called periodically or upon initialization to keep the directory structure updated.
- Cache management (e.g., invalidation) is suggested but not fully implemented.
- Error handling is included for network issues and missing items.

Dependencies
------------
- `aiohttp` for asynchronous HTTP requests.
- `xml.dom.minidom` for XML parsing.
- Standard libraries: `os`, `io`, `typing`, `hashlib`, `logging`, `tempfile`, `dataclasses`, `urllib.parse`.

This documentation provides an overview of the `AzureStorageLibraryProvider` class, its attributes, and methods for integrating Azure Blob Storage into a library management system.