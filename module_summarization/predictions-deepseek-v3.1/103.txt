# Code Generation Module

The `diofant.utilities.codegen` module provides functionality for generating compilable code in multiple programming languages from Diofant expressions. This module creates complete routines rather than just expression strings, addressing language-specific requirements like header files, argument handling, and shared computations.

## Overview

The module supports generating code for:
- C
- C++
- Fortran 77
- Fortran 90
- Octave/Matlab

Key features include:
- Handling input, output, and input-output arguments
- Support for scalar and array arguments
- Common subexpression elimination
- Isolation and pre-evaluation of constants
- Generation of companion files (e.g., .pyf for f2py)

## Core Components

### Routine Class
The `Routine` class provides a generic description of an evaluation routine for a set of expressions:

```python
class Routine(name, arguments, results, local_vars, global_vars)
```

**Parameters:**
- `name`: Name of the routine
- `arguments`: List of Argument objects (InputArgument, OutputArgument, InOutArgument)
- `results`: List of Result objects representing return values
- `local_vars`: List of local variables defined at function beginning
- `global_vars`: List of Symbols that won't be passed into the function

**Properties:**
- `variables`: Returns all variables possibly used in the routine
- `result_variables`: Returns list of result variables

### Code Generation Classes
Language-specific code generators:
- `CCodeGen`: C code generation
- `FCodeGen`: Fortran code generation  
- `OctaveCodeGen`: Octave/Matlab code generation

### Data Types
- `DataType`: Enumeration of supported data types
- `default_datatypes`: Default type mappings
- `get_default_datatype`: Helper function for type resolution

### Argument Types
- `Argument`: Base argument class
- `InputArgument`: Input parameters
- `OutputArgument`: Output parameters
- `Result`: Return values of routines

## Usage

### Basic Workflow
1. Create expressions using Diofant symbols and functions
2. Build a Routine description with arguments and results
3. Use a CodeGen class to generate compilable code

### Friendly Functions
Simplified interface functions:
- `codegen`: High-level code generation
- `make_routine`: Routine creation helper

## Differences from Printing Modules

Unlike `diofant.printing.ccode` and similar printing routines, this module:

- Generates complete compilable code files (header + implementation)
- Handles programming-technical issues (I/O arguments, array types)
- Supports multiple expressions in one routine with shared computations
- Pre-evaluates constant expressions during code generation
- Provides language-specific feature support

## Status

**Completed Features:**
- Scalar input arguments with C code generation
- Friendly functions API
- Integer and real number I/O
- Output and input-output arguments
- Argument sorting
- Contiguous array arguments (numpy matrices)
- .pyf generation for f2py
- Constant isolation and pre-evaluation
- Fortran 90 support
- Octave/Matlab support

**Planned Features:**
- Common subexpression elimination
- User-defined comments
- Special function library support
- Additional compiler testing
- Non-contiguous array support
- Complex number support
- Additional language support (C++, Python, Fortran 77)
- Enhanced header information

The module provides a robust foundation for generating performance-optimized numerical routines from symbolic expressions while maintaining language compatibility and code quality.