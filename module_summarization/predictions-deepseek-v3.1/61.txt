.. _instrumentation_events:

Instrumentation Events
======================

The :mod:`sqlalchemy.orm.instrumentation` module provides the internal event system for class instrumentation within SQLAlchemy ORM. These events are primarily used internally by SQLAlchemy to manage class instrumentation and state tracking, but may be relevant for advanced extension development.

ClassManager Events
-------------------

The :class:`.ClassManager` class serves as an event target and dispatches events related to class instrumentation management.

.. autoclass:: sqlalchemy.orm.instrumentation.ClassManager
   :members:
   
   .. rubric:: Events

   .. autoattribute:: dispatch
      :annotation: = <sqlalchemy.event.base.dispatcher object>

      The event dispatcher for this ClassManager instance. Dispatches events specific to class instrumentation.

Event Types
-----------

The following events are available on ClassManager instances:

.. event:: new_classmanager_instance(class_, manager)
   
   Emitted when a new ClassManager instance is created for a class.
   
   :param class_: The class being instrumented.
   :param manager: The ClassManager instance created for the class.

.. note::
   These events are primarily used internally by SQLAlchemy's instrumentation system and are not typically used by application code. For user-facing ORM events, see :ref:`orm_event_toplevel`.

Version Changes
---------------

.. versionchanged:: 0.8
   The instrumentation extension system was moved out of the ORM and into the external :mod:`sqlalchemy.ext.instrumentation` package.

Related Components
------------------

The instrumentation system works closely with:

* :mod:`sqlalchemy.orm.state` - Per-instance state tracking
* :mod:`sqlalchemy.orm.attributes` - Per-class-attribute instrumentation
* :mod:`sqlalchemy.ext.instrumentation` - Custom instrumentation extension system

Customization
-------------

Custom instrumentation can be implemented using the :mod:`sqlalchemy.ext.instrumentation` extension package, which allows building and specifying alternate instrumentation forms.