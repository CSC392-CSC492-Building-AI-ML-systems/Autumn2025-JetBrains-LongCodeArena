Developing scikit-learn Estimators
==================================

This guide covers the development of scikit-learn compatible estimators, including multi-output estimators.

Minimum Dependencies
--------------------

When developing for scikit-learn, ensure compatibility with the following minimum dependency versions:

**Core Dependencies:**
- numpy>=1.17.3 (1.19.2 for PyPy)
- scipy>=1.5.0
- joblib>=1.1.1
- threadpoolctl>=2.0.0

**Development Dependencies:**
- pytest>=7.1.2
- cython>=0.29.33
- ruff>=0.0.272
- black>=23.3.0
- mypy>=1.3

Multi-Output Estimators
-----------------------

The multioutput module provides meta-estimators for multi-output regression and classification. These estimators extend single output estimators to handle multiple outputs.

### Base Abstract Class

The ``_MultiOutputEstimator`` class serves as the base for all multi-output estimators:

.. code-block:: python

    class _MultiOutputEstimator(MetaEstimatorMixin, BaseEstimator, metaclass=ABCMeta):
        _parameter_constraints: dict = {
            "estimator": [HasMethods(["fit", "predict"])],
            "n_jobs": [Integral, None],
        }
        
        @abstractmethod
        def __init__(self, estimator, *, n_jobs=None):
            self.estimator = estimator
            self.n_jobs = n_jobs

### Key Implementation Details

1. **Estimator Requirements**: The base estimator must implement ``fit`` and ``predict`` methods
2. **Parallel Processing**: Support for parallel execution via ``n_jobs`` parameter
3. **Cloning**: Estimators are cloned for each output using ``sklearn.base.clone``

### Available Multi-Output Estimators

- ``MultiOutputRegressor``: For multi-output regression tasks
- ``MultiOutputClassifier``: For multi-output classification tasks  
- ``ClassifierChain``: For classifier chains
- ``RegressorChain``: For regressor chains

### Helper Functions

The module provides utility functions for estimator management:

- ``_fit_estimator``: Clones and fits an estimator with optional sample weights
- ``_partial_fit_estimator``: Handles partial fitting with class support
- ``_available_if_estimator_has``: Checks if sub-estimators implement specific methods

### Metadata Routing

The implementation supports metadata routing for advanced use cases through:

- ``MetadataRouter``
- ``MethodMapping``  
- ``process_routing`` utilities

When developing new estimators, ensure compatibility with the minimum dependencies and follow the established patterns for meta-estimator implementation.