w_stateprobs
============

.. warning::
   This tool is being deprecated. Please use ``w_direct`` instead.

Calculate average populations and associated errors in state populations from
weighted ensemble data. Bin assignments, including macrostate definitions,
are required. (See "w_assign --help" for more information).

This tool is a wrapper around the ``w_direct trace`` subcommand for backwards
compatibility.

Output format
-------------

The output file (-o/--output, usually "stateprobs.h5") contains the following
dataset:

``/avg_state_pops [state]``
  (Structured -- see below) Population of each state across entire
  range specified.

If --evolution-mode is specified, then the following additional dataset is
available:

``/state_pop_evolution [window][state]``
  (Structured -- see below). State populations based on windows of
  iterations of varying width.  If --evolution-mode=cumulative, then
  these windows all begin at the iteration specified with
  --start-iter and grow in length by --step-iter for each successive
  element. If --evolution-mode=blocked, then these windows are all of
  width --step-iter (excluding the last, which may be shorter), the first
  of which begins at iteration --start-iter.

The structure of these datasets is as follows:

``iter_start``
  (Integer) Iteration at which the averaging window begins (inclusive).

``iter_stop``
  (Integer) Iteration at which the averaging window ends (exclusive).

``expected``
  (Floating-point) Expected (mean) value of the rate as evaluated within
  this window, in units of inverse tau.

``ci_lbound``
  (Floating-point) Lower bound of the confidence interval on the rate
  within this window, in units of inverse tau.

``ci_ubound``
  (Floating-point) Upper bound of the confidence interval on the rate
  within this window, in units of inverse tau.

``corr_len``
  (Integer) Correlation length of the rate within this window, in units
  of tau.

Each of these datasets is also stamped with a number of attributes:

``mcbs_alpha``
  (Floating-point) Alpha value of confidence intervals. (For example,
  *alpha=0.05* corresponds to a 95% confidence interval.)

``mcbs_nsets``
  (Integer) Number of bootstrap data sets used in generating confidence
  intervals.

``mcbs_acalpha``
  (Floating-point) Alpha value for determining correlation lengths.

Command-line Options
--------------------

See ``w_direct trace --help`` for available command-line options.