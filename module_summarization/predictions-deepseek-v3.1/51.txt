.. _gee_example:

Generalized Estimating Equations (GEE) Example
==============================================

This example demonstrates how to use the exponential family distributions from the GLM module within a Generalized Estimating Equations (GEE) framework. The Family class provides the foundation for various distribution families used in generalized linear models.

Basic Usage
-----------

First, import the necessary modules:

.. code-block:: python

    import numpy as np
    import statsmodels.api as sm
    from statsmodels.genmod.families import Family, Gaussian, Poisson, Binomial
    from statsmodels.genmod.families import varfuncs, links

Creating a Family Instance
--------------------------

The Family class serves as the base for specific distribution families. Here's how to create a custom family instance:

.. code-block:: python

    # Create a Gaussian family with identity link
    gaussian_fam = Gaussian(link=links.identity())
    
    # Create a Poisson family with log link
    poisson_fam = Poisson(link=links.log())
    
    # Create a Binomial family with logit link
    binomial_fam = Binomial(link=links.logit())

Working with GEE
----------------

The Family objects can be used within GEE models:

.. code-block:: python

    # Example with Gaussian family
    family = Gaussian()
    model = sm.GEE(endog, exog, groups, family=family)
    result = model.fit()
    
    # Example with Poisson family
    family = Poisson()
    model = sm.GEE(count_data, exog, groups, family=family)
    result = model.fit()

Key Methods
-----------

The Family class provides several important methods for GEE estimation:

- ``starting_mu(y)``: Provides initial values for the mean parameter
- ``weights(mu)``: Calculates weights for IRLS algorithm
- ``deviance()``: Computes the deviance for model evaluation
- ``resid_dev()``: Calculates deviance residuals
- ``fitted(lin_pred)``: Transforms linear predictors to mean values

Example with Custom Parameters
------------------------------

.. code-block:: python

    # Custom variance function and link
    custom_variance = varfuncs.constant
    custom_link = links.log()
    
    # Note: For actual usage, you would typically use specific family classes
    # rather than the base Family class directly
    model = sm.GEE(endog, exog, groups, 
                  family=Poisson(link=custom_link))
    result = model.fit()

See Also
--------

- :ref:`GLM documentation <glm>`
- :ref:`families documentation <families>`
- :ref:`links documentation <links>`
- :ref:`variance functions documentation <varfuncs>`