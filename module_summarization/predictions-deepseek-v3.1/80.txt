MapPlot
=======

The MapPlot module provides an interactive plotting interface for data cubes, allowing users to visualize spatial maps and interactively connect them with spectral plotting. While primarily designed for interactive analysis, it leverages APLpy for potential publication-quality figures.

Overview
--------
The MapPlotter class enables the creation of interactive map plots from data cubes. Users can click on map locations to display corresponding spectra, overplot multiple spectra, and perform circular region averaging. The module supports both APLpy-based plotting (for FITS data with WCS) and fallback matplotlib plotting.

Classes
-------

MapPlotter
^^^^^^^^^^
Main class for generating and managing interactive map plots.

**Initialization**:
    ``MapPlotter(Cube=None, figure=None, doplot=False, **kwargs)``
    
    - ``Cube``: Input data cube (optional)
    - ``figure``: matplotlib Figure object or figure number (optional)
    - ``doplot``: If True, immediately generate plot using mapplot()
    - ``kwargs``: Additional arguments passed to mapplot() if doplot=True

**Methods**:

``mapplot(convention='calabretta', colorbar=True, useaplpy=True, vmin=None, vmax=None, cmap=None, plotkwargs={}, **kwargs)``
    Generate the interactive map plot.
    
    Parameters:
    - ``convention``: Projection convention for Galactic data ('calabretta' or 'griesen')
    - ``colorbar``: Whether to display colorbar
    - ``useaplpy``: Use APLpy if available and header present
    - ``vmin``/``vmax``: Data range for colormap scaling
    - ``cmap``: Colormap specification
    - ``plotkwargs``: Additional arguments for APLpy/matplotlib plotting functions

Interactive Features:
- Left click (Button 1) or '1' key: Plot spectrum at clicked pixel
- Middle click (Button 2) or 'o' key: Overplot additional spectrum
- Right click (Button 3): Disconnect interactive mode
- Click-and-drag with Button 1: Average over circular region
- 'c' key: Set circle center
- 'r' key: Set circle radius

Dependencies
------------
- matplotlib
- numpy
- astropy (or pyfits/pywcs)
- APLpy (optional, for enhanced FITS plotting)

Note: The module gracefully falls back to basic matplotlib functionality if optional dependencies are not available.

Author: Adam Ginsburg (03/17/2011)