.. _table-data:

Table Data
==========

The Table Data module provides classes and utilities for handling tabular data structures, including verification mechanisms and notification systems for data changes.

Classes
-------

.. class:: VerifyError

   Exception class for verification errors.

.. class:: VerifyWarning

   Warning class for verification issues, inherits from `AstropyUserWarning`.

.. class:: _Verify

   Base class providing shared methods for data verification.

   .. method:: run_option(option="warn", err_text="", fix_text="Fixed.", fix=None, fixable=True)

      Execute verification with the specified option.

      :param option: Verification option (e.g., "warn", "fix", "exception").
      :param err_text: Error description text.
      :param fix_text: Text describing the fix applied.
      :param fix: Callable fix function.
      :param fixable: Boolean indicating if the error is fixable.
      :returns: Tuple (fixable, message).

   .. method:: verify(option="warn")

      Verify all values in the instance.

      :param option: Output verification option. Accepts values like "ignore", "warn", "exception", "fix", "silentfix", and combinations (e.g., "fix+warn").

.. class:: _ErrList

   A nested list structure for collecting verification error messages.

   .. method:: iter_lines(filter=None, shift=0)

      Iterate through nested error messages with proper indentation.

      :param filter: Optional filter function for messages.
      :param shift: Indentation level shift.

.. class:: NotifierMixin

   Mixin class enabling objects to register listeners for change notifications.

   .. method:: _add_listener(listener)

      Register a listener using a weak reference.

   .. method:: _notify(change_type, *args, **kwargs)

      Notify all listeners of a change by calling their corresponding `_update_<change_type>` method.

Verification Options
--------------------

The following verification options are supported:

- ``ignore``: No action taken.
- ``warn``: Issues warnings for errors.
- ``exception``: Raises exceptions for errors.
- ``fix``: Attempts to fix errors and reports actions.
- ``silentfix``: Fixes errors without reporting.
- Combinations like ``fix+ignore``, ``fix+warn``, ``fix+exception``, etc.

Usage Example
-------------

.. code-block:: python

   from astropy.io.fits import _Verify

   verifier = _Verify()
   verifier.verify(option='fix+warn')

Notes
-----

- The module uses zero-based indexing.
- Listeners in `NotifierMixin` are held via weak references and automatically cleaned up if no other references exist.
- Custom verification options can be implemented by extending the `_Verify` class.