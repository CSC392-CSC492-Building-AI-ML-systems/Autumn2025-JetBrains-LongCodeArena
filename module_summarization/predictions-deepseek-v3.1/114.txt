.. _simulation:

Simulation Module
=================

This module provides utilities for simulating, visualizing, and validating Bluesky run engine plans.

Functions
---------

.. py:function:: plot_raster_path(plan, x_motor, y_motor, ax=None, probe_size=None, lw=2)

   Plot the raster path for a Bluesky plan.

   :param plan: Must yield `Msg` objects and not be a co-routine
   :type plan: iterable
   :param x_motor: Name of the x motor
   :type x_motor: str
   :param y_motor: Name of the y motor
   :type y_motor: str
   :param ax: The axes to plot to, if none, make new figure + axes
   :type ax: matplotlib.axes.Axes, optional
   :param probe_size: If not None, use as radius of probe (in same units as motor positions)
   :type probe_size: float, optional
   :param lw: Width of lines drawn between points
   :type lw: float, optional
   :returns: Dictionary containing the path and events plot objects
   :rtype: dict

   This function traces the movement path of specified motors through a plan and creates
   a visualization showing the raster pattern. The plot includes line segments connecting
   measurement points and optional circular markers representing the probe size.

.. py:function:: summarize_plan(plan)

   Print summary of plan.

   :param plan: Must yield `Msg` objects
   :type plan: iterable

   Prints a minimal version of the plan, showing only moves and where events are created.
   Provides a high-level overview of the plan structure without detailed device-specific information.

.. py:function:: print_summary(plan)

   Alias for :py:func:`summarize_plan` for backward compatibility.

.. py:function:: check_limits(plan)

   Check that a plan will not move devices outside of their limits.

   :param plan: Must yield `Msg` objects
   :type plan: iterable

   Iterates through the plan and validates that all set commands move devices within their
   operational limits. Devices must implement a ``check_value()`` method for validation.
   Issues warnings for devices that lack limit checking capability.

Notes
-----

- All functions expect plans that yield Bluesky ``Msg`` objects
- The visualization functions require matplotlib to be installed
- Limit checking provides warnings but does not stop plan execution
- The module is designed for simulation and validation purposes before actual beamline execution

See Also
--------

- :ref:`bluesky documentation <bluesky:index>` for information about Bluesky plans and messages
- matplotlib documentation for customization of plot appearance