filenode
=======

.. module:: tables.file.filenode

The FileNode module provides a file interface for using inside of PyTables database files. Use the new_node() function to create a brand new file node which can be read and written as any ordinary Python file. Use the open_node() function to open an existing (i.e. created with new_node()) node for read-only or read-write access. Read access is always available. Write access (enabled on new files and files opened with mode 'a+') only allows appending data to a file node.

Currently only binary I/O is supported.

.. versionchanged:: 3.0
   In version 3.0 the module has been completely rewritten to be fully compliant with the interfaces defined in the :mod:`io` module.

Module Attributes
-----------------

.. data:: NodeType

   Value for NODE_TYPE node system attribute.

   :type: str

.. data:: NodeTypeVersions

   Supported values for NODE_TYPE_VERSION node system attribute.

   :type: list[int]

Classes
-------

.. autoclass:: RawPyTablesIO
   :members:
   :inherited-members:
   :show-inheritance:

   Base class for raw binary I/O on HDF5 files using PyTables.

   .. rubric:: Methods

   .. method:: __init__(node, mode=None)

      Initialize the raw I/O object.

      :param node: The PyTables node to use for I/O operations
      :param mode: File mode (defaults to node's file mode)

   .. method:: tell()

      Return current stream position.

      :returns: Current position in bytes
      :rtype: int

   .. method:: seek(pos, whence=0)

      Change stream position.

      :param pos: Position offset
      :param whence: Reference position (0=start, 1=current, 2=end)
      :returns: New absolute position
      :rtype: int
      :raises ValueError: If position or whence is invalid

   .. method:: seekable()

      Return whether object supports random access.

      :returns: True if seek operations are supported
      :rtype: bool

   .. method:: fileno()

      Returns underlying file descriptor if one exists.

      :returns: File descriptor number
      :rtype: int
      :raises IOError: If no file descriptor exists

   .. method:: close()

      Flush and close the IO object.

   .. method:: flush()

      Flush write buffers, if applicable.

   .. method:: truncate(pos=None)

      Truncate file to specified size.

      :param pos: Size to truncate to (defaults to current position)
      :returns: New file size
      :rtype: int
      :raises OSError: If attempting to shrink the file

   .. method:: readable()

      Return whether object was opened for reading.

      :returns: True if readable
      :rtype: bool

   .. method:: writable()

      Return whether object was opened for writing.

      :returns: True if writable
      :rtype: bool

   .. method:: readinto(b)

      Read up to len(b) bytes into buffer.

      :param b: Buffer to read into
      :returns: Number of bytes read
      :rtype: int

   .. method:: readline(limit=-1)

      Read and return a line from the stream.

      :param limit: Maximum number of bytes to read
      :returns: Bytes read
      :rtype: bytes

See Also
--------

:ref:`filenode_usersguide` - User guide for file node usage

Note
----

This module requires PyTables and is designed to work within HDF5 files managed by PyTables. All I/O operations are performed directly on the HDF5 storage without intermediate file system operations.