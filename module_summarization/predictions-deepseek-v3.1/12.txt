A quick dive into using the API
================================

This tutorial provides a quick introduction to using the ftrack API through practical examples and explanations of core concepts.

Getting Started
---------------

To begin using the ftrack API, you first need to create a Session instance, which serves as your main interface to the ftrack server:

.. code-block:: python

    import ftrack_api
    
    session = ftrack_api.Session(
        server_url='https://your-ftrack-server.com',
        api_key='your-api-key',
        api_user='your-username'
    )

Authentication
--------------

The Session uses API key authentication. You can either pass credentials directly or set them as environment variables:

- ``FTRACK_SERVER`` - The ftrack server URL
- ``FTRACK_API_KEY`` - Your API key
- ``FTRACK_API_USER`` - Your username

The authentication is handled internally using a custom requests auth class that adds the necessary headers to all HTTP requests.

Session Configuration
---------------------

The Session constructor supports several configuration options:

- ``auto_populate``: Automatically fetch entity attributes from server when accessed (default: True)
- ``plugin_paths``: Paths to search for event plugins
- ``cache``: Custom cache implementation following the Cache interface
- ``cache_key_maker``: Custom key generator for cache entries
- ``auto_connect_event_hub``: Automatically connect to event server (default: None)
- ``schema_cache_path``: Path for schema caching
- ``plugin_arguments``: Additional arguments to pass to plugins

Core Components
---------------

The Session manages several important components:

- **Operations**: Tracks changes made through the session via ``recorded_operations``
- **Cache**: Uses a layered caching system with memory cache at the top level
- **Event Hub**: Handles event publishing and subscription
- **Entity Factory**: Creates and manages ftrack entities

Basic Operations
----------------

Once you have a session, you can perform various operations:

.. code-block:: python

    # Query entities
    projects = session.query('Project').all()
    
    # Create new entities
    new_project = session.create('Project', {'name': 'New Project'})
    
    # Commit changes
    session.commit()

Remember to always call ``session.commit()`` to persist your changes to the server.

Cleanup
-------

When finished with a session, it's good practice to close it:

.. code-block:: python

    session.close()

This ensures proper cleanup of resources and connections.

Error Handling
--------------

The API raises specific exceptions for different error conditions. Always be prepared to handle ``ftrack_api.exception`` types when making API calls.

Next Steps
----------

After mastering basic session usage, explore:
- Advanced querying with filters and conditions
- Event handling and custom plugins
- Custom cache implementations
- Working with collections and relationships between entities

Refer to the full API documentation for detailed information about all available classes and methods.