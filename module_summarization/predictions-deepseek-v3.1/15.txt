`ploterr` Command Documentation
============================

The `ploterr` command generates plots of expectation values with confidence intervals from WESTPA analysis data. It supports both graphical output (via matplotlib) and text-based terminal output.

Subcommands
-----------

### generic

Plots generic expectation/CI data from an HDF5 file. A path to the HDF5 file and the dataset within it must be provided in the format **FILENAME/PATH[SLICE]**. If the dataset is not a vector (one dimensional), then a slice must be provided.

**Example**: To access the state 0 to state 1 rate evolution calculated by `w_kinavg`, use `kinavg.h5/rate_evolution[:,0,1]`.

Command-line Arguments
----------------------

**Input/Output Options**:
- `-o OUTPUT, --output OUTPUT`: Write plot to OUTPUT (default: errbars.pdf). The format is determined by the filename extension.
- `dsspec`: Data location specification formatted as FILENAME/PATH[SLICE]. FILENAME is the HDF5 file to read, PATH is the HDF5 path to the dataset, and SLICE (if provided) must be a Numpy-style slice that selects a vector of the appropriate data.

**Plot Options**:
- `--xscale {linear,log,symlog}`: Scaling for the x-axis (default: linear)
- `--yscale {linear,log,symlog}`: Scaling for the y-axis (default: linear)
- `--xrange XRANGE`: Restrict X range formatted as "xmin,xmax" (default: determined by data)
- `--yrange YRANGE`: Restrict Y range formatted as "ymin,ymax" (default: determined by data)
- `--xlabel XLABEL`: X-axis label (default: "Iteration")
- `--ylabel YLABEL`: Y-axis label (default: varies)
- `--title TITLE`: Plot title (default: varies)
- `-t, --terminal`: Plot output in terminal (useful when no display is available)

**Progress Options**:
- Standard progress indicator options for controlling output verbosity

Usage Examples
--------------

Plot rate evolution data with default settings:
```
w_ploterr generic kinavg.h5/rate_evolution[:,0,1]
```

Plot with logarithmic y-axis and custom output file:
```
w_ploterr generic --yscale log -o rate_plot.png kinavg.h5/rate_evolution[:,0,1]
```

Plot with custom axis ranges and labels:
```
w_ploterr generic --xrange "0,100" --yrange "0,0.5" --xlabel "Iteration" --ylabel "Rate (1/ns)" kinavg.h5/rate_evolution[:,0,1]
```

Data Requirements
-----------------

The dataset must contain the following fields:
- `iter_start`: Starting iteration numbers
- `iter_stop`: Ending iteration numbers  
- `expected`: Expected values
- `ci_lbound`: Confidence interval lower bounds
- `ci_ubound`: Confidence interval upper bounds

The dataset must be 1-dimensional after applying any specified slice.

Implementation Notes
--------------------

The command automatically detects whether a graphical display is available. If no display is detected (or when using `--terminal`), text-based output is generated instead of a graphical plot.

The plot displays:
- Expected values as a black line
- Confidence intervals as gray lines above and below the expected values