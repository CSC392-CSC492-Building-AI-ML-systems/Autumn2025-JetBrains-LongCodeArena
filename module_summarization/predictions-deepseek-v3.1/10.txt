Using metadata
==============

The ftrack API provides a flexible way to work with metadata through custom attributes and metadata dictionaries on entities.

Custom Attributes
-----------------
Custom attributes can be defined in the ftrack system and accessed through the API:

.. code-block:: python

    # Access custom attributes on an entity
    task = session.get('Task', 'task-id')
    custom_attributes = task['custom_attributes']
    
    # Get specific custom attribute value
    priority = custom_attributes.get('priority')

Entity Metadata
---------------
Entities can store metadata in their metadata dictionary:

.. code-block:: python

    # Access metadata on an entity
    metadata = task['metadata']
    
    # Set metadata values
    metadata['review_status'] = 'approved'
    metadata['last_reviewer'] = session.api_user
    
    # Commit changes to server
    session.commit()

Session Metadata
----------------
The session itself maintains metadata about the connection and operations:

.. code-block:: python

    # Access session information
    server_url = session.server_url
    api_user = session.api_user
    
    # Check operation recording status
    is_recording = session.record_operations

Environment Variables
---------------------
Metadata can also be configured through environment variables:

- ``FTRACK_SERVER`` - Server URL
- ``FTRACK_API_KEY`` - API key for authentication  
- ``FTRACK_API_USER`` - User for authentication
- ``FTRACK_API_SCHEMA_CACHE_PATH`` - Schema cache location

Authentication Metadata
-----------------------
Authentication headers are automatically added to requests:

.. code-block:: python

    # Authentication headers include
    # 'ftrack-api-key': api_key
    # 'ftrack-user': api_user

The session uses these metadata points to manage connections, authentication, and entity operations with the ftrack server.