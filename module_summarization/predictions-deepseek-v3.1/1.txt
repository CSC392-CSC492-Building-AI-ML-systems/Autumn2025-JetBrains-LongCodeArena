Using Custom Attributes
========================

The ftrack API supports working with custom attributes on entities. Custom attributes allow you to extend the default schema with your own metadata fields to suit your specific workflow needs.

Creating Custom Attributes
--------------------------

Custom attributes can be created through the API by defining them on entity types. Here's a basic example:

.. code-block:: python

    # Create a custom attribute on the Task entity
    task_type = session.query('Type where name is "Task"').one()
    custom_attribute = {
        'type': 'text',
        'name': 'my_custom_field',
        'label': 'My Custom Field',
        'config': json.dumps({'is_hierarchical': False})
    }
    task_type['custom_attributes'].create(custom_attribute)
    session.commit()

Working with Custom Attribute Values
------------------------------------

Once custom attributes are defined, you can set and retrieve values on entities:

.. code-block:: python

    # Set custom attribute value
    task = session.query('Task where name is "My Task"').one()
    task['custom_attributes']['my_custom_field'] = 'Some value'
    session.commit()

    # Retrieve custom attribute value
    value = task['custom_attributes']['my_custom_field']
    print(value)  # Output: 'Some value'

Attribute Types
---------------

The API supports various custom attribute types including:

- Text attributes
- Number attributes
- Date attributes
- Boolean attributes
- Enumerated types (dropdown lists)
- Dynamic enumerations

Each type has specific configuration options that can be set during creation.

Querying with Custom Attributes
-------------------------------

You can query entities based on custom attribute values:

.. code-block:: python

    # Find tasks with specific custom attribute value
    tasks = session.query(
        'Task where custom_attributes.my_custom_field is "Some value"'
    ).all()

Best Practices
--------------

- Always validate custom attribute names before using them
- Use descriptive labels for better UI integration
- Consider hierarchical attributes for parent-child value inheritance
- Test attribute configurations thoroughly before deploying to production

Note: Custom attributes must be defined in the schema before they can be used on entities. Changes to custom attribute definitions may require schema updates and should be handled carefully in production environments.