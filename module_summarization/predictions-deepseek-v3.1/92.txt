.. _distutils-module:

distutils
=========

The `distutils` module provides a set of utility functions and classes for building and installing Python packages, particularly those with compiled extensions. It includes functionality for path manipulation, build configuration, temporary directory management, and parallel job handling.

Module Contents
---------------

Classes
~~~~~~~

.. class:: InstallableLib(name, build_info, target_dir)

   Container to hold information on an installable library.

   :param str name: Name of the installed library.
   :param dict build_info: Dictionary holding build information.
   :param str target_dir: Absolute path specifying where to install the library.

   .. seealso:: :meth:`Configuration.add_installed_library`

   .. note:: The three parameters are stored as attributes with the same names.

Functions
~~~~~~~~~

.. function:: get_num_build_jobs()

   Get number of parallel build jobs set by the ``--parallel`` command line argument of setup.py. If the command did not receive a setting, the environment variable ``NPY_NUM_BUILD_JOBS`` is checked. If that is unset, returns the number of processors on the system, with a maximum of 8.

   :returns: Number of parallel jobs that can be run.
   :rtype: int

.. function:: quote_args(args)

   .. deprecated:: 1.22

   Quote list of arguments.

.. function:: allpath(name)

   Convert a /-separated pathname to one using the OS's path separator.

   :param str name: Path to convert.
   :returns: Converted path.
   :rtype: str

.. function:: rel_path(path, parent_path)

   Return path relative to parent_path.

   :param str path: Target path.
   :param str parent_path: Reference parent path.
   :returns: Relative path from parent_path to path.
   :rtype: str

.. function:: get_path_from_frame(frame, parent_path=None)

   Return path of the module given a frame object from the call stack. Returned path is relative to parent_path when given, otherwise it is absolute path.

   :param frame: Frame object from call stack.
   :param str parent_path: Optional parent path for relative calculation.
   :returns: Module path.
   :rtype: str

.. function:: njoin(*path)

   Join two or more pathname components, convert /-separated paths to OS-specific separators, and resolve ``..`` and ``.`` from path. Handles both multiple arguments and sequences.

   :param path: Path components to join.
   :returns: Normalized joined path.
   :rtype: str

Module-level Variables
~~~~~~~~~~~~~~~~~~~~~~

.. data:: __all__

   List of public objects exported by this module.

Temporary Directory Management
------------------------------

The module maintains thread-local temporary directories that are automatically cleaned up on program exit. The cleanup function ``clean_up_temporary_directory`` is registered with ``atexit``.

Notes
-----

- The module includes various utility functions for path manipulation and build configuration
- Thread-safe temporary directory management is provided
- Parallel build job calculation considers both command-line arguments and system capabilities
- Several functions handle both string and sequence inputs for path operations

See Also
--------

- :mod:`distutils.core` : Core Distutils functionality
- :mod:`distutils.util` : Additional utility functions