The Metadata Routing API
========================

Overview
--------
The Metadata Routing API provides lightweight utilities for routing metadata and configuration to sub-estimators inside meta-estimators. It enables centralized control over how sub-estimators receive parameters and how their methods (e.g., fit, predict) are invoked in different contexts.

Public API
----------
- MetadataRouter
  A class that encapsulates routing rules for metadata to sub-estimators. It defines how certain metadata keys should be routed to underlying estimators or methods.
  Usage is typically in the context of meta-estimators that manage multiple sub-estimators and need consistent routing of configuration or metadata.

- MethodMapping
  A data structure describing how a method call or metadata key should be mapped to the corresponding method or attribute on sub-estimators. This mapping guides how routing is applied during operations like fit, predict, or transform.

- process_routing
  A function that applies a routing specification to a target object (e.g., an estimator or its parameters). It orchestrates how routed metadata flows to the appropriate sub-estimators or methods.

- _routing_enabled
  Internal helper that checks whether routing is currently enabled for a given object. This is used to guard routing logic and avoid unnecessary processing when routing is not active.

- _raise_for_params
  Internal validation helper that ensures provided routing parameters are valid and allowed. It raises informative errors if invalid routing configurations are supplied.

Usage notes
-----------
- The API is designed for use within meta-estimators that combine multiple sub-estimators. It centralizes and normalizes how metadata and parameters are passed through to the sub-estimators.
- While primarily intended for internal use, the API can be leveraged by advanced users who implement custom meta-estimators requiring coordinated routing of configuration or metadata.

Example
-------
An illustrative (pseudo) example of wiring routing rules with the API:

- Create a MetadataRouter with a MethodMapping describing how parameters map to sub-estimators.
- Use process_routing to apply the routing rules when calling fit or predict on the meta-estimator.
- Check routing status with _routing_enabled and validate parameters with _raise_for_params.

See also
--------
- MultiOutput estimators and other meta-estimators that rely on routing metadata to underlying sub-estimators.
- Other utilities in the metadata and routing ecosystem that support flexible and consistent estimator configuration.