w_crawl
=========

Crawl a weighted ensemble dataset, executing a function for each iteration. This can be used for postprocessing of trajectories, cleanup of datasets, or anything else that can be expressed as "do X for iteration N, then do something with the result". Tasks are parallelized by iteration, and no guarantees are made about evaluation order.

Usage
-----

w_crawl [OPTIONS] TASK_CALLABLE

Description
-----------

This command runs a user-supplied callable on every iteration of a WESTPA dataset. Each iteration N is processed by applying TASK_CALLABLE to the iteration data (passed as an iter_group). The function is executed in parallel across iterations. The order of completion is not guaranteed.

An optional crawler instance (CRAWLER_INSTANCE) can coordinate initialization, finalization, and per-result processing. If no crawler is provided, a no-op crawler is used.

The per-iteration callable must have the signature:
- TASK_CALLABLE(n_iter, iter_group) -> result

Where iter_group is the iteration group data retrieved from the data manager for iteration n_iter.

Implementation details: Each iteration is dispatched as a remote task that opens the dataset in read mode and calls the user function with (n_iter, iter_group). Results are then handed to the crawler's process_iter_result(n_iter, result).

Options
-------

- -c, --crawler-instance
  Use CRAWLER_INSTANCE (specified as module.instance) as an instance of WESTPACrawler to coordinate initialization, finalization, or task result processing. Required only if initialization, finalization, or result processing is needed.

- TASK_CALLABLE
  Run TASK_CALLABLE (specified as module.function) on each iteration. Required.

- Data reading and iteration range options
  Options provided by WESTDataReader and IterRangeSelection (via add_args from these components) to select the dataset and the range of iterations to crawl.

Progress
--------

A progress indicator is shown during initialization, dispatching tasks, processing results, and finalization.

Notes
-----

- Tasks run in parallel by iteration; no guarantees about the order of completion.
- If you need custom setup/teardown or per-result handling, supply a WESTPACrawler instance.