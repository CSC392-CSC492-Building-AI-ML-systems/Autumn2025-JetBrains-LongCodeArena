How to Generate Schema
======================

Overview
--------
This module provides utilities to generate and apply the SQL schema for a database
based on a Tortoise ORM client. It exposes two helpers:

- get_schema_sql(client, safe): returns the SQL string to create the schema.
- generate_schema_for_client(client, safe): asynchronously generates and applies the schema.

API
---

get_schema_sql(client, safe)
~~~~~~~~~~~~~~~~~~~~~~~~~~
- Purpose: Return the SQL to create the schema for the given client.
- Parameters:
  - client: BaseDBAsyncClient instance (the database client).
  - safe: bool. If true, uses safe create semantics (CREATE TABLE IF NOT EXISTS).
- Returns: str â€” the SQL statements for creating the schema.
- Implementation detail: calls client.schema_generator(client).get_create_schema_sql(safe)

generate_schema_for_client(client, safe)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- Purpose: Generate and apply the SQL schema to the database.
- Parameters:
  - client: BaseDBAsyncClient instance.
  - safe: bool (as above).
- Returns: None (async)
- Implementation detail:
  - generator = client.schema_generator(client)
  - schema = get_schema_sql(client, safe)
  - logs the schema at debug level: "Creating schema: %s"
  - if schema is non-empty, calls await generator.generate_from_string(schema)

Usage examples
--------------

.. code-block:: python

   from your_module import get_schema_sql, generate_schema_for_client

   # Get the SQL for the schema
   sql = get_schema_sql(client, safe=True)

   # Generate and apply the schema to the database
   await generate_schema_for_client(client, safe=True)

Notes
-----
- The code uses TYPE_CHECKING to annotate the BaseDBAsyncClient type for type checkers only.
- The actual BaseDBAsyncClient provides a schema_generator(client) factory that yields an object
  capable of producing the SQL and applying it via generate_from_string.