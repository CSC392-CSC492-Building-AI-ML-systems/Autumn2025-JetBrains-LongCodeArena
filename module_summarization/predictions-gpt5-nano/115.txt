Asdf Configuration API
======================

Overview
--------
This module provides the global configuration container and helpers used to
get and modify ASDF-wide settings. The public API is exposed through
the AsdfConfig class and module-level helpers such as get_config and
config_context. Configuration is designed to be lazy-initialized and thread-safe.

Constants
---------
- DEFAULT_VALIDATE_ON_READ
  Default value for whether to validate data on read operations (True).

- DEFAULT_DEFAULT_VERSION
  Default ASDF Standard version used for new files
  (taken from versioning.default_version and coerced to a string).

- DEFAULT_LEGACY_FILL_SCHEMA_DEFAULTS
  Default for whether to fill missing schema defaults for legacy behavior
  (True).

- DEFAULT_IO_BLOCK_SIZE
  Default block size for IO operations; -1 means auto-detect the filesystem's
  preferred block size.

- DEFAULT_ARRAY_INLINE_THRESHOLD
  Threshold for inlining arrays; None means no explicit threshold.

AsdfConfig
----------
Container for ASDF configuration options. Instances should not be constructed
directly by users; instead, obtain the config via asdf.get_config or
asdf.config_context.

Initialization and Thread-Safety
- The configuration stores internal state in private attributes:
  _resource_mappings, _resource_manager, _extensions, _validate_on_read,
  _default_version, _legacy_fill_schema_defaults, _io_block_size, and
  _array_inline_threshold.
- A re-entrant lock (_lock) guards lazy initialization and mutation to ensure
  thread-safety.

Resource Mappings
- resource_mappings (property)
  Returns the list of registered resource mapping instances. By default, this list
  is populated from entry points. Access is lazy and thread-safe.

- add_resource_mapping(mapping)
  Register a new resource mapping. The new mapping takes precedence over all
  previously registered mappings and is inserted at the start of the list.

- remove_resource_mapping(mapping=None, *, package=None)
  Remove resource mappings based on the provided mapping or package. Must specify
  at least one of mapping or package.

- reset_resources()
  Reset to the default list provided by entry points.

- resource_manager (property)
  Returns the asdf.resource.ResourceManager instance, which includes resources
  from registered mappings and any runtime-added mappings. Built lazily.

Extensions
- extensions (property)
  Returns the list of registered extensions (Endpoint-based extensions are loaded
  from entry points by default).

- add_extension(extension)
  Register a new extension. The new extension takes precedence over previously
  registered extensions.

- remove_extension(extension=None, *, package=None)
  Remove extensions by exact extension instance or by URI pattern (string),
  or by package. Must specify at least one of extension or package.

- reset_extensions()
  Reset extensions to the default list from entry points.

- Extension handling uses ExtensionProxy.maybe_wrap to normalize inputs.

Default Version and IO
- default_version (property)
  Get or set the default ASDF Standard version used for new files. Setting a value
  passes through validate_version to ensure a valid version string.

- io_block_size (property)
  Get or set the block size used for IO operations. A value of -1 defers to the
  filesystem's preferred block size.

Notes
- The design is oriented toward lazy loading and thread-safe mutations.
- The public API emphasizes using the provided get_config and config_context
  helpers to access and modify the global configuration.

See Also
--------
- asdf.get_config
- asdf.config_context
- asdf.entry_points
- asdf.util
- asdf.versioning
- asdf.resource.ResourceManager
- asdf.resource.ResourceMappingProxy
- asdf.extension.ExtensionProxy

Usage Example
-------------
import asdf

config = asdf.get_config()
config.add_resource_mapping(my_mapping)
config.default_version = "3.0.0"
config.io_block_size = 4096

# Use a config context to temporarily override settings
with asdf.config_context(my_config):
    ...  # operations with temporary overrides ...