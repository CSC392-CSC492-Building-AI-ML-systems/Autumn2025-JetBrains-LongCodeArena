Resources
=========

Support for plugins that provide access to resources such as schemas.

Exported API
------------

- DirectoryResourceMapping
- ResourceMappingProxy
- ResourceManager
- JsonschemaResourceMapping
- get_json_schema_resource_mappings

DirectoryResourceMapping
------------------------

A resource mapping that reads resource content from a directory or directory tree.

- See: asdf_standard.resource.DirectoryResourceMapping for details.

ResourceMappingProxy
--------------------

Wrapper around a resource mapping that carries additional information about the providing package.

Class methods and construction
- maybe_wrap(delegate)
  - If the delegate is already a ResourceMappingProxy, returns it unchanged; otherwise wraps it in a new ResourceMappingProxy.
- __init__(delegate, package_name=None, package_version=None)
  - Validates that delegate implements the Mapping interface.
  - Stores the delegate and optional package metadata.
  - Records the fully qualified class name of the delegate.

Mapping interface
- __getitem__(uri)
- __len__()
- __iter__()

Properties
- delegate
  - Returns the wrapped Mapping instance.
- package_name
  - Name of the Python package that provided the mapping (or None if added at runtime).
- package_version
  - Version of the providing package (or None if added at runtime).
- class_name
  - Fully qualified class name of the mapping.

Equality and representation
- __eq__(other)
  - Two proxies are equal if their delegated mappings are the same object.
- __hash__()
  - Hash based on the id of the delegate.
- __repr__()
  - Includes class name, package description (name and version if available), and the number of items.

ResourceManager
---------------

Wraps multiple resource mappings into a single interface with friendly error handling.

Constructor
- __init__(resource_mappings)
  - Accepts an iterable of mappings.
  - Builds an internal index (_mappings_by_uri) mapping each URI to the first mapping that provides it (first-wins precedence).

Lookup and queries
- __getitem__(uri)
  - Returns the content for the given URI from the mapping that provides it.
  - If the content is a str, it is encoded to UTF-8 bytes.
  - Raises KeyError if the URI is not available.

Other
- __len__()
- __iter__()
- __contains__(uri)

Representation
- __repr__()
  - Shows the number of resources managed.

JsonschemaResourceMapping
-------------------------

Resource mapping that fetches metaschemas from the jsonschema package.

Internal data
- _JSONSCHEMA_URI_TO_FILENAME
  - Mapping from JSON Schema URIs to resource filenames (e.g., "http://json-schema.org/draft-04/schema" -> "draft4.json").

API
- __getitem__(uri)
  - Looks up the filename via _JSONSCHEMA_URI_TO_FILENAME and returns the corresponding data using pkgutil.get_data("jsonschema", f"schemas/{filename}").
- __len__()
- __iter__()
- __repr__()

get_json_schema_resource_mappings
-------------------------------

Factory function returning available JSON Schema resource mappings.

- Returns: a list containing a single JsonschemaResourceMapping instance.