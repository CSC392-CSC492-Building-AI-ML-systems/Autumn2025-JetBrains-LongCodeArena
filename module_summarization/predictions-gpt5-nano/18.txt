w_bins
======

Display information and statistics about binning in a WEST simulation, or modify the binning for the current iteration of a WEST simulation.

Usage
-----
w_bins info [OPTIONS]
w_bins rebin [OPTIONS]

Subcommands
-----------

info
^^^^

Display information about current binning and per-bin statistics for the specified iteration.

Options
^^^^^^^

- -n, --n-iter N_ITER
  Consider the initial points of segment N_ITER (default: the current iteration).

- --detail
  Display detailed per-bin information in addition to summary information.

Bin mapping options
^^^^^^^^^^^^^^^^^^^
Binning-related options are provided by the BinMappingComponent. These control how points are binned and how mappings are interpreted and displayed. For the info subcommand, these options allow you to customize which bins are considered and how their information is presented.

Notes
^^^^^
- The information is computed from the chosen iteration’s initial points, using the current bin mapper to assign those points to bins. Bin counts and, if available, weights are obtained from the iteration group data and printed via the bin information writer.

rebin
^^^^^

Rebuild the current iteration using a (possibly) new binning strategy.

Options
^^^^^^^

- --confirm
  Commit the revised iteration to the WEST HDF5 store; without this flag, the changes are calculated and printed but not saved.

- --detail
  Display detailed per-bin information in addition to summary information.

- -n, --n-iter N_ITER
  Consider initial points of segment N_ITER (default: current iteration).

Bin mapping options
^^^^^^^^^^^^^^^^^^^
Bin mapping-related options are provided by the BinMappingComponent. In rebin, the option --bins-from-file is suppressed, as the mapping is applied to the current operation rather than loaded from an external file in this step. Other binning options and target-count settings (added via add_target_count_args) influence how many walkers are assigned to each bin and how new iterations are formed.

Process and behavior
^^^^^^^^^^^^^^^^^^^^
- The rebin operation bin-sorts the current iteration’s initial points according to the bin mapper, creates a new iteration with the appropriate initial states and target counts, and computes the resulting bin assignments and weights. The information is printed for review.

- If --confirm is specified, the newly formed iteration is written to the HDF5 store, initial states are updated, and the backing data is flushed to disk.

Output
^^^^^^
Bin information for the specified iteration is printed. When performing a rebin, a detailed breakdown of per-bin information (if --detail is provided) is displayed, followed by a summary of the new/updated binning. If --confirm is used, the updated iteration is saved to disk and the binning state is recorded.

Examples
--------

- Show binning information for the current iteration with detailed per-bin data:
  w_bins info --detail

- Rebin the current iteration with a new mapping and print details, but do not save:
  w_bins rebin --n-iter 5 --detail

- Rebin the current iteration with confirmation to save changes:
  w_bins rebin --confirm --n-iter 5

Notes
-----
- The command relies on WESTDataReader for reading simulation data and BinMappingComponent for bin mapping logic. Global options from the data reader and binning options from the bin mapper are available as described above.
- The entry point for the command calls the tool’s main routine (see the WBinTool class).