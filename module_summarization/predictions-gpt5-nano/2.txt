Encoding media
==============

Overview
--------
Encoding media in the ftrack workflow converts source media assets into delivery-ready formats. The encoding process may apply format conversion, codec selection, resolution and frame-rate adjustments, and audio configuration. Encoded outputs are produced as new media assets that can be attached to existing ftrack resources.

Supported formats and codecs
----------------------------
Common targets include:
- Video: MP4 (H.264/AAC), WebM (VP9/Opus)
- Audio: MP3, AAC, WAV
- Image sequences (extracted frames) when applicable

Options typically supported
----------------------------
- Target format and container (e.g., mp4, mov, webm)
- Video codec and quality settings (e.g., h264, hevc, bitrate, profile)
- Audio codec and quality settings (e.g., aac, mp3, bitrate, channels)
- Resolution, aspect ratio, and frame rate
- Audio sample rate
- Overwrite behavior and file naming
- Metadata preservation or reset
- Preservation of color space and color metadata (where supported)

Usage model
-----------
Encoding is invoked with a source media path and a target output path, with optional parameters to control the encoding recipe. The process returns the path to the encoded file and may attach or link the result to an ftrack asset.

Typical workflow
- Prepare source media and determine delivery requirements
- Choose target format, codecs, and encoding parameters
- Run encoding to produce the encoded asset
- Validate playback and quality
- Attach the encoded asset to the corresponding ftrack entity (version, asset, or scene)

API reference (intended)
------------------------
Note: The actual implementation may expose a function such as encode_media(input_path, output_path, options) along with helpers like probe_media(path) to inspect media properties and list_supported_formats() to enumerate available encoding targets. The documented API should detail:
- Input arguments and defaults
- Return values (e.g., output path)
- Error handling and common exceptions
- Examples of how to integrate with the ftrack asset lifecycle

Examples
--------
- Basic MP4 encoding:
  - input: /path/to/source.mov
  - output: /path/to/output.mp4
  - options: format=mp4, video_codec=h264, audio_codec=aac

- WebM output with reduced bitrate for web delivery:
  - input: /path/to/source.mkv
  - output: /path/to/output.webm
  - options: format=webm, video_codec=vp9, bitrate=1500k

See also
--------
- ftrack API: asset and version management
- Media processing tools and codecs conventions
- Validation and testing strategies for encoded media