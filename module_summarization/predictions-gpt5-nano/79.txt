GILDAS CLASS file reader
=========================

Read a CLASS file into an :class:`pyspeckit.spectrum.ObsBlock`.

Overview
--------
This module provides utilities and data structures to parse GILDAS CLASS files and convert them into a PySpeckit ObsBlock. It exposes helpers for handling byte strings, timing, and a collection of mappings describing the CLASS file header and record layout.

Public API
----------
print_timing(func)
    Decorator that prints the execution time of a function. Useful for long CLASS-file reads.

ensure_bytes(string)
    Ensure a given string is in byte form. Handles Python 2/3 differences.

Constants and mappings
----------------------
filetype_dict
    Mapping from CLASS filetype tags to internal descriptions. Example:
    '1A  ' -> 'Multiple_IEEE'.

fileversion_dict
    Mapping from CLASS file version tags to version strings. Example:
    '1A  ' -> 'v1'.

record_lengths
    Mapping of record type prefixes to their byte lengths. Example:
    '1A' -> 512, '2A' -> 4096.

header_id_numbers
    Mapping from numeric header IDs to human-readable section names.

header_id_lengths
    Mapping from specific header IDs to their fixed lengths (None when variable).

keys_lengths
    Specification of the header "keys" for each section. Each entry is a list of
    tuples (name, count, type) describing the fields present in that header.

    - 'unknown': default field layout for an unknown header
        (NUM, VER, TELES, DOBS, DRED, TYPEC, KIND, QUAL, SCAN, SUBSCAN)
    - 'COMMENT': fields describing the length and text of a comment
    - 'GENERAL': fields describing general observation metadata (UT, ST, AZ, EL, TAU, TSYS, TIME, etc.)

GENERAL block specification (as used in the module)
---------------------------------------------------
This string describes the Fortran-like GENERAL block layout used by the CLASS
file. It lists the fields, their kinds, and intended meanings, such as:
- Observation number (UT of observation, ST of observation)
- Coordinates and quality flags
- Instrumentation and timing (TAU, TSYS, TIME)

.. code-block:: text

   GENERAL
    integer(kind=obsnum_length) :: num     ! [         ] Observation number
    integer(kind=4)             :: ver     ! [         ] Version number
    integer(kind=4)             :: teles(3)! [         ] Telescope name
    integer(kind=4)             :: dobs    ! [MJD-60549] Date of observation
    integer(kind=4)             :: dred    ! [MJD-60549] Date of reduction
    integer(kind=4)             :: typec   ! [     code] Type of coordinates
    integer(kind=4)             :: kind    ! [     code] Type of data
    integer(kind=4)             :: qual    ! [     code] Quality of data
    integer(kind=4)             :: subscan ! [         ] Subscan number
    integer(kind=obsnum_length) :: scan    ! [         ] Scan number
    ! Written in the entry
    real(kind=8)                :: ut      ! 1-2 [  rad] UT of observation
    real(kind=8)                :: st      ! 3-4 [  rad] LST of observation
    real(kind=4)                :: az      ! 5   [  rad] Azimuth
    real(kind=4)                :: el      ! 6   [  rad] Elevation
    real(kind=4)                :: tau     ! 7   [neper] Opacity
    real(kind=4)                :: tsys    ! 8   [    K] System temperature
    real(kind=4)                :: time    ! 9   [    s] Integration time
    ! Not in this section in file
    integer(kind=4)             :: xunit   ! [ code] X unit (if X coordinates section is present)
    ! NOT in data ---
    character(len=12)           :: cdobs   ! [string] Duplicate of dobs
    character(len=12)           :: cdred   ! [string] Duplicate of dred

Notes
-----
- This module is designed to support reading GILDAS CLASS files into PySpeckit
  ObsBlock objects. The actual parsing entry points (functions that perform the
  file I/O and conversion) are defined elsewhere in the full project; this file
  provides the core constants, helpers, and layout specifications used by the
  parser.
- Dependencies include: six, numpy, astropy, and pyspeckit.

See Also
--------
pyspeckit.spectrum.ObsBlock

Examples
--------
Example usage (conceptual):
- Access the header layout via the provided dictionaries to interpret a CLASS
  file header as you parse it.
- Use ensure_bytes to normalize keys before lookup in the filetype_dict or
  fileversion_dict.