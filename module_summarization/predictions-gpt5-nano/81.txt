SimpleFitter wrapper
====================

Adds a variable height (background) component to any model.

Public API
----------

SimpleFitter
~~~~~~~~~~~~
- __init__(self)
  Initialize a SimpleFitter instance.

- moments(self, *args, **kwargs)
  Get the spectral moments from the moments package.

vheightmodel
~~~~~~~~~~~~
- vheightmodel(zeroheightmodel)
  Returns a wrapper function vhm that adds a variable height component to the given zero-height model.

  The wrapped function has the signature: vhm(xax, *pars, **kwargs)

  Description
  - Parameter order: height, amplitude, shift, width
  - If vheight is True (default) or not overridden, returns zeroheightmodel(xax, *pars[1:], **kwargs) + pars[0]
  - If vheight is False, returns zeroheightmodel(xax, *pars[1:], **kwargs)

  Notes
  - vhm.__doc__ is extended with zeroheightmodel.__doc__

Generic SpectralModel wrapper
=============================

.. moduleauthor:: Adam Ginsburg <adam.g.ginsburg@gmail.com>

Module API
^^^^^^^^^^

Global definitions
------------------
- valid_guess_types = ('amplitude', 'center', 'width')

- SpectralModel
  A wrapper class for a spectra model. Includes internal functions to
  generate multi-component models, annotations, integrals, and individual
  components. The declaration can be complex, since you should name
  variables, set limits on them, set the units the fit will be performed in,
  and set the annotations to be used.

Class: SpectralModel
~~~~~~~~~~~~~~~~~~~
Inherits from: fitter.SimpleFitter

Overview
- Provides a framework for building spectral models with customizable
  parameter information, units, and guessing strategies.
- Supports multi-component models, parameter annotations, and analytical
  behavior for integrals and line shapes.

Constructor
-----------
__init__(self, modelfunc, npars,
         shortvarnames=("A","\\Delta x","\\sigma"),
         fitunit=None,
         centroid_par=None,
         fwhm_func=None,
         fwhm_pars=None,
         integral_func=None,
         use_lmfit=False,
         guess_types=('amplitude', 'center', 'width'),
         **kwargs)

Parameters
----------
- modelfunc : callable
  The model function to be fitted. Should take an X-axis (spectroscopic
  axis) as input followed by parameters and return an array with the same
  shape as the input axis.

- npars : int
  Number of parameters required by the model.

- shortvarnames : tuple, optional
  TeX names of the variables to use when annotating. Default: ("A","\\Delta x","\\sigma").

- fitunit : str, optional
  X-axis units to convert before passing to the model.

- centroid_par : str, optional
  Default name of the parameter that represents the model centroid.

- fwhm_func : callable, optional
  Function to compute FWHM and related parameters.

- fwhm_pars : any, optional
  Parameters for the FWHM function.

- integral_func : callable, optional
  Analytic integral function for the model.

- use_lmfit : bool, optional
  If True, use lmfit instead of mpfit for fitting.

- guess_types : tuple, optional
  Types of parameters to guess (e.g., ('amplitude','center','width')).

- kwargs : dict, optional
  Additional keyword arguments for parameter info (parinfo).

Public methods
--------------
- __copy__(self)
  Shallow copy support for the SpectralModel instance.

- __deepcopy__(self, memo)
  Deep copy support for the SpectralModel instance.

- __call__(self, *args, **kwargs)
  Invoke the model fitting routine. Logs input arguments and selects
  fitting backend (lmfit/mpfit) based on kwargs or defaults.

Notes
-----
- The module relies on various parts of pyspeckit (mpfit, Parinfo),
  numpy, copy, and other utilities.
- The class stores the model function, parameter info, and fitting
  configuration to enable flexible construction of complex spectral models.

Additional context
------------------
- The module includes imports for handling parameter information, logging,
  warnings, and axis units, enabling integration with broader fitting
  workflows.