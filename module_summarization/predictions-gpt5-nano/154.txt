Connecting Steps Together
==========================

Overview
--------

In this system, building a workflow means connecting the outputs of one step to the inputs of another. Each step declares its inputs and outputs, and connections are represented by Edge objects that tie a source output to a destination input.

What a Step is
--------------

- A Step represents a unit of work loaded from a configure.yml file.
- Each Step defines:
  - name
  - inputs (optional)
  - outputs (optional)
  - commands to run (defaulting to a no-op if not provided)
- Steps expose helper methods to reference their interfaces:
  - Input handles: get_input_handle / i(name)
  - Output handles: get_output_handle / o(name)
  - Lists of handles: all_input_handles / all_output_handles

What an Edge is
--------------

- An Edge represents a connection from a source step’s output to a destination step’s input.
- Edge is constructed with two handles:
  - src: an output handle (step_o) from the producing step
  - dst: an input handle (step_i) from the consuming step
- Handles are tuples of the form:
  - (step_name, 'outputs', output_name) for sources
  - (step_name, 'inputs', input_name) for destinations

Creating connections
--------------------

- To connect two steps, create an Edge using their appropriate handles.

.. code-block:: python

   from edge import Edge
   from step import Step

   # Create two steps
   a = Step('steps/stepA')
   b = Step('steps/stepB')

   # Connect output 'out' of stepA to input 'in' of stepB
   edge = Edge(a.o('out'), b.i('in'))

   # Alternatively, use handles directly
   src = a.o('out')
   dst = b.i('in')
   edge = Edge(src, dst)

Inspecting handles
------------------

- Get a specific handle:
  - a.i('input_name')  # input handle for step a
  - a.o('output_name') # output handle for step a
- List all handles for a step:
  - a.all_input_handles()
  - a.all_output_handles()

Notes
-----

- Step.get_input_handle and Step.get_output_handle will validate the existence of the specified input or output.
- Steps may extend their inputs/outputs or pre/post extend their commands as needed before wiring the graph.

Example scenario
--------------

- Step A provides data on output 'data_out'.
- Step B consumes data on input 'data_in'.
- Connect Step A to Step B using an Edge as shown above.
- The graph now has a directed data flow from A to B via the connected edge.