Create Cradmin Menu System
==========================

Overview
--------
This document describes the Cradmin menu system used to render navigation items in the Cradmin admin UI. The system is built around renderable classes that map to specific menu items and their presentation. A default expandable menu can be created dynamically via a configured class, and various renderables provide common menu item primitives (links, buttons, expandable items, and separators).

Configuration and factory
-------------------------
- get_default_expandable_menu_renderable(**kwargs)
  - Returns the default expandable menu renderable instance, created from the Django setting
    DJANGO_CRADMIN_DEFAULT_EXPANDABLE_MENU_CLASS.
  - Behavior:
    - If the setting is not configured, returns None.
    - If configured, imports the class using import_string and instantiates it with the provided kwargs.
  - Returns: An instance of AbstractMenuRenderable (or a subclass), or None.

Renderable primitives
---------------------
Base and common behavior:
- All renderables derive from Cradmin’s renderable base classes and use BEM-style blocks/elements for CSS classes.
- Templates are provided for each renderable to render HTML, keeping presentation consistent with the Cradmin UI.

BaseMenuLinkRenderable
- Purpose: Render a single menu link item.
- Template: django_cradmin/crmenu/menuitem/link.django.html
- Constructor:
  - label: The text shown for the menu item.
  - url: The target URL when the item is clicked.
  - is_active: If True, renders as the active item.
  - bem_variant_list: Optional list of BEM variants.
  - parent_bem_block: Optional BEM block name; if not provided, a fallback is used.
- BEM behavior:
  - get_fallback_parent_bem_block: returns adminui-page-header.
  - get_parent_bem_block: uses the provided parent_bem_block or the fallback.
  - get_bem_element: returns “<parent>__navlink”.
  - get_active_bem_variant_list: returns [‘active’].
  - get_bem_variant_list: merges base variants with active state when is_active is True.

NavLinkItemRenderable
- Subclass of BaseMenuLinkRenderable.
- Use: Add links to the main menu.

NavLinkButtonItemRenderable
- Subclass of NavLinkItemRenderable.
- get_bem_variant_list: returns [‘button’], styling the link as a button.

ExpandableMenuItem
- Subclass of BaseMenuLinkRenderable.
- Template: django_cradmin/crmenu/menuitem/expandable-menu-item.django.html
- Behavior:
  - get_fallback_parent_bem_block: returns expandable-menu.
  - get_bem_element: returns “<parent>__link”.
  - get_list_element_bem_element: returns “<parent>__listitem”.

ExpandableMenuSeparator
- Subclass of renderable.AbstractBemRenderable.
- Template: django_cradmin/crmenu/menuitem/expandable-menu-separator.django.html
- Constructor accepts:
  - parent_bem_block: Optional BEM block name.
- Behavior:
  - get_fallback_parent_bem_block: returns expandable-menu.
  - get_parent_bem_block: uses provided value or fallback.
  - get_bem_element: returns “<parent>__separator”.

MenuToggleItemItemRenderable
- Subclass of renderable.AbstractBemRenderable.
- Template: django_cradmin/crmenu/menuitem/menutoggle.django.html
- Constructor accepts:
  - parent_bem_block: Optional BEM block name.
- Behavior:
  - get_label: returns a translated label using pgettext_lazy with context “cradmin default header menu toggle label” and the default value “Menu”.
  - get_fallback_parent_bem_block: returns adminui-page-header.
  - get_parent_bem_block: uses provided value or fallback.
  - get_bem_element: returns “<parent>__navmenutoggle”.
  - get_label_css_class: returns “<parent>__navmenutoggle-label”.
  - get_icon_css_class: returns “<parent>__navmenutoggle-icon”.

Abstract base: AbstractMenuRenderable
- Purpose: Base class for rendering a menu.
- Inherits from renderable.AbstractRenderableWithCss.
- Key responsibilities:
  - Store request and cradmin_instance.
  - Maintain a list of child renderables (renderable_list).
  - Expose iter_renderables() to iterate over renderables.
  - Define the renderable classes used for links, separators, and buttons:
    - link_renderable_class
    - separator_renderable_class
    - button_renderable_class
- get_link_renderable_class()
  - Returns the configured link_renderable_class.
  - If not defined, raises ValueError with a descriptive message.
  - This mechanism allows replacing the default link renderable with a custom one.
- get_separator_renderable_class()
  - Similar to get_link_renderable_class, but for separators.
- Extendable behavior:
  - Concrete menu renderers should set these class attributes to customize rendering.

Templates
---------
Each renderable is associated with a specific template to control HTML structure and CSS:
- link.django.html for BaseMenuLinkRenderable
- expandable-menu-item.django.html for ExpandableMenuItem
- expandable-menu-separator.django.html for ExpandableMenuSeparator
- menutoggle.django.html for MenuToggleItemItemRenderable
- The exact template contexts are provided by the renderables when rendering in Cradmin views.

Translation support
-------------------
- Menu toggle label uses pgettext_lazy for translation:
  - Context: 'cradmin default header menu toggle label'
  - Default: 'Menu'

Usage notes
-----------
- To customize the default expandable menu, configure DJANGO_CRADMIN_DEFAULT_EXPANDABLE_MENU_CLASS in settings to point to a subclass of AbstractMenuRenderable (or a compatible renderable).
- Use the various renderables to compose a menu:
  - NavLinkItemRenderable for standard links.
  - NavLinkButtonItemRenderable for button-styled links.
  - ExpandableMenuItem and ExpandableMenuSeparator to structure expandable sections.
  - MenuToggleItemItemRenderable to provide a toggle for the expandable menu.
- The rendering relies on BEM blocks to ensure consistent CSS classes and styling across the UI.

File references (example class usage)
------------------------------------
- get_default_expandable_menu_renderable(**kwargs)
- BaseMenuLinkRenderable
- NavLinkItemRenderable
- NavLinkButtonItemRenderable
- ExpandableMenuItem
- ExpandableMenuSeparator
- MenuToggleItemItemRenderable
- AbstractMenuRenderable

Templates and class names are designed to integrate with Cradmin’s admin UI conventions and can be customized by substituting renderable classes via the AbstractMenuRenderable API.