Recfunctions (numpy.lib.recfunctions)
=====================================

Collection of utilities to manipulate structured arrays.

Most of these functions were initially implemented by John Hunter for
matplotlib. They have been rewritten and extended for convenience.

Overview
--------
This module provides a set of utilities for working with NumPy structured
arrays (record arrays). It includes helpers to inspect and manipulate field
names and dtypes, flatten nested dtypes, and fill or combine fields
across arrays, including support for nested (structured) fields.

Public API
----------
recursive_fill_fields(input, output)
    Fills fields from input with fields from output, with support for nested
    structures.

    Parameters
    ----------
    input : ndarray
        Input array.
    output : ndarray
        Output array.

    Notes
    -----
    * `output` should be at least the same size as `input`

    Examples
    --------
    >>> from numpy.lib import recfunctions as rfn
    >>> a = np.array([(1, 10.), (2, 20.)], dtype=[('A', np.int64), ('B', np.float64)])
    >>> b = np.zeros((3,), dtype=a.dtype)
    >>> rfn.recursive_fill_fields(a, b)
    array([(1, 10.), (2, 20.), (0,  0.)], dtype=[('A', '<i8'), ('B', '<f8')])

flatten_descr(ndtype)
    Flatten a structured data-type description.

    Examples
    --------
    >>> from numpy.lib import recfunctions as rfn
    >>> ndtype = np.dtype([('a', '<i4'), ('b', [('ba', '<f8'), ('bb', '<i4')])])
    >>> rfn.flatten_descr(ndtype)
    (('a', dtype('int32')), ('ba', dtype('float64')), ('bb', dtype('int32')))

get_names(adtype)
    Returns the field names of the input datatype as a tuple. Input datatype
    must have fields otherwise error is raised.

    Parameters
    ----------
    adtype : dtype
        Input datatype

    Examples
    --------
    >>> from numpy.lib import recfunctions as rfn
    >>> rfn.get_names(np.empty((1,), dtype=[('A', int)]).dtype)
    ('A',)
    >>> rfn.get_names(np.empty((1,), dtype=[('A',int), ('B', float)]).dtype)
    ('A', 'B')
    >>> adtype = np.dtype([('a', int), ('b', [('ba', int), ('bb', int)])])
    >>> rfn.get_names(adtype)
    ('a', ('b', ('ba', 'bb')))

get_names_flat(adtype)
    Returns the field names of the input datatype as a tuple. Input datatype
    must have fields otherwise error is raised.
    Nested structures are flattened beforehand.

    Parameters
    ----------
    adtype : dtype
        Input datatype

    Examples
    --------
    >>> from numpy.lib import recfunctions as rfn
    >>> rfn.get_names_flat(np.empty((1,), dtype=[('A', int)]).dtype) is None
    False
    >>> rfn.get_names_flat(np.empty((1,), dtype=[('A',int), ('B', str)]).dtype)
    ('A', 'B')
    >>> adtype = np.dtype([('a', int), ('b', [('ba', int), ('bb', int)])])
    >>> rfn.get_names_flat(adtype)
    ('a', 'b', 'ba', 'bb')

Notes
-----
The module also exposes additional utilities for constructing, joining, and
repacking fields within structured arrays. See the source for the complete
set of functions and private helpers.

Internal helpers
----------------
_get_fieldspec(dtype)
    Produce a list of name/dtype pairs corresponding to the dtype fields.
    Used internally to reconstruct dtypes and handle subarrays.

_zip_dtype(seqarrays, flatten=False)
    Internal helper for zipping multiple dtypes, with optional flattening
    of nested descriptors.

See Also
--------
numpy.lib.recfunctions (recfunctions) â€” Utilities for structured arrays

Examples
--------
A minimal demonstration of nested field handling and dtype flattening is
shown in the examples for each function above. For more details and
additional helpers, refer to the source implementation.