web3.miner.rst

Miner (web3.miner.Miner)

Overview
--------
The Miner class provides a direct Python interface to the mining-related RPC calls exposed by an Ethereum node (e.g., Geth). It allows querying the current hashrate and controlling mining operations, DAG generation, and related settings.

Constructor
-----------
__init__(web3)
- web3: The Web3 instance used to communicate with the node.

Hashrate
--------
hashrate (property)
- Description: Current miner hashrate in H/s.
- Notes: The value is formatted to a decimal via apply_formatters_to_return(to_decimal).

Methods
-------
makeDAG(number)
- number: int
- Description: Generate the DAG for the specified epoch number.
- Returns: RPC result from miner_makeDag.

setExtra(extra)
- extra: str
- Description: Set the extra data field to be included in mined blocks.
- Returns: RPC result from miner_setExtra.

setEtherBase(etherbase)
- etherbase: str
- Description: Set the coinbase/etherbase address that receives mining rewards.
- Returns: RPC result from miner_setEtherbase.

setGasPrice(gas_price)
- gas_price: int or str
- Description: Set the minimum gas price (wei) miners will accept.
- Returns: RPC result from miner_setGasPrice.

start(num_threads)
- num_threads: int
- Description: Start mining using the specified number of CPU threads.
- Returns: RPC result from miner_start.

stop()
- Description: Stop mining.
- Returns: RPC result from miner_stop.

startAutoDAG()
- Description: Enable automatic DAG generation for future epochs.
- Returns: RPC result from miner_startAutoDag.

stopAutoDAG()
- Description: Disable automatic DAG generation.
- Returns: RPC result from miner_stopAutoDag.

Usage example
-------------
from web3 import Web3, HTTPProvider
w3 = Web3(HTTPProvider("http://localhost:8545"))
miner = w3.miner

# Check hashrate
current_hashrate = miner.hashrate

# Start mining with 2 threads
miner.start(2)

# Stop mining
miner.stop()

# Set gas price to 2 gwei
miner.setGasPrice(2_000_000_000)

# Set etherbase
miner.setEtherBase("0xYourEtherbaseAddress")

# Make DAG for epoch 3
miner.makeDAG(3)

# Enable/disable auto DAG generation
miner.startAutoDAG()
miner.stopAutoDAG()

See Also
--------
web3.web3.providers.rpc.Provider
web3.miner.Miner (class usage)