Publishing versions
==================

Overview
--------

This document describes the process and conventions for publishing new versions of the ftrack API Python package. It covers versioning policy, release workflow, packaging, and release communication.

Versioning policy
-----------------

- Use Semantic Versioning: MAJOR.MINOR.PATCH.
- Public API changes:
  - MAJOR: Incompatible API changes or removals.
  - MINOR: Backwards-compatible feature additions.
  - PATCH: Backwards-compatible bug fixes.
- Pre-releases may be released with suffixes such as -alpha.N, -beta.N, or -rc.N. Increment the appropriate component for each pre-release cycle.
- Deprecations should be announced in advance and reflected in minor releases, with removals targeted for a future major release.

Release workflow
--------------

- Update the version number in the package metadata (for example, in the primary __init__.py or setup configuration) to the new MAJOR.MINOR.PATCH value.
- Update the changelog (CHANGELOG.rst) with a clear summary of changes, breaking changes, and migration notes.
- Ensure all tests pass locally and/or in CI, including unit and integration tests where applicable.
- Prepare release notes suitable for users and developers.
- Create an annotated git tag for the release, e.g. vMAJOR.MINOR.PATCH, and push the tag to the remote repository.
- Build distribution artifacts (sdist and wheel).
- Publish to the package index (for example, PyPI) using a secure method (e.g., twine).
- Verify the published package by installing it from the index in a clean environment.

Packaging and publishing
------------------------

- Build artifacts:
  - Use a modern build tool (for example, python -m build) to produce sdist and wheel.
- Publish artifacts:
  - Use twine to upload dist/* to the package index.
  - Ensure API tokens or credentials are provided through secure channels (environment variables or CI secrets).
- Verification:
  - Install the released version in a fresh environment and run a subset of tests or smoke checks to confirm basic functionality.

Changelog and documentation
----------------------------

- Maintain CHANGELOG.rst with entry sections for each release.
- Update user-facing documentation to reflect new features, changes, and migration guidance.
- Include notes on any deprecated features and their removal timelines.

Example release workflow
------------------------

- Bump version to v1.2.0 (MINOR: new features, backwards compatible).
- Update CHANGELOG.rst with a summary of new features and fixes.
- Run full test suite locally or in CI.
- Build sdist and wheel.
- Tag the release: git tag -a v1.2.0 -m "Release v1.2.0"
- Push tag: git push origin v1.2.0
- Upload artifacts: twine upload dist/*
- Confirm installation of v1.2.0 from PyPI in a clean environment.

Notes
-----

- Maintainers should coordinate with users about breaking changes and provide migration guidance.
- Consider introducing a deprecation period in minor releases before removing features in a major release.