Generate documentation for this module
======================================

Overview
--------
This module provides command helpers to manage Alembic script environments and revisions. It exposes three public functions:

- list_templates(config)
- init(config, directory, template="generic", package=False)
- revision(config, message=None, autogenerate=False, sql=False, head="head",
           splice=False, branch_label=None, version_path=None, rev_id=None,
           depends_on=None, process_revision_directives=None)

list_templates(config)
---------------------
Description
- List available templates for Alembic environments.

Parameters
- config: a :class:`.Config` object.

Behavior
- Prints the available templates and their synopses to stdout.
- Reads the synopsis from the template README in the template directory.
- Informs how templates are used via the init command, with an example:
  alembic init --template generic./scripts

Output
- No return value; side effects are stdout messages.

init(config, directory, template="generic", package=False)
--------------------------------------------------------
Description
- Initialize a new scripts directory for an Alembic environment.

Parameters
- config: a :class:`.Config` object.
- directory: string path of the target directory.
- template: string name of the migration environment template to use (default: "generic").
- package: when True, write ``__init__.py`` files into the environment location as well as the versions/ location.

Behavior
- Validates that the target directory either does not exist or is empty.
- Verifies the requested template exists.
- Creates the target directory and a versions subdirectory if needed.
- Generates template files or copies non-template files from the template directory.
- If package is True, creates empty ``__init__.py`` files in the environment and versions directories.

Post-conditions
- Prints a final message prompting the user to edit configuration/connection/logging settings in the generated config file before proceeding.

Notes
- If a ``alembic.ini.mako`` template is used, the generated config file path is recorded, and a message is shown if it already exists (skipping generation).

revISION(config, message=None, autogenerate=False, sql=False, head="head",
           splice=False, branch_label=None, version_path=None, rev_id=None,
           depends_on=None, process_revision_directives=None)
-------------------------------------------------------------------------------
Description
- Create a new revision file for the Alembic environment.

Parameters
- config: a :class:`.Config` object.
- message: revision message to apply to the revision (corresponds to ``-m``).
- autogenerate: generate the revision from the database state (``--autogenerate``).
- sql: dump the script as SQL to stdout (``--sql``).
- head: base revision for the new revision (``--head``).
- splice: whether to create a new head (``--splice``).
- branch_label: branch label to apply (``--branch-label``).
- version_path: version path selector (``--version-path``).
- rev_id: explicit revision identifier to use (``--rev-id``).
- depends_on: optional list of dependencies (``--depends-on``).
- process_revision_directives: callable applied to the generated revision directives; used for programmatic customization.

Return
- A Script instance or a list of Script instances, or None, depending on the operation.

Notes
- If autogenerate is requested, the environment is enabled.
- Running with ``--autogenerate`` and ``--sql`` together is invalid and will raise a CommandError.

Usage examples
--------------
- List templates:
  list_templates(config)

- Initialize a new environment:
  init(config, directory="/path/to/env", template="generic", package=True)

- Create an initial revision with a message, autogeneration, and branch label:
  revision(config, message="Initial migration", autogenerate=True, branch_label="base")

- Create a revision and output SQL:
  revision(config, message="Add table", sql=True)

Notes on return values
----------------------
- list_templates and init return None.
- revision returns a Script object or a list of Script objects depending on the revision operation.