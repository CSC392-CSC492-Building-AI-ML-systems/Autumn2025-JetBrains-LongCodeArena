Gee.rst

The One-Parameter Exponential Family for GLM (Documentation and Example)

Overview
--------
This module defines the base class for one-parameter exponential family distributions used by generalized linear models (GLMs). A Family combines a link function with a variance function and provides common utilities used by IRLS-type fitting algorithms, including:

- starting_mu(y): a starting value for the mean parameter mu.
- weights(mu): IRLS weights based on the link derivative and variance.
- deviance(endog, mu, var_weights=1., freq_weights=1., scale=1.): deviance of the observed data with respect to mu.
- resid_dev(endog, mu, var_weights=1., scale=1.): deviance residuals.
- fitted(lin_pred): intended to return the mean mu from linear predictors (note: in this skeleton, the method is not implemented).

The base class expects concrete subclasses to implement the internal _resid_dev method (which defines the distribution-specific deviance contribution). The class also maintains a link attribute, which must be a valid link object, and a variance function.

API
---
- Family(link, variance)
  - Constructor for a one-parameter exponential family. Stores the link and variance function.
- link (property)
  - Getter/setter for the link function associated with the family.
- starting_mu(y)
  - Returns the starting value for mu used by IRLS.
- weights(mu)
  - Returns IRLS weights: 1 / (g'(mu)^2 * Var(mu)).
- deviance(endog, mu, var_weights=1., freq_weights=1., scale=1.)
  - Computes the deviance based on the provided data and mu.
- resid_dev(endog, mu, var_weights=1., scale=1.)
  - Computes the deviance residuals for each observation.
- fitted(lin_pred)
  - Intended to return mu from linear predictors; not implemented in this skeleton.

Extending
---------
To create a concrete family, subclass Family and implement:
- _resid_dev(endog, mu): the distribution-specific residual contribution used by deviance and resid_dev.
Optionally override starting_mu or other methods if needed for your particular family.

Example
-------
The following is a minimal illustrative example of creating a simple Gaussian-like one-parameter family using an identity link. This is a conceptual example for documentation purposes and does not rely on any external GLM package.

.. code-block:: python

   import numpy as np

   class IdentityLink(object):
       def __call__(self, mu):
           return mu
       def deriv(self, mu):
           return np.ones_like(mu)

   class Gaussian1P(Family):
       def __init__(self, link=None, variance=None):
           if link is None:
               link = IdentityLink()
           if variance is None:
               variance = lambda mu: np.ones_like(mu)
           super(Gaussian1P, self).__init__(link, variance)
       def _resid_dev(self, endog, mu):
           # simple squared-residual-based deviance component
           return (endog - mu) ** 2

   # Example usage
   y = np.array([0.0, 2.0, 1.0])
   model = Gaussian1P()            # uses IdentityLink and unit variance
   mu = model.starting_mu(y)       # starting value for mu
   w = model.weights(mu)            # IRLS weights
   D = model.deviance(y, mu)        # deviance

Notes
-----
- This is a skeleton illustrating the interface of a one-parameter exponential family for GLMs. Real-world usage should rely on concrete, well-tested implementations for both the link and variance functions.
- The fitted method is not implemented in this example; in a complete implementation, it would translate linear predictors into mean values via the inverse link.