Generate documentation for diofant.utilities.codegen

Overview
--------
The diofant.utilities.codegen module provides a framework for generating code that evaluates diofant expressions in target languages such as C, C++, Fortran77, Fortran90 and Octave/Matlab. It is a work in progress; only milestones marked with a plus (“+”) in the Milestones list have been completed.

What this module is not
- It is not intended to extend diofant.printing.ccode to produce fully standalone compilable programs. Instead, it delivers a dedicated code generator with a flexible data model for routines.
- It does not attempt to address all programming-technical issues (e.g., argument conventions, headers for libraries, or library-specific data structures). Those concerns are handled by the code generator layer rather than by the printer alone.

Differences from diofant.printing.ccode
---------------------------------------
- Printing routines alone produce strings; this module introduces a generator that can emit compilable code and header information.
- C/C++ code often requires both a source and a header; the code generator is designed with language-specific outputs in mind.
- diofant functions are not tied to input/output argument conventions; the generator accommodates various argument kinds and library headers.
- It supports generating multiple diofant expressions in a single routine and sharing intermediate results, leveraging common subexpression elimination (where implemented in the generator).
- The generator aims to evaluate constant expressions at code-generation time to produce more efficient output.

Basic assumptions
---------------
- A generic Routine data structure describes the routine to be translated into C/Fortran/other languages. This structure captures all features supported by one or more target languages.
- Descendants of the CodeGen class transform Routine instances into compilable code. Each derived class targets a specific language.
- Friendly helper functions provide a simpler API on top of the Routine/CodeGen workflow. They are easier to use but offer less power than the full workflow.

Milestones
----------
+ First working version with scalar input arguments, generating C code, tests
+ Friendly functions that are easier to use than the rigorous Routine/CodeGen workflow.
+ Integer and Real numbers as input and output
+ Output arguments
+ InputOutput arguments
+ Sort input/output arguments properly
+ Contiguous array arguments (numpy matrices)
+ Also generate.pyf code for f2py (in autowrap module)
+ Isolate constants and evaluate them beforehand in double precision
+ Fortran 90
+ Octave/Matlab

- Common Subexpression Elimination
- User defined comments in the generated code
- Optional extra include lines for libraries/objects that can eval special functions
- Test other C compilers and libraries: gcc, tcc, libtcc, gcc+gsl,...
- Contiguous array arguments (diofant matrices)
- Non-contiguous array arguments (diofant matrices)
- ccode must raise an error when it encounters something that can not be translated into c. ccode(integrate(sin(x)/x, x)) does not make sense.
- Complex numbers as input and output
- A default complex datatype
- Include extra information in the header: date, user, hostname, sha1 hash, ...
- Fortran 77
- C++
- Python
- ...

API reference
-------------

Routine
-------
Represents a generic evaluation routine to be translated into a target language.

Constructor
- Routine(name, arguments, results, local_vars, global_vars)

Parameters
- name: string
- arguments: list of Arguments (InputArgument, OutputArgument, InOutArgument)
- results: list of Results
- local_vars: list of local variables (either Results or simple identifiers)
- global_vars: list of Symbols not passed as function arguments

Behavior
- The constructor inspects the arguments and results to determine the set of input symbols and used symbols.
- It validates that all symbols required by outputs are provided either as inputs, local variables, or globals.
- It raises a ValueError if an unknown type is encountered among arguments or results.

Key properties
variables
- Returns the set of all variables possibly used by the routine. This includes local variables, input names, and result symbols.

result_variables
- Returns a list describing the variables corresponding to results.

Data types and utilities
------------------------
DataType, default_datatypes, get_default_datatype
- Define and manage the data types used for inputs, outputs, and intermediate values in generated code.

Arguments
---------
InputArgument, OutputArgument, InOutArgument
- Classes representing the kinds of arguments that a Routine can have, defining how they are passed to and from generated routines.

Code generators
---------------
CodeGen, CCodeGen, FCodeGen, OctaveCodeGen
- Base and language-specific code generator classes that translate Routine instances into compilable code for the respective target languages.

Friendly API
------------
codegen, make_routine
- Convenience functions that wrap the full Routine/CodeGen workflow, providing simpler entry points for common tasks.

Notes
-----
- The module’s top-level docstring documents the design philosophy, milestones, and current scope.
- The implementation focuses on a flexible, language-agnostic internal model for routines and a set of language-specific backends to emit code.

Usage hints
-----------
- Use the friendly API for quick generation tasks.
- For advanced or multi-language workflows, leverage the Routine/CodeGen classes directly to customize argument handling, scoping, and language-specific details.