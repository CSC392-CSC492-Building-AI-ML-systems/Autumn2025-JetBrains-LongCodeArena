Parallel Random Number Generation
===============================

Overview
--------
This project provides a parallel-friendly random number generation subsystem for NumPy’s random interface. It implements multiple independent random number generators (RNGs) and associated distributions, enabling safe and scalable random streams across threads and processes. The core components are exposed to Python through a set of C/Cython extensions built into a single parallel RNG library.

Key components
-------------
- npyrandom library
  - A static library built from single-source RNG and distribution implementations:
    - src/distributions/logfactorial.c
    - src/distributions/distributions.c
    - src/distributions/random_mvhg_count.c
    - src/distributions/random_mvhg_marginals.c
    - src/distributions/random_hypergeometric.c
  - Provides the low-level RNG engines and statistical distributions used by the Python bindings.

- RNG engines (bit generators)
  - MT19937 (Mersenne Twister): traditional high-quality RNG with jump ahead support for parallel usage.
  - Philox: a counter-based RNG suitable for parallel workloads.
  - PCG64: a modern, fast, robust 64-bit RNG with good statistical properties.
  - SFC64: Small Fast Counter generator with fast performance.
  - Each engine is exposed to Python and selectable via the numpy.random API, enabling multiple independent streams.

- Bounded integers support
  - _bounded_integers: generated from templates to efficiently produce bounded integer values, supporting common needs in random sampling without bias.

- Python bindings and extensions
  - Cython-based wrappers for Python integration:
    - _bounded_integers.pxd (generated)
    - _common.pxd
    - bit_generator.pyx
    - _mt19937.pyx, _philox.pyx, _pcg64.pyx, _sfc64.pyx
    - _generator.pyx (wrapper for the legacy and new interfaces)
    - mtrand: legacy/compatibility layer, wrapping distributions and legacy APIs
  - The Python-side API is organized under numpy/random:
    - bit_generator: base for all engines
    - _generator: Python-facing interface for generating numbers
    - _bounded_integers, _common, _mt19937, _philox, _pcg64, _sfc64: per-engine implementations
    - mtrand: compatibility with older numpy.random behavior

- Distributions and statistical functionality
  - Discrete and continuous distributions implemented in C for performance:
    - Hypergeometric distribution: random_hypergeometric.c
    - Multivariate hypergeometric components: random_mvhg_count.c, random_mvhg_marginals.c
  - logfactorial.c provides support utilities used in distributions
  - These distributions are used by both the new RNG-based interfaces and the legacy paths.

- Python packaging and tests
  - The extension modules are installed under numpy/random to mirror NumPy’s public API surface.
  - Comprehensive tests are included under numpy/random/tests to validate correctness, performance, and compatibility with legacy interfaces.

Parallel usage and API notes
----------------------------
- Streams and independence: To use RNGs in parallel safely, create separate RNG instances (generators) for each worker (thread or process). Engines such as Philox and PCG64 are well-suited for parallel usage due to their design, which supports independent sequences when initialized with distinct seeds or seed sequences.
- Seed management: Use distinct seeds or seed sequences for different streams to ensure independence and reproducibility across runs.
- API surface: The Python API provides a bit-generator interface (bit_generator) along with a Generator wrapper to access high-level random numbers. The np.random namespace exposes both modern (bit-generator-based) and legacy (mtrand) interfaces for compatibility.

Licensing
---------
This software is dual-licensed under the University of Illinois/NCSA Open Source License (NC Open Source License) and accompanying terms.

Notes
-----
- The implementation binds together high-performance C sources (RNG engines and distributions) with Python via Cython, exposing a cohesive parallel RNG framework within NumPy.
- The distribution components (logfactorial, multivariate hypergeometric, hypergeometric) complement the RNG engines to support a wide range of statistical needs in parallel simulations.