w_run
=====

start/continue a WEST simulation

Overview
--------

w_run starts or continues a WEST simulation by configuring the WestPA runtime, creating the appropriate work manager, and invoking the simulation manager and related drivers. The master process handles plugin loading, preparation, execution, and finalization, while worker processes participate through the work manager.

Usage
-----

.. code-block:: text

   w_run [options]

Options
-------

- --oneseg
  - Description: propagate only one segment (useful for debugging propagators)

- WestPA runtime options
  - Added by: westpa.rc.add_args(parser)
  - Description: standard WestPA runtime configuration options (general settings for the run)

- Work manager options
  - Added by: work_managers.environment.add_wm_args(parser)
  - Description: options configuring the work manager/environment

What happens
------------

- A work manager is created via make_work_manager(), and westpa.rc.work_manager is set to this instance.
- The script retrieves core components from WestPA runtime:
  - sim_manager (simulation manager)
  - system (system driver)
  - data_manager (data manager)
  - we_driver (WE driver)
  - propagator (propagator)
- Connections are established:
  - propagator.system = system
  - data_manager.system = system
  - we_driver.system = system
  - sim_manager.data_manager = data_manager
  - sim_manager.system = system
  - sim_manager.propagator = propagator
  - sim_manager.we_driver = we_driver
- Execution flow:
  - Enter the work manager context.
  - If this process is the master:
    - install_sigint_handler()
    - sim_manager.load_plugins()
    - log and run preparation: sim_manager.prepare_run()
    - begin run: sim_manager.run()
    - finalization: sim_manager.finalize_run()
    - Catch and report:
      - KeyboardInterrupt -> westpa.rc.pstatus('interrupted; shutting down')
      - Other exceptions -> westpa.rc.pstatus('exception caught; shutting down'); log error details
  - If not master:
    - work_manager.run()

Entry point
-----------

When the file is executed as a script, entry_point() is called to parse arguments and start the run.