Ploterr
=======

Overview
--------

Ploterr plots generic expectation/CI data from an HDF5 file. It supports customizable axis scales, ranges, and labels, and can render plots using matplotlib when a display is available or fall back to a text-based interface when needed.

Subcommands
-----------

generic
^^^^^^^

Description
-----------

Plots generic expectation/CI data. A path to the HDF5 file and the dataset within it must be provided. This path takes the form FILENAME/PATH[SLICE]. If the dataset is not one-dimensional, a slice must be provided. For example, to access the state 0 to state 1 rate evolution calculated by kinavg, use kinavg.h5/rate_evolution[:,0,1].

Usage
-----

ploterr generic FILENAME/PATH[SLICE] [options]

Arguments
-----------

- dsspec: FILENAME/PATH[SLICE]. The dataset path within the HDF5 file. FILENAME is the HDF5 file to read, PATH is the dataset path, and SLICE (if provided) must be a NumPy-style slice (including brackets) selecting a 1-D vector.

Options
-------

- -o, --output OUTPUT
  Default: errbars.pdf
  Write plot to OUTPUT; the format is inferred from the filename extension.

- -t, --terminal
  dest: plotting
  Plot output in the terminal instead of a graphical window.

- --xscale
  Choices: linear, log, symlog
  Default: linear
  Use scaling for the x axis.

- --yscale
  Choices: linear, log, symlog
  Default: linear
  Use scaling for the y axis.

- --xrange
  Format: "xmin,xmax"
  Restrict the x axis to this range.

- --yrange
  Format: "ymin,ymax"
  Restrict the y axis to this range.

- --xlabel
  Label for the x axis. (Default: varies.)

- --ylabel
  Label for the y axis. (Default: varies.)

- --title
  Title for the plot. (Default: varies.)

Data and plotting behavior
--------------------------

- The dataset must contain the fields: iter_start, iter_stop, expected, ci_lbound, ci_ubound.

- Data is loaded using the provided slice. The code validates that the resulting data is 1-dimensional; otherwise, a TypeError is raised.

- Plotting is performed against iters = iter_stop - 1, with three curves:
  - expected (black)
  - ci_lbound (gray)
  - ci_ubound (gray)

- The x and y axes respect the configured scales and ranges; title and labels are applied when provided. The plot is saved to the specified output file.

Environment and rendering
-------------------------

- If DISPLAY is set, matplotlib is used to render the plot (unless terminal mode is requested). If DISPLAY is not set or terminal mode is used, a text-based interface is used.