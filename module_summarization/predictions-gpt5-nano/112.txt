Plan metadata documentation

Overview
This module provides simple plan generators for Bluesky-style data acquisition, along with the metadata dictionaries that describe how each plan is intended to run. The primary functions are count, list_scan, and rel_list_scan (the latter currently a placeholder). Each function yields a nested plan and builds a metadata dictionary (_md) that records intent, input arguments, and hints used by the plan system.

Functions

count(detectors, num=1, delay=None, *, per_shot=None, md=None)
- Purpose
  Take one or more readings from the provided detectors.
- Parameters
  - detectors: list of readable objects (detectors to read from)
  - num: int, number of readings to take (default 1)
  - delay: iterable or scalar, delay in seconds between successive readings (default 0)
  - per_shot: callable, optional hook for customizing action of inner loop (messages per step)
  - md: dict, optional metadata to extend the plan metadata
- Returns
  A generator produced by the inner_count plan. It yields from the per-shot loop over the detectors.
- Metadata (structure produced in _md)
  - detectors: list of detector names
  - num_points: num
  - num_intervals: num - 1 (or None if num is None)
  - plan_args: {'detectors': [repr(det) for det in detectors], 'num': num}
  - plan_name: 'count'
  - hints: dict (default contains dimensions: [(('time',), 'primary')] when not overridden)
  - During execution, _md is updated with any user-provided md, and per_shot defaults to bps.one_shot if not supplied.
- Notes
  The plan yields data corresponding to a sequence of detector readings with an optional per-shot customization hook.

list_scan(detectors, *args, per_step=None, md=None)
- Purpose
  Scan over one or more variables in an inner-product fashion (multi-dimensional scan).
- Parameters
  - detectors: list of readable objects
  - *args: pairs of motor (or settable) and a list of points, e.g. motor1, [p1, p2, ...], motor2, [p1, p2, ...], ...
  - per_step: callable, optional hook for customizing the action of the inner loop (messages per step)
  - md: dict, optional metadata to extend the plan metadata
- Returns
  A generator produced by the full scanning plan, yielding from scan_nd over a prepared cycler.
- Metadata (structure produced in _md)
  - detectors: list of detector names
  - motors: list of motor names
  - num_points: length (number of points per motor)
  - num_intervals: length - 1
  - plan_args: {'detectors': [repr(det) for det in detectors], 'args': md_args, 'per_step': repr(per_step)}
  - plan_name: 'list_scan'
  - plan_pattern: 'inner_list_product'
  - plan_pattern_module: plan_patterns.__name__
  - plan_pattern_args: {'args': md_args}
  - hints: may include default_dimensions derived from motor hints; if motors provide fields via hints['fields'], those fields become the x-axis dimensions (primary)
- Notes
  The function aligns with Blueskyâ€™s list-based inner-product scanning capability, using plan_patterns.inner_list_product to form the full cycler.

rel_list_scan(detectors, *args, per_step=None, md=None)
- Purpose
  Scan over one variable in steps relative to the current position.
- Parameters
  - detectors: list of readable objects
  - *args: motor and list of relative steps, as for list_scan
  - per_step: callable, optional hook for customizing action of inner loop
  - md: dict, optional metadata to extend the plan metadata
- Returns
  Not implemented yet. The function is declared and documented, but the body currently contains a placeholder (TODO).
- Metadata (structure expected when implemented)
  - Intended keys would be similar to list_scan, with relative-step semantics for the provided motors, and plan_args reflecting relative coordinates.
- Notes
  This function is a planned extension and currently serves as a placeholder for future development. The docstring describes the expected interface and behavior once implemented.