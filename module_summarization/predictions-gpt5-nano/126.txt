Image HDU — Data component
==========================

The Data component is the pixel data stored in an ImageHDU. It is the NumPy array that represents the image values and is exposed via the .data attribute of the ImageHDU. The shape and dtype of this array are governed by the FITS header information (NAXIS, NAXISn, and BITPIX).

Overview
--------

- Purpose: Store the image pixel data for an ImageHDU.
- Access: hdu.data returns a NumPy ndarray (or None if no data is present).
- Shape: The array shape corresponds to the image dimensions (e.g., (NAXIS2, NAXIS1) for a 2D image; higher dimensions are supported for data cubes).
- Dtype: Determined by the FITS BITPIX value and the data array’s dtype.

Usage
-----

- Access data:
  - hdu = ImageHDU(data)
  - data = hdu.data
  - print(data.shape)

- Modify data:
  - data[0, 0] = some_value
  - Modifying the data does not automatically update the header; ensure the header reflects the current shape if it changes.

- Create from existing header:
  - hdu = ImageHDU(data, header)

Verification and validation
---------------------------

- Internal verification: The codebase includes a verification mechanism (the _Verify class and related utilities) that can check consistency of values and report issues.
- Options for reporting: ignore, warn, exception, fix, silentfix, and combinations (e.g., fix+warn). Verification results may be produced as human-readable messages.
- Error reporting structure: Verification messages are collected in a nested _ErrList and can be rendered line-by-line for inspection.

Notifying changes
-----------------

- Change tracking: The codebase uses a NotifierMixin to allow listeners to subscribe to changes. Listeners can be registered to respond when the Data component changes (e.g., when data is updated).

Examples
--------

- Create a simple 2D image HDU from a NumPy array:
  - import numpy as np
  - from astropy.io.fits import ImageHDU
  - data = np.zeros((100, 200), dtype=np.float32)
  - hdu = ImageHDU(data)
  - print(hdu.data.shape)  # (100, 200)

- Validate data consistency with the header (conceptual; actual verification API may vary):
  - hdu.verify(option="warn")
  - If issues are found, messages may be emitted as warnings or raised as errors depending on the option.

See also
--------

- ImageHDU: Higher-level container that ties the Data component to a FITS header.
- FITS header keywords: NAXIS, NAXISn, BITPIX, etc., which define the data’s shape and type.
- Verification utilities: _Verify and _ErrList for reporting and handling data/header consistency issues.