Utilities for Developers
=========================

This module provides a collection of compatibility helpers used to smooth over differences between Python versions, NumPy, SciPy, and optional dependencies. It also includes small wrappers to maintain a stable public API while handling version-specific quirks.

Public API
- percentile
  - Compatibility wrapper for NumPy's percentile function. On NumPy < 1.22, uses an internal _percentile that maps the deprecated interpolation keyword to the correct parameter.
- delayed
  - Deprecated wrapper that forwards to sklearn.utils.parallel.delayed. This import path will be removed in a future release (1.5).
- threadpool_limits(limits=None, user_api=None)
  - Manage global thread pool limits via threadpoolctl. If a global controller exists, uses it; otherwise falls back to threadpoolctl.threadpool_limits.
- threadpool_info()
  - Retrieve information about the current thread pool configuration.
- _mode(a, axis=0)
  - Internal compatibility wrapper around scipy.stats.mode with version-specific handling (SciPy >= 1.9, axis handling; note changes around axis=None and keepdims).
- _sparse_linalg_cg(A, b, **kwargs)
  - Internal helper for conjugate gradient solving, selecting the appropriate SciPy API depending on SciPy version (1.12+ vs older).
- _open_text(data_module, data_file_name)
- _open_binary(data_module, data_file_name)
- _read_text(descr_module, descr_file_name)
- _path(data_module, data_file_name)
  - Internal helpers for accessing package data using importlib.resources, with Python 3.9+ compatibility.
- _object_dtype_isnan(X)
  - Simple NaN check function.

Notes on compatibility
- The module contains version gating to support older environments:
  - SciPy versions (e.g., 1.8+, 1.9+, 1.10+, 1.12)
  - NumPy versions (pre- and post-1.22)
  - Pythonâ€™s importlib.resources API changes introduced in Python 3.9
- Inline comments in the source describe the rationale and targeted versions for each compatibility path.

Usage examples
- Limiting thread usage in a context:
  - with threadpool_limits(limits=4):
        do_something()
- Accessing data packaged with the project:
  - with _open_text(my_data_module, "data.txt") as f:
        text = f.read()