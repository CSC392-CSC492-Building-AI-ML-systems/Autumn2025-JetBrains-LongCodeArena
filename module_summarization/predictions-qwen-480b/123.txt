```
.. _viewhelpers_formview_deleteview:

DeleteView
==========

The ``DeleteView`` implements a preview+confirm+delete workflow for deleting objects in Django CRadmin. It provides a user-friendly interface that confirms the deletion action before proceeding, ensuring that users are aware of the consequences of their actions.

This view is built on top of Django's generic ``DeleteView`` and includes additional functionality such as:

- Preview of the object to be deleted
- Confirmation message
- Success messages after deletion
- Integration with Django CRadmin's role-based access control and JavaScript registry

Usage
-----

To use the ``DeleteView``, you should inherit from ``viewhelpers.formview.WithinRoleDeleteView``. This class combines the necessary mixins to provide a complete delete workflow within a CRadmin role context.

Example::

    from django_cradmin import viewhelpers

    class MyDeleteView(viewhelpers.formview.WithinRoleDeleteView):
        model = MyModel

        def get_queryset(self):
            return MyModel.objects.filter(role=self.request.cradmin_role)

The view will automatically handle the preview, confirmation, and deletion process using the default templates and behavior provided by Django CRadmin.

Customization
-------------

You can customize various aspects of the delete workflow by overriding methods in your view:

- ``get_pagetitle()``: Customize the page title.
- ``get_action_label()``: Define the action label used in the UI.
- ``get_delete_button_label()``: Set the label for the delete button.
- ``get_cancel_button_label()``: Set the label for the cancel button.
- ``get_object_preview()``: Customize how the object is previewed.
- ``get_confirm_message()``: Provide a custom confirmation message.
- ``get_success_url()``: Define where to redirect after successful deletion.
- ``get_success_message()``: Customize the success message shown after deletion.
- ``add_success_messages()``: Override to change how success messages are added.

Template
--------

The default template used by ``WithinRoleDeleteView`` is:

``django_cradmin/viewhelpers/formview/within_role_delete_view.django.html``

This template renders the object preview, confirmation message, and the delete/cancel buttons in a consistent layout with the rest of Django CRadmin.

JavaScript Integration
----------------------

The view integrates with Django CRadmin's JavaScript registry, allowing you to include custom JavaScript components in your delete view if needed.

Messages
--------

After a successful deletion, a Django message is added using the ``messages.success`` framework. You can customize or extend this behavior by overriding the ``add_success_messages()`` method.

See Also
--------

- :class:`django.views.generic.DeleteView`
- :class:`django_cradmin.viewhelpers.formview.DeleteViewMixin`
- :class:`django_cradmin.viewhelpers.formview.WithinRoleDeleteView`
```