ASDF Search Utilities
=====================

The ASDF search utilities provide functionality for searching and filtering ASDF tree structures. The main interface is through the ``AsdfSearchResult`` class, which represents the result of a search operation and provides methods for refining searches and manipulating results.

AsdfSearchResult
----------------

.. class:: AsdfSearchResult

   Represents the result of a search operation on an ASDF tree.

   .. method:: format(max_rows=NotSet, max_cols=NotSet, show_values=NotSet)

      Change formatting parameters of the rendered tree.

      :param max_rows: Maximum number of lines to print. Nodes that cannot be displayed will be elided with a message.
      
         - If int, constrain total number of displayed lines.
         - If tuple, constrain lines per node at the depth corresponding to the tuple index.
         - If None, display all lines.
         - If NotSet, retain existing value.

      :param max_cols: Maximum length of line to print. Nodes that cannot be fully displayed will be truncated with a message.
      
         - If int, constrain length of displayed lines.
         - If None, line length is unconstrained.
         - If NotSet, retain existing value.

      :param show_values: Set to False to disable display of primitive values in the rendered tree. Set to NotSet to retain existing value.
      :returns: The reformatted search result

   .. method:: search(key=NotSet, type=NotSet, value=NotSet, filter=None)

      Further narrow the search.

      :param key: Search query that selects nodes by dict key or list index.
      
         - If NotSet, the node key is unconstrained.
         - If str, the input is searched among keys/indexes as a regular expression pattern.
         - If any other object, node's key or index must equal the queried key.

      :param type: Search query that selects nodes by type.
      
         - If NotSet, the node type is unconstrained.
         - If str, the input is searched among (fully qualified) node type names as a regular expression pattern.
         - If builtins.type, the node must be an instance of the input.

      :param value: Search query that selects nodes by value.
      
         - If NotSet, the node value is unconstrained.
         - If str, the input is searched among values as a regular expression pattern.
         - If any other object, node's value must equal the queried value.

      :param filter: Callable that filters nodes by arbitrary criteria. The callable accepts one or two arguments (the node and optionally the node's list index or dict key) and returns True to retain the node, or False to remove it from the search results.
      :returns: The subsequent search result

   .. method:: replace(value)

      Assign a new value in place of all leaf nodes in the search results.

      :param value: The new value to assign

   .. attribute:: node

      Retrieve the leaf node of a tree with one search result.