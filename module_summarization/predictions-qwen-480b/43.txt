# Configuration

The configuration system in ASAB provides a flexible way to manage application settings using INI-style configuration files. It extends Python's standard `configparser` with additional features like default values, environment variable expansion, and Zookeeper integration.

## Basic Usage

Configuration is typically loaded at application startup and can be accessed throughout the application:

```python
import asab

# Access configuration values
config_value = asab.Config.get('section', 'key')
```

## Configuration File Structure

Configuration files follow the standard INI format with sections and key-value pairs:

```ini
[general]
tick_period = 1
var_dir = ~/myapp

[logging]
level = INFO

[database]
host = localhost
port = 5432
```

## Default Configuration Values

ASAB provides sensible default values for common configuration options:

### General Settings
- `config_file`: Path to configuration file (default: from `ASAB_CONFIG` environment variable)
- `tick_period`: Main loop tick period in seconds (default: 1)
- `var_dir`: Directory for variable data (default: `~/.{app_name}`)
- `pidfile`: PID file location (default: platform-specific)
- `working_dir`: Working directory (default: current directory)

### Metrics
- `native_metrics`: Enable native metrics (default: true)
- `web_requests_metrics`: Enable web request metrics (default: false)
- `expiration`: Metrics expiration time in seconds (default: 60)

### Logging
- `verbose`: Verbose logging (default: from `ASAB_VERBOSE` environment variable)
- `app_name`: Application name (default: script name)
- `level`: Default logging level (default: NOTICE)

### Housekeeping
- `at`: Scheduled time for housekeeping (default: 03:00)
- `limit`: Housekeeping time limit (default: 05:00)
- `run_at_startup`: Run housekeeping at startup (default: no)

## Environment Variable Expansion

Configuration values can include environment variables using the `${VAR}` syntax:

```ini
[database]
password = ${DB_PASSWORD}
host = ${DB_HOST:-localhost}
```

## Including Configuration Files

Additional configuration files can be included using the `include` directive:

```ini
[general]
include = /etc/myapp/*.conf
```

Multiple files can be included using newlines or spaces as separators.

## Password Security

The `[passwords]` section provides a secure way to store sensitive information:

```ini
[connection:MyConnection]
password = ${passwords:my_password}

[passwords]
my_password = secret123
```

Passwords are not exposed through the default API for security.

## Zookeeper Integration

When `ASAB_ZOOKEEPER_SERVERS` environment variable is set, configuration can be loaded from Zookeeper:

```ini
[general]
include = zookeeper:/config/myapp.conf
```

## Logging Configuration

### Console Logging
- `format`: Log message format
- `datefmt`: Date format

### Syslog Logging
- `enabled`: Enable syslog output (default: false)
- `address`: Syslog socket address (platform-specific)
- `format`: Syslog message format

### File Logging
- `path`: Log file path
- `format`: Log message format
- `backup_count`: Number of backup files to keep
- `backup_max_bytes`: Maximum size before rotation
- `rotate_every`: Rotation schedule

## Library Configuration

- `azure_cache`: Enable Azure caching (default: false)

## Housekeeping Configuration

- `at`: Time to run housekeeping (HH:MM format)
- `limit`: Time limit for housekeeping
- `run_at_startup`: Run housekeeping when application starts