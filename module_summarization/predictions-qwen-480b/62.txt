visitors
========

.. automodule:: sqlalchemy.sql.visitors
   :members:
   :undoc-members:
   :show-inheritance:

Visitor/traversal interface and library functions.

This module provides the infrastructure for implementing visitor patterns and
traversing SQL expression trees. It includes base classes for visitable objects
and utilities for traversing and transforming SQL expressions.

Classes
-------

Visitable
~~~~~~~~~

.. autoclass:: sqlalchemy.sql.visitors.Visitable
   :members:
   :undoc-members:
   :show-inheritance:

Base class for visitable objects.

Used to implement the SQL compiler dispatch functions. Other forms of traversal
such as for cache key generation are implemented separately using the
:class:`.HasTraverseInternals` interface.

.. versionchanged:: 2.0
   The :class:`.Visitable` class was named :class:`.Traversible` in the 1.4
   series; the name is changed back to :class:`.Visitable` in 2.0 which is what
   it was prior to 1.4. Both names remain importable in both 1.4 and 2.0
   versions.

InternalTraversal
~~~~~~~~~~~~~~~~~

.. autoclass:: sqlalchemy.sql.visitors.InternalTraversal
   :members:
   :undoc-members:
   :show-inheritance:

Defines visitor symbols used for internal traversal.

The :class:`.InternalTraversal` class is used in two ways. One is that it can
serve as the superclass for an object that implements the various visit methods
of the class. The other is that the symbols themselves of
:class:`.InternalTraversal` are used within the ``_traverse_internals``
collection.

Using the ``_traverse_internals`` structure, objects of type
:class:`.InternalTraversible` will have the following methods automatically
implemented:

* :meth:`.HasTraverseInternals.get_children`
* :meth:`.HasTraverseInternals._copy_internals`
* :meth:`.HasCacheKey._gen_cache_key`

Subclasses can also implement these methods directly, particularly for the
:meth:`.HasTraverseInternals._copy_internals` method, when special steps are
needed.

.. versionadded:: 1.4

Functions
---------

iterate
~~~~~~~

.. autofunction:: sqlalchemy.sql.visitors.iterate

traverse_using
~~~~~~~~~~~~~~

.. autofunction:: sqlalchemy.sql.visitors.traverse_using

traverse
~~~~~~~~

.. autofunction:: sqlalchemy.sql.visitors.traverse

cloned_traverse
~~~~~~~~~~~~~~~

.. autofunction:: sqlalchemy.sql.visitors.cloned_traverse

replacement_traverse
~~~~~~~~~~~~~~~~~~~~

.. autofunction:: sqlalchemy.sql.visitors.replacement_traverse