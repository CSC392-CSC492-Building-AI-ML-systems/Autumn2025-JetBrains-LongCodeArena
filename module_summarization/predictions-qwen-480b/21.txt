```
w_eddist
========

Calculate time-resolved transition-event duration distribution from kinetics results.

Synopsis
--------

::

    w_eddist [options]

Description
-----------

The ``w_eddist`` tool calculates the time-resolved duration distribution of transition events 
from the results of the ``w_kinetics trace`` command. It processes the output of kinetic 
tracing to produce histograms of event durations over iterations, which can be used for 
further analysis or visualization.

Source Data
-----------

Source data is collected from the results of ``w_kinetics trace``. See ``w_kinetics trace --help`` 
for more information on generating this dataset.

Histogram Binning
-----------------

By default, histograms are constructed with 100 bins in each dimension. This can be overridden 
using the ``-b``/``--bins`` option, which accepts several types of arguments:

- **A single integer N**: N uniformly spaced bins will be used in each dimension.
- **A sequence of integers N1,N2,... (comma-separated)**: N1 bins for the first dimension, N2 for the second, etc.
- **A list of lists [[B11, B12, B13,...], [B21, B22, B23,...],...]**: Explicit bin boundaries for each dimension. These need not be uniformly spaced and are evaluated using Python's ``eval`` with ``np`` available (e.g., ``np.arange(0, 10, 0.5)``).

The first two forms will trigger a scan of all data to determine min/max values, which may be 
expensive for large datasets. Explicit bin boundaries avoid this scan.

Note that these bins are **not** related to the bins used in the original WE sampling.

Output Format
-------------

The output file (default: ``pdist.h5``) contains the following datasets:

- ``histograms``: Normalized histograms. The first axis corresponds to iteration; remaining axes correspond to input dataset dimensions.
- ``/binbounds_0``, ``/binbounds_1``, ...: Bin boundaries for each dimension.
- ``/midpoints_0``, ``/midpoints_1``, ...: Bin midpoints for each dimension.
- ``n_iter``: Vector of iteration numbers corresponding to the stored histograms.

Subsequent Processing
---------------------

The output generated by ``w_eddist`` can be plotted using the ``plothist`` program. 
See ``plothist --help`` for more information.

Parallelization
---------------

This tool supports parallelized binning and input data reading by default. For simple cases 
(pre-computed input data, small number of segments), serial processing (``--serial``) may be more efficient.

Command-line Options
--------------------

```
  -h, --help            show this help message and exit
  --serial              do not use parallel processing
  -o OUTPUT, --output=OUTPUT
                        output file (default: pdist.h5)
  -b BINS, --bins=BINS  histogram binning specification (default: 100 bins per dimension)
  --ignore-out-of-range
                        ignore data points that fall outside the bin boundaries
  -k KINETICS_FILE, --kinetics-file=KINETICS_FILE
                        input kinetics file (default: kintrace.h5)
  --istate=ISTATE       initial state name
  --fstate=FSTATE       final state name
```