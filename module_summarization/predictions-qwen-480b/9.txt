Using Timers
============

Overview
--------

Timers in the ftrack API allow you to track time spent on specific tasks or entities within ftrack. This documentation provides an overview of how to use timers effectively within your ftrack session.

Creating a Timer
----------------

To create a timer, you typically need to associate it with a user and a context (such as a task). Here's an example of how to create a timer:

.. code-block:: python

    import ftrack_api

    session = ftrack_api.Session()
    user = session.query('User where username is "your_username"').one()
    task = session.query('Task where name is "Example Task"').one()

    timer = session.create('Timer', {
        'user': user,
        'context': task,
        'start': '2023-10-01T09:00:00',
        'duration': 3600  # Duration in seconds (1 hour)
    })

    session.commit()

Querying Timers
---------------

You can query existing timers using the session's query method. For example, to retrieve all timers for a specific user:

.. code-block:: python

    timers = session.query('Timer where user.username is "your_username"').all()

    for timer in timers:
        print(f"Timer ID: {timer['id']}, Duration: {timer['duration']} seconds")

Updating a Timer
----------------

To update an existing timer, modify its attributes and commit the changes:

.. code-block:: python

    timer = session.query('Timer where id is "timer_id"').one()
    timer['duration'] = 7200  # Update duration to 2 hours
    session.commit()

Deleting a Timer
----------------

To delete a timer, use the session's delete method:

.. code-block:: python

    timer = session.query('Timer where id is "timer_id"').one()
    session.delete(timer)
    session.commit()

Best Practices
--------------

- Always ensure that the user and context associated with a timer are valid entities within ftrack.
- Use appropriate date-time formats when setting start times for timers.
- Commit your session after creating, updating, or deleting timers to ensure changes are persisted.

For more detailed information on the Timer entity and its attributes, refer to the ftrack API documentation.