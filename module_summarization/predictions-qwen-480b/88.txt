Using SQLite and asyncio effectively
====================================

This module provides utilities and configurations for using SQLite effectively with asyncio in Python. It includes type converters, adapters, and batch processing capabilities to ensure seamless integration between SQLite and asynchronous operations.

Type Adapters and Converters
----------------------------

The module registers several adapters and converters to handle type conversions between Python and SQLite:

### Adapters (Python to SQLite)

- **Decimal**: Converted to float using ``convert_numeric_in``
- **UUID**: Converted to string using ``convert_uuid_in``
- **datetime.time**: Converted to ISO format string using ``convert_time_in``
- **datetime.date**: Converted to ISO format string using ``convert_date_in``
- **datetime.datetime**: Converted to string, with timezone conversion to UTC if timezone-aware using ``convert_datetime_in``
- **datetime.timedelta**: Converted to total seconds using ``convert_timedelta_in``
- **list**: Serialized to JSON string using ``convert_array_in`` (supports only str, int, and float elements)

### Converters (SQLite to Python)

- **Numeric**: Converted to Decimal using ``convert_numeric_out``
- **Integer**: Ensured to be int type using ``convert_int_out``
- **UUID**: Converted to UUID instance using ``convert_uuid_out``
- **Date**: Converted to datetime.date using ``convert_date_out``
- **Time**: Converted to datetime.time using ``convert_time_out``
- **Seconds**: Converted to datetime.timedelta using ``convert_seconds_out``
- **Boolean**: Converted to bool (1 = True, 0 = False) using ``convert_boolean_out``
- **Timestamp**: Converted to datetime.datetime using ``convert_timestamp_out``
- **Timestamptz**: Converted to timezone-aware datetime.datetime in UTC using ``convert_timestamptz_out``
- **Array**: Deserialized from JSON string to list using ``convert_array_out``
- **M2M**: Split comma-separated string to list using ``convert_M2M_out``

AsyncBatch Class
----------------

The ``AsyncBatch`` class provides asynchronous batch processing capabilities for SQLite queries:

### Methods

- **next()**: Fetches the next batch of results asynchronously
- **__aiter__()**: Makes the class async iterable
- **__anext__()**: Returns the next batch or raises StopAsyncIteration
- **__aenter__()**: Async context manager entry point
- **__aexit__()**: Async context manager exit point

### Properties

- **cursor**: Returns the SQLite cursor (raises ValueError if not set)

TransactionType Enum
--------------------

Defines transaction types for SQLite operations, providing consistency with database transaction management.

Usage Example
-------------

```python
# The adapters and converters are automatically registered
# when the module is imported

import sqlite3
from decimal import Decimal
from uuid import UUID

# SQLite will automatically convert these types
value = Decimal('10.5')
uuid_value = UUID('123e4567-e89b-12d3-a456-426614174000')

# When querying, results will be automatically converted back
# to appropriate Python types
```

This module ensures that SQLite operations work seamlessly with asyncio while maintaining type safety and consistency with other database engines like PostgreSQL.