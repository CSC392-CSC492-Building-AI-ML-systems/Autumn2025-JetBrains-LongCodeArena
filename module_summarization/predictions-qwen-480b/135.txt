.. _camera_geometry:

Camera Geometry
===============

This document describes how to work with images or data cubes related to Cherenkov cameras in the context of imaging atmospheric Cherenkov telescopes (IACTs). The camera geometry defines the physical layout and characteristics of the photosensor arrays used to detect Cherenkov light.

Camera Geometry Overview
------------------------

The camera geometry encompasses the spatial arrangement of the photosensors (pixels) within the camera, including their positions, shapes, and sizes. This information is crucial for image processing, calibration, and reconstruction algorithms.

Key Components
--------------

CameraDescription
~~~~~~~~~~~~~~~~~

The `CameraDescription` class encapsulates all relevant information about a camera, including its geometry and readout properties. It serves as the main entry point for accessing camera-related data.

CameraGeometry
~~~~~~~~~~~~~~

The `CameraGeometry` class contains the geometric properties of the camera's photosensor array:

- Pixel positions in the camera frame
- Pixel shapes (hexagonal, square, etc.)
- Pixel areas
- Neighboring pixel relationships
- Camera coordinate transformations

Working with Camera Images
--------------------------

Data Representation
~~~~~~~~~~~~~~~~~~~

Camera images are typically represented as 1D arrays where each element corresponds to the signal from a specific pixel. The mapping between array indices and physical pixel locations is defined by the camera geometry.

Example usage:

.. code-block:: python

    from ctapipe.instrument import CameraGeometry
    
    # Load camera geometry
    geom = CameraGeometry.from_name("LSTCam")
    
    # Access pixel positions
    pixel_x = geom.pix_x
    pixel_y = geom.pix_y
    
    # Get pixel neighbors
    neighbors = geom.neighbors

Image Processing
~~~~~~~~~~~~~~~

The camera geometry enables various image processing operations:

- Image cleaning and noise reduction
- Moment analysis for shower parameterization
- Image rotation and transformation
- Pixel masking and selection

Data Cubes
----------

For time-resolved analyses, data cubes can be constructed where each slice represents the camera image at a specific time sample. The camera geometry remains constant across all time slices, providing consistent spatial referencing.

Coordinate Systems
------------------

Camera Frame
~~~~~~~~~~~~

The camera coordinate system is defined with respect to the camera plane, typically with the origin at the center of the camera. Pixel positions are given in this frame, usually in meters.

Ground Frame
~~~~~~~~~~~~

For array-level analyses, camera coordinates can be transformed to ground coordinates using telescope pointing information and array layout data.

Transformations between coordinate systems are handled through the coordinate transformation framework, ensuring consistent spatial referencing across different analysis stages.

Telescope Integration
---------------------

Each telescope in an IACT array has its specific camera geometry. The `SubarrayDescription` class manages collections of telescopes, maintaining the relationship between telescope IDs and their respective camera geometries.

This integration allows for array-wide analyses while preserving the individual characteristics of each telescope's camera system.