Storage Driver
==============

The Storage Driver module provides an interface for handling storage operations for NetCDF or other file formats. It defines how data is stored, retrieved, and managed on disk through a flexible and dynamic API.

StorageInterfaceDirVar
----------------------

.. autoclass:: StorageInterfaceDirVar
    :members:
    :undoc-members:
    :show-inheritance:

The ``StorageInterfaceDirVar`` class represents variables and directories in the storage system. It provides a dynamic way to create and access storage variables and directories by simply using them as properties.

Key features:
- Variables and directories are created dynamically by accessing them as properties
- Data is not kept in memory but passed directly to the storage driver
- Supports both regular writes and append operations for dynamic data storage
- Handles metadata management automatically

Methods
~~~~~~~

write(data, at_index=None)
^^^^^^^^^^^^^^^^^^^^^^^^^^

Write data to a variable. If ``at_index`` is specified, it overwrites data at a specific index for appendable variables.

Parameters:
    - ``data``: The data to be written to disk
    - ``at_index`` (int or None): Index to overwrite for appendable variables

append(data)
^^^^^^^^^^^^

Append data to a variable whose size can change. The first dimension of the variable will be extended with each append operation.

Parameters:
    - ``data``: The data to be appended to disk

read()
^^^^^^

Read data from a variable on disk and return it in its processed form.

Returns:
    - The data stored in the variable, processed through the storage system

Storage Interface
-----------------

The storage interface provides the main entry point for interacting with storage operations. It manages the connection between the storage driver and the storage variables.

NetCDFIODriver
--------------

The ``NetCDFIODriver`` is the primary implementation of the storage driver for NetCDF files. It handles the actual reading and writing operations to NetCDF files and manages the file I/O operations.

Key features:
- Handles NetCDF file operations
- Manages variable creation and retrieval
- Processes data according to NetCDF conventions
- Supports both fixed-size and dynamic variables

Usage Examples
--------------

Basic variable storage:
    >>> import numpy as np
    >>> my_driver = NetCDFIODriver('my_store.nc')
    >>> my_store = StorageInterface(my_driver)
    >>> x = np.eye(3)
    >>> my_store.my_arr.write(x)

Appending data to variables:
    >>> my_driver = NetCDFIODriver('my_store.nc')
    >>> my_store = StorageInterface(my_driver)
    >>> x = 756
    >>> my_store.IAmADir.AnInt.append(x)
    >>> my_store.IAmADir.AnInt.append(x+1)

Directory structure creation:
Variables and directories are created dynamically by accessing them as properties of the storage interface.