Logging Module
==============

The logging module provides a flexible logging system for applications, supporting multiple output handlers including console, file, and syslog. It extends Python's built-in logging capabilities with additional features like structured data formatting and configurable log rotation.

Constants
---------

``LOG_NOTICE``
    A custom log level with value 25, positioned between INFO and WARNING. It represents informational messages that should be visible even in non-verbose mode but are not warnings or errors.

``_NAME_TO_LEVEL``
    A dictionary mapping string representations of log levels to their numeric values, including support for various aliases for standard levels and the custom NOTICE level.

Classes
-------

``Logging``
    Main logging configuration class that manages different log handlers and formatters.

    Methods:
        ``__init__(app)``
            Initializes the logging system with console, file, and syslog handlers based on configuration settings. Sets up log rotation timers and structured data formatters.

        ``_configure_console_logging()``
            Configures console logging output with appropriate formatting and level settings.

        ``_on_tick_rotate_check()``
            Handles periodic log file rotation based on time intervals specified in configuration.

Handlers
--------

``AsyncIOHandler``
    Asynchronous I/O handler for syslog messages that integrates with the application's event loop.

``StructuredDataFormatter``
    Custom formatter that supports structured data in log messages, allowing for more detailed and parseable log entries.

``SyslogRFC3164Formatter``
    Implements the RFC 3164 standard for syslog message formatting.

``SyslogRFC5424Formatter``
    Implements the RFC 5424 standard for syslog message formatting with structured data support.

``SyslogRFC5424microFormatter``
    Extension of RFC 5424 formatter that includes microsecond precision in timestamps.

``MacOSXSyslogFormatter``
    Specialized formatter for macOS syslog compatibility.

Configuration
-------------

The module uses the following configuration sections:

``[logging]``
    Base logging configuration including structured data identifier (sd_id).

``[logging:file]``
    File logging settings:
        - path: Log file path
        - backup_count: Number of backup files to keep
        - backup_max_bytes: Maximum size before rotation
        - rotate_every: Time-based rotation interval (e.g., '1d', '12H')
        - format: Log message format string
        - datefmt: Date format string

``[logging:syslog]``
    Syslog configuration:
        - enabled: Whether syslog output is enabled
        - address: Syslog server address (supports tcp, udp, unix sockets)
        - format: Syslog format type ('m', '5', '5micro', or default)

Usage
-----

The logging system automatically initializes based on configuration and environment settings. It supports:
- Automatic console logging when running in a TTY
- Rotating file logging with size and time-based rotation
- Syslog output with multiple protocol options
- Structured data formatting for enhanced log parsing
- Multiple syslog format standards (RFC 3164, RFC 5424)

The system integrates with application lifecycle events and handles log rotation asynchronously to prevent blocking operations.