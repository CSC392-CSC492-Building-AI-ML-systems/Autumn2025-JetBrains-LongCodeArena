Configuration
=============

The ASDF configuration system provides a way to customize the behavior of the ASDF library through global configuration options. This is managed through the `AsdfConfig` class, which should not be instantiated directly by users. Instead, configuration should be accessed and modified using the `asdf.get_config()` and `asdf.config_context()` functions.

Global Configuration Options
----------------------------

The following configuration options are available:

- **default_version** (str): The default ASDF Standard version used for new files.
- **validate_on_read** (bool): Controls whether ASDF files are validated upon reading. Default is `True`.
- **legacy_fill_schema_defaults** (bool): Whether to fill in schema defaults for legacy extensions. Default is `True`.
- **io_block_size** (int): The block size used when reading and writing files. A value of -1 indicates that the filesystem's preferred block size should be used. Default is -1.
- **array_inline_threshold** (int or None): Threshold for inlining arrays into the tree. If `None`, arrays are not inlined. Default is `None`.

Managing Extensions
-------------------

Extensions allow ASDF to handle additional tags and types. The configuration provides methods to manage these extensions:

- **extensions**: Property that returns a list of registered extensions.
- **add_extension(extension)**: Register a new extension. The new extension takes precedence over all previously registered extensions.
- **remove_extension(extension=None, *, package=None)**: Remove a registered extension. You can specify either an extension instance/URI pattern or a package name.
- **reset_extensions()**: Reset extensions to the default list registered via entry points.

Managing Resource Mappings
--------------------------

Resource mappings provide a way to access external resources (such as schema files) needed by ASDF:

- **resource_mappings**: Property that returns a list of registered resource mapping instances.
- **add_resource_mapping(mapping)**: Register a new resource mapping. The new mapping takes precedence over all previously registered mappings.
- **remove_resource_mapping(mapping=None, *, package=None)**: Remove a registered resource mapping. You can specify either a mapping or a package name.
- **reset_resources()**: Reset registered resource mappings to the default list provided as entry points.
- **resource_manager**: Property that returns the `ResourceManager` instance, which includes resources from all registered mappings.

Thread Safety
-------------

The configuration system is thread-safe. All configuration modifications are protected by a reentrant lock to ensure consistency in multi-threaded environments.

Default Values
--------------

The following default values are used for configuration options:

- `DEFAULT_VALIDATE_ON_READ`: `True`
- `DEFAULT_DEFAULT_VERSION`: The default ASDF version as defined in the versioning module
- `DEFAULT_LEGACY_FILL_SCHEMA_DEFAULTS`: `True`
- `DEFAULT_IO_BLOCK_SIZE`: `-1` (auto)
- `DEFAULT_ARRAY_INLINE_THRESHOLD`: `None`