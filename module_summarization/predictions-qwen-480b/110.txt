Best Effort Callback
====================

The ``BestEffortCallback`` is a high-level callback designed to automatically handle data visualization and tabulation during data acquisition. It provides a convenient way to generate live plots, tables, and other summaries with minimal configuration.

Overview
--------

The ``BestEffortCallback`` class is part of the data acquisition and visualization framework. It is intended to be used as a default callback that makes intelligent decisions about how to display data based on the structure of the experiment and the available metadata.

Key Features
------------

- **Live Table Display**: Automatically generates a live updating table for the primary data stream.
- **Live Plotting**: Creates live plots for data streams, excluding those explicitly marked as non-plotable.
- **Baseline Data Handling**: Displays baseline readings from the baseline stream.
- **Peak Analysis**: Integrates with ``PeakStats`` to provide peak analysis for plotted data.
- **Configurable Behavior**: Offers methods to enable or disable various display components.

Usage
-----

To use the ``BestEffortCallback``, instantiate it and register it with a RunEngine:

.. code-block:: python

    from bluesky import RunEngine
    from bluesky.callbacks.best_effort import BestEffortCallback

    bec = BestEffortCallback()
    RE = RunEngine()
    RE.subscribe(bec)

Configuration
-------------

The ``BestEffortCallback`` can be configured to enable or disable various features:

- ``enable_table()`` / ``disable_table()``: Controls the display of the live table.
- ``enable_baseline()`` / ``disable_baseline()``: Controls the display of baseline data.
- ``enable_plots()`` / ``disable_plots()``: Controls the generation of live plots.
- ``enable_heading()`` / ``disable_heading()``: Controls the display of run metadata at the start of a scan.

Example
-------

.. code-block:: python

    bec = BestEffortCallback()
    bec.disable_table()  # Disable live table display
    bec.enable_plots()   # Ensure plots are enabled

    # Use with RunEngine
    RE(scan(plan, motor, detector))

This configuration would disable the live table but keep the plotting functionality active.

Advanced Usage
--------------

The ``BestEffortCallback`` also supports advanced features such as custom figure factories, overplotting control, and stream-specific configurations. These features allow for fine-tuning the visualization to match specific experimental requirements.

For detailed instructions on testing in a simulated environment, refer to the interactive test script:
``tests/interactive/best_effort_cb.py``

See Also
--------

- :class:`bluesky.callbacks.LiveTable`
- :class:`bluesky.callbacks.mpl_plotting.LivePlot`
- :class:`bluesky.callbacks.mpl_plotting.LiveGrid`
- :class:`bluesky.callbacks.mpl_plotting.LiveScatter`
- :class:`bluesky.callbacks.fitting.PeakStats`