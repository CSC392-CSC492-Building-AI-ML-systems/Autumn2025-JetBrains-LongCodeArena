Conditions in PyTables
======================

PyTables supports the use of conditions to filter data when reading from tables. Conditions are boolean expressions that are evaluated for each row in a table, and only rows for which the condition evaluates to ``True`` are returned. This mechanism is particularly useful for querying large datasets efficiently.

Conditions are specified as Python expressions involving column names and constants, combined with comparison and logical operators. These expressions are passed to methods such as ``Table.read_where``, ``Table.where``, and ``Table.get_where_list``.

Syntax
------

A condition is a string containing a valid Python expression that evaluates to a boolean value. The expression can include:

- Column names from the table.
- Literal constants (numbers, strings, etc.).
- Arithmetic operators: ``+``, ``-``, ``*``, ``/``, ``//``, ``%``, ``**``.
- Comparison operators: ``==``, ``!=``, ``<``, ``<=``, ``>``, ``>=``.
- Logical operators: ``&`` (and), ``|`` (or), ``~`` (not). Note that ``and``, ``or``, and ``not`` are not supported; use bitwise operators instead.
- Functions: A limited set of functions is supported, such as ``sin``, ``cos``, ``tan``, ``arcsin``, ``arccos``, ``arctan``, ``sinh``, ``cosh``, ``tanh``, ``arcsinh``, ``arccosh``, ``arctanh``, ``exp``, ``log``, ``log10``, ``sqrt``, ``abs``, ``where``, ``contains``, and ``startswith``.

Examples
--------

Given a table with columns ``name``, ``age``, and ``weight``, here are some example conditions:

- Select all rows where age is greater than 30:
  ::

    "age > 30"

- Select all rows where age is greater than 30 and weight is less than 70:
  ::

    "(age > 30) & (weight < 70)"

- Select all rows where the name starts with "A":
  ::

    'name.startswith("A")'

- Select all rows where the name contains "oh":
  ::

    '"oh" in name'

- Select all rows where age is between 20 and 40:
  ::

    "(age >= 20) & (age <= 40)"

- Select all rows where age is 25 or 35:
  ::

    "(age == 25) | (age == 35)"

Using Conditions
----------------

Conditions are used with the following methods of the ``Table`` class:

- ``Table.read_where(condition, condvars=None, field=None)``: Reads rows fulfilling the condition.
- ``Table.where(condition, condvars=None)``: Returns an iterator over rows fulfilling the condition.
- ``Table.get_where_list(condition, condvars=None, sort=True)``: Returns the indices of rows fulfilling the condition.

The ``condvars`` parameter can be used to pass variables into the condition expression. It should be a dictionary mapping variable names to values.

Performance Tips
----------------

- Use indexed columns in conditions for better performance. PyTables can use indexes to speed up query execution.
- Avoid complex expressions if possible. Simple conditions are faster to evaluate.
- When using string operations, consider the performance implications. Operations like ``startswith`` and ``contains`` can be slower than numerical comparisons.