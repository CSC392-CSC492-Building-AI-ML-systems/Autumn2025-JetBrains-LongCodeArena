BaseUser
========

.. automodule:: baseuser
    :members:
    :undoc-members:
    :show-inheritance:

.. autoclass:: BaseUser
    :members:
    :undoc-members:
    :show-inheritance:

Overview
--------

The ``BaseUser`` class provides a basic user model with authentication support. It is built on top of the Piccolo ORM ``Table`` class and includes fields for user management such as username, password, email, and administrative privileges.

Fields
------

- ``id`` (Serial): The primary key.
- ``username`` (Varchar): Unique username with a maximum length of 100 characters.
- ``password`` (Secret): Hashed password with a maximum length of 255 characters.
- ``first_name`` (Varchar): Optional first name.
- ``last_name`` (Varchar): Optional last name.
- ``email`` (Varchar): Unique email address with a maximum length of 255 characters.
- ``active`` (Boolean): Indicates if the user is active. Defaults to ``False``.
- ``admin`` (Boolean): Indicates if the user can log into the Piccolo admin GUI. Defaults to ``False``.
- ``superuser`` (Boolean): Indicates if the user can manage other users' passwords in the Piccolo admin GUI. Defaults to ``False``.
- ``last_login`` (Timestamp): Timestamp of the user's last login. Nullable.

Password Management
-------------------

The ``BaseUser`` class includes robust password management features:

- Passwords are hashed using PBKDF2 with SHA256.
- Minimum password length is 6 characters.
- Maximum password length is 128 characters.
- Passwords are automatically hashed when set.
- The class provides methods for updating passwords and validating password strength.

Authentication
--------------

The class provides methods for user authentication:

- ``login``: Asynchronously authenticates a user and updates the last login timestamp.
- ``login_sync``: Synchronous version of the login method.

Utilities
---------

- ``get_salt``: Generates a random salt for password hashing.
- ``get_readable``: Returns a readable representation of the user, using the username.
- ``split_stored_password``: Splits a stored password hash into its components.