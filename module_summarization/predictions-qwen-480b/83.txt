# Cockroach Engine

## Overview

The CockroachEngine is a specialized database engine for CockroachDB, extending the PostgreSQL engine with CockroachDB-specific functionality and configurations.

## Class: CockroachEngine

An extension of `PostgresEngine` designed specifically for CockroachDB compatibility.

### Attributes

- **engine_type**: `"cockroach"` - Identifies this as a CockroachDB engine
- **min_version_number**: `0` - Disabled version checking due to CockroachDB's versioning scheme

### Methods

#### `__init__`

```python
def __init__(
    self,
    config: Dict[str, Any],
    extensions: Sequence[str] = (),
    log_queries: bool = False,
    log_responses: bool = False,
    extra_nodes: Dict[str, CockroachEngine] = None,
) -> None
```

Initialize the CockroachDB engine with the specified configuration.

**Parameters:**
- `config`: Database connection configuration dictionary
- `extensions`: Sequence of PostgreSQL extensions to load
- `log_queries`: Whether to log SQL queries
- `log_responses`: Whether to log query responses
- `extra_nodes`: Additional CockroachDB nodes for distributed queries

#### `prep_database`

```python
async def prep_database(self)
```

Prepare the database by enabling experimental ALTER COLUMN TYPE functionality required for certain CockroachDB operations.

**Note:** If the database user lacks sufficient privileges to set cluster options, a warning will be displayed indicating that some functionality may not behave as expected.

**Raises:**
- `asyncpg.exceptions.InsufficientPrivilegeError`: When the user cannot set cluster settings

## Configuration

The CockroachEngine uses the same configuration format as PostgresEngine, with connection parameters such as:
- `host`: Database host
- `port`: Database port (default: 26257 for CockroachDB)
- `user`: Database username
- `password`: Database password
- `database`: Database name

## Requirements

- CockroachDB server
- asyncpg library for asynchronous database connections
- Proper cluster permissions for advanced features