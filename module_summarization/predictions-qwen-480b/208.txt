Utilities for Developers
=========================

This module provides utilities and compatibility fixes for older versions of Python, NumPy, and SciPy. These utilities help maintain backward compatibility while supporting newer features and improvements in the scientific Python ecosystem.

Compatibility Fixes
-------------------

The following compatibility fixes are implemented to support older versions of key dependencies:

### Sparse Matrix Containers

Lists of supported sparse matrix containers from SciPy are defined for backward compatibility:

- ``CSR_CONTAINERS``: Contains ``scipy.sparse.csr_matrix`` and, for SciPy >= 1.8, ``scipy.sparse.csr_array``.
- ``CSC_CONTAINERS``: Contains ``scipy.sparse.csc_matrix`` and, for SciPy >= 1.8, ``scipy.sparse.csc_array``.
- ``COO_CONTAINERS``: Contains ``scipy.sparse.coo_matrix`` and, for SciPy >= 1.8, ``scipy.sparse.coo_array``.
- ``LIL_CONTAINERS``: Contains ``scipy.sparse.lil_matrix`` and, for SciPy >= 1.8, ``scipy.sparse.lil_array``.
- ``DOK_CONTAINERS``: Contains ``scipy.sparse.dok_matrix`` and, for SciPy >= 1.8, ``scipy.sparse.dok_array``.
- ``BSR_CONTAINERS``: Contains ``scipy.sparse.bsr_matrix`` and, for SciPy >= 1.8, ``scipy.sparse.bsr_array``.

### Line Search Functions

Backward compatibility for importing line search functions from SciPy:

- ``line_search_wolfe1`` and ``line_search_wolfe2`` are imported from the appropriate SciPy module depending on the version.

### NumPy Percentile Function

The ``percentile`` function is adapted for compatibility with NumPy versions older than 1.22, where the ``interpolation`` parameter was used instead of ``method``.

### Threadpool Control

Utilities for managing threadpool limits and information using ``threadpoolctl``:

- ``_get_threadpool_controller``: Returns a global threadpool controller for efficient thread management.
- ``threadpool_limits``: Wrapper for ``threadpoolctl.threadpool_limits`` using the global controller if available.
- ``threadpool_info``: Wrapper for ``threadpoolctl.threadpool_info`` using the global controller if available.

### Delayed Function

A deprecated import path for the ``delayed`` function, which has been moved to ``sklearn.utils.parallel``.

### SciPy Mode Function

A compatibility wrapper for ``scipy.stats.mode`` to handle API changes in SciPy versions 1.9 and later.

### SciPy Conjugate Gradient

A compatibility wrapper for ``scipy.sparse.linalg.cg`` to handle API changes in SciPy 1.12.

### Importlib Resources

Backport of Python 3.9's ``importlib.resources`` functionality:

- ``_open_text``: Opens a text resource.
- ``_open_binary``: Opens a binary resource.
- ``_read_text``: Reads a text resource.
- ``_path``: Gets the path to a resource.

These utilities ensure that scikit-learn remains compatible with a wide range of dependency versions while leveraging new features when available.