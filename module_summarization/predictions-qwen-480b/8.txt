Review Sessions
===============

A review session in ftrack is a structured way to manage and conduct reviews of creative content, such as videos, images, or other media files. It allows users to gather feedback, annotate assets, and track changes throughout the review process. Review sessions are typically used by teams to streamline the approval workflow and ensure that all stakeholders have access to the latest versions of assets.

Overview
--------

Review sessions provide a centralized location where users can:

- Upload and organize media for review.
- Annotate and comment on specific parts of the media.
- Track feedback and revisions over time.
- Collaborate with team members in real-time.
- Manage different versions of assets within the session.

Each review session is associated with a project and can include multiple items, such as shots, assets, or sequences. Users can be invited to participate in the session, and permissions can be controlled to ensure that only authorized individuals can make changes or add comments.

Creating a Review Session
-------------------------

To create a new review session, you need to specify the project it belongs to and provide a name for the session. Optionally, you can also set additional metadata, such as a description or start/end dates.

Here's an example of how to create a review session using the ftrack API:

.. code-block:: python

    import ftrack_api

    # Connect to the ftrack server
    session = ftrack_api.Session()

    # Retrieve the project
    project = session.query('Project where name is "My Project"').one()

    # Create a new review session
    review_session = session.create('ReviewSession', {
        'name': 'Concept Art Review',
        'project': project,
        'description': 'Review of concept art for upcoming characters.'
    })

    # Commit the changes to the server
    session.commit()

Adding Items to a Review Session
--------------------------------

Once a review session is created, you can add items to it. These items can be existing assets in ftrack, such as shots or asset versions, or they can be external media files uploaded specifically for the review.

To add an existing asset version to a review session:

.. code-block:: python

    # Retrieve the asset version
    asset_version = session.query('AssetVersion where name is "v001"').one()

    # Add the asset version to the review session
    session.create('ReviewSessionObject', {
        'review_session': review_session,
        'asset_version': asset_version
    })

    # Commit the changes
    session.commit()

Managing Feedback and Annotations
---------------------------------

Review sessions support annotations and comments directly on the media. Users can draw on images or mark specific frames in videos to highlight areas that need attention. All annotations are stored within ftrack and can be reviewed later to track the evolution of feedback.

To retrieve annotations for a specific item in a review session:

.. code-block:: python

    # Retrieve the review session object
    review_session_object = session.query(
        'ReviewSessionObject where review_session.name is "Concept Art Review"'
    ).first()

    # Get annotations for the object
    annotations = session.query(
        'ReviewSessionObjectComment where review_session_object.id is "{0}"'.format(
            review_session_object['id']
        )
    ).all()

    for annotation in annotations:
        print(annotation['text'])

Collaboration and Permissions
-----------------------------

Review sessions support collaboration by allowing multiple users to participate. You can invite users to a review session and control their permissions, such as whether they can add comments, make annotations, or edit the session itself.

Permissions are managed through ftrack's standard access control mechanisms, ensuring that only authorized users can perform specific actions within the session.

Closing a Review Session
------------------------

Once the review process is complete and all feedback has been addressed, you can close the review session to indicate that it is finalized. Closing a session prevents further changes or additions, preserving the state of the session for future reference.

To close a review session:

.. code-block:: python

    # Update the review session status
    review_session['status'] = 'Closed'

    # Commit the changes
    session.commit()

Summary
-------

Review sessions in ftrack provide a powerful and flexible way to manage the review process for creative projects. By centralizing feedback, annotations, and revisions, teams can improve collaboration, reduce miscommunication, and ensure that all stakeholders are aligned on the direction of the project.