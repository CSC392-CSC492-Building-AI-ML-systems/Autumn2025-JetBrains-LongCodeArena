Azure Storage Library Provider
===============================

.. module:: asab.library.azure

.. autoclass:: AzureStorageLibraryProvider
   :members:
   :undoc-members:
   :show-inheritance:

Overview
--------

The ``AzureStorageLibraryProvider`` is a library provider implementation that enables reading files from a Microsoft Azure Storage container. It supports both public and private containers using Shared Access Signature (SAS) tokens for authentication.

Configuration
-------------

To configure the Azure Storage Library Provider, use the following URL format:

.. code-block:: text

    azure+https://ACCOUNT-NAME.blob.core.windows.net/BLOB-CONTAINER

For private containers that do not have "Public access" enabled, you must create an "Access Policy" with "Read" and "List" permissions and append a "Shared Access Signature" (SAS) query string to the URL:

.. code-block:: text

    azure+https://ACCOUNT-NAME.blob.core.windows.net/BLOB-CONTAINER?sv=2020-10-02&si=XXXX&sr=c&sig=XXXXXXXXXXXXXX

Caching
-------

The provider supports optional file caching to improve performance. Configure caching using the ``library.azure_cache`` configuration option:

- Set to ``true`` to enable caching in a temporary directory
- Set to ``false`` to disable caching
- Set to a specific path to cache files in that directory

The cache stores downloaded files along with their ETags to enable efficient updates when files change in the Azure Storage container.

Usage
-----

The provider automatically handles:

- Connecting to the Azure Storage container
- Listing available files and directories
- Reading file contents
- Caching files locally when enabled
- Handling ETag-based cache validation

The provider implements the standard library provider interface with ``list()`` and ``read()`` methods for accessing files in the Azure Storage container.